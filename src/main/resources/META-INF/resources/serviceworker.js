(()=>{"use strict";const e="wot-clan-manager:1.1.2",a=["/index.html"],t=[new RegExp(`${location.origin}/.*`,"i")],n=[new RegExp(`${location.origin}/api/.*`,"i")],c=(e,a)=>{for(let t of a)if("string"==typeof t&&t==e||t instanceof RegExp&&t.test(e))return!0;return!1};self.oninstall=function(t){t.waitUntil((async()=>{await self.skipWaiting();(await caches.open(e)).addAll(a)})())},self.onactivate=function(a){a.waitUntil((async()=>{await self.clients.claim();const a=await caches.keys();await Promise.all(a.map((a=>{if(a!=e)return console.log(`[Service Worker] Delete cache: ${a}`),caches.delete(a)})))})())},self.addEventListener("fetch",(a=>{const i=a.request;a.respondWith((async()=>{let a=await caches.match(i);if(a)return a;if(a=await fetch(i),a.ok&&a.status<300&&(e=>{const a=e.url;return!c(a,n)&&!!c(a,t)})(i)){const t=await caches.open(e);try{t.put(i,a.clone())}catch(e){console.warn(e)}}return a})())})),self.addEventListener("message",(function(e){console.log(`Received message from main thread: ${e.data}`),"validate-cache"==e.data&&(async()=>{await self.clients.claim();(await caches.keys()).map((e=>caches.delete(e)))})()}))})();
//# sourceMappingURL=serviceworker.js.map