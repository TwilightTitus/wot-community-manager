{"version":3,"file":"js/index.69266d8c9243095030e1.min.js","mappings":"sBAAKA,OAAOC,UAAUC,WACrBF,OAAOC,UAAUC,SAAW,WAC3B,GAAoB,IAAhBC,KAAKC,OACR,OAAO,EAER,IAAIC,EAAO,EACX,MAAMD,EAASD,KAAKC,OACpB,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAQE,IAAK,CAEhCD,GAASA,GAAQ,GAAKA,EADZF,KAAKI,WAAWD,GAE1BD,GAAQ,CACT,CACA,OAAOA,CACR,E,WCbD,MAAMG,EAAOC,SAASC,KAKhBC,EAA0B,eAK1BC,EAAsB,gBAOtBC,EAA2B,oCAc3BC,EAA0B,IAAIC,QAW9BC,EAAUC,IACf,MAAMC,EAA0D,MAA3CD,EAAOE,KA/BM,UAiC5BC,EAAYH,EAAOI,KAAKJ,EAAOE,KAtCW,uCAsCqCG,QAC/EC,GAAgBN,EAAOE,KAtCS,4BAON,qBA+B+DK,OACzFC,GAAYR,EAAOE,KAAKP,IAAwB,IAAIY,OAAOE,cAAcC,QAAQhB,EAAyB,KAC1GiB,GAAiBX,EAAOE,KArCG,wBAqCgC,IAAIK,OAAOE,cACtEG,EAAuB,GAAGjB,MAAwBa,IAClDK,EAAsB,IAAID,KAC1BE,EAAY,GAAGN,MAAaG,IAClCR,EAAUC,KAAKE,GAAcS,SAASC,IACrC,MAAMC,EArBwB,CAACD,IAChC,IAAIE,EAAOrB,EAAwBsB,IAAIH,GAMvC,OALW,MAARE,QAAgC,IAATA,IACzBA,EAAO,IAAIE,IACXvB,EAAwBwB,IAAIL,EAAME,IAG5BA,CAAI,EAceI,CAAwBN,GACjD,GAAGf,EACFgB,EAAiBM,OAAOT,OACrB,CACH,MAAMU,EAtCW,EAACR,EAAMH,EAAqBD,KAC/C,GAAGI,EAAKS,GAAGZ,GACV,OAAOG,EAAKd,KAAKU,GAElB,MAAMc,EAASV,EAAKZ,KAAKS,GAAqBR,QAC9C,OAAGqB,EACKA,EAAOxB,KAAKU,GAEb,IAAI,EA8BKe,CAAYX,EAAMH,EAAqBD,GACzC,MAATY,GAAiBA,EAAMjB,OAAOE,eAAiBE,GACjDM,EAAiBI,IAAIP,GAAW,EAClC,CAE4B,GAAzBG,EAAiBW,KACnBZ,EAAKa,SAASjC,GAEdoB,EAAKc,YAAYlC,EAAyB,IAE5CI,EAAO+B,gBAtDoB,SAsDgB,EAI5CxC,EAAKyC,GApEY,qCAoEGC,IACnBA,EAAMC,kBACNnC,EAAOkC,EAAMjC,OAAO,G,WCzErB,MAAMT,EAAOC,SAASC,KAUhB0C,EAAwB,kBAExBC,EAA2B,qBAE3BC,EAA2B,SAASF,QAA4BA,KAChEG,EAA8B,IAAIF,KAGlCG,EAA2B,6BAU3BC,EAAUxC,IACf,MAAMyC,GAAUzC,EAAOwB,OAAS,IAAIjB,OAAOE,cACrCN,EAAYH,EAAOI,KAAKJ,EAAOE,KAxBW,uCAwBqCG,QAC/EC,GAAgBN,EAAOE,KAvBS,6BAuB+BmC,GAA0B9B,OAE/F,GADAJ,EAAUC,KAAKE,GAAcwB,YAAYS,GACrCE,EAAOtD,OAAS,EAAG,CACtB,MAAMY,EAAS0C,EAAOC,MAAM,OAC5BvC,EAAUC,KAAKE,GAAcS,SAASC,IACrC,MAAM2B,EAhBiB,CAAC3C,IAC1B,MAAM4C,EAAQC,MAAMC,KAAK9C,EAAOI,KAAKkC,IAAgC,IAIrE,OAHGtC,EAAOyB,GAAGa,IACZM,EAAMG,KAAK/C,GAEL4C,EAAMI,KAAKhC,GAASA,EAAKd,KAAKkC,IAA6B,KAAIa,KAAK,KAAKxC,aAAa,EAW1EyC,CAAkBlC,GAC/BjB,EAAOoD,MAAMpD,GAAW4C,EAAQH,OAAOzC,GAAU,KACpDiB,EAAKa,SAASU,EAAyB,GAE1C,GAID,IAAIa,EAAiB,KACrB7D,EAAKyC,GA1Ca,kCA0CEC,IACnBA,EAAMC,kBACN,MAAMlC,EAASiC,EAAMjC,OACjBoD,GACHC,aAAaD,GAEdA,EAAiBE,YAAW,IAAMd,EAAOxC,IAlD1B,IAkD2C,G,UCnD3D,MAAMT,EAAOC,SAASC,KAKhB8D,EAAoB,cAapBC,EAAW,CAACxC,EAAMyC,EAAWC,KAClC1C,EAX0B,EAACA,EAAM0C,IAC7B1C,EAGDA,EAAKS,GAAGiC,GACH1C,EAEDA,EAAKZ,KAAKsD,GAAmBrD,SAAW,KALvC,KASDsD,CAAmB3C,EAAM0C,GACrB,MAAR1C,EACKA,EAAKd,KAAKuD,GAEX,MAGRlE,EAAKyC,GAxBa,iCAwBEC,IACnBA,EAAMC,kBACN,MAAMlC,EAASiC,EAAMjC,OACf4D,EAAgB5D,EAAOI,KAAKJ,EAAOE,KAzBK,qCAyByCG,QACjFwD,EAAiB,GAAGN,MAAsBvD,EAAOE,KAAKqD,KACtDO,EAAgB,IAAID,KACpBE,GAAa/D,EAAOE,KA1BK,uBA0B4B,IAAIK,OAAOE,cACtE,IAAImD,EACH,OAED,MAAMI,EAASnB,MAAMC,KAAKc,EAAcK,UAAUC,MAAK,CAACC,EAAGC,KAC1D,MAAMC,GAAUb,EAASW,EAAGN,EAAgBC,IAAkB,IAAIrD,cAC5D6D,GAAUd,EAASY,EAAGP,EAAgBC,IAAkB,IAAIrD,cAClE,OAAI4D,EAASC,GACJ,EACLD,EAASC,EACL,EACD,CAAC,IAGNP,GAA2B,SAAdA,GACfC,EAAOO,UAERX,EAAcY,QAAQC,OAAOT,EAAO,G,GChDjCU,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CCtBAJ,EAAoBO,EAAI,WACvB,GAA0B,iBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOjG,MAAQ,IAAIkG,SAAS,cAAb,EAChB,CAAE,MAAOC,GACR,GAAsB,iBAAXC,OAAqB,OAAOA,MACxC,CACA,CAPuB,G,mBCAxB,MAAMC,EACe,oBAATC,KAA+BA,KACpB,oBAAXF,OAAiCA,YACtB,IAAX,EAAAJ,EAAiC,EAAAA,EACrC,CAAC,ECHIO,EAAWF,EAAOG,MCCzBC,EAAgBJ,EAAOK,SAASC,OA0ItC,MAAMC,EAAW,IAxIjB,MACC,GAAS,CAAC,EACV,GAAe,CAAC,EAChB,GAAkB,CAAC,EACnB,IAAwB,EACxB,GAAgB,GAChB,GAAS,GACT,GAEA,WAAAC,GAAgB,CAEhB,wBAAIC,CAAqBxE,GACxBtC,MAAK,EAAwBsC,CAC9B,CAEA,iBAAAyE,CAAkBC,GACjB,GAAIA,aAAmBrD,MACtB,IAAK,IAAIgD,KAAUK,EAClBhH,MAAK,EAAgB2G,EAAOM,aAAc,OAE3CjH,MAAK,EAAgBgH,EAAQC,aAAc,CAC7C,CAEA,cAAAC,CAAeC,GACd,GAAIA,aAAgBxD,MACnB,IAAK,IAAIyD,KAAOD,EACfnH,MAAK,EAAaoH,EAAIH,aAAc,OAErCjH,MAAK,EAAamH,EAAKF,aAAc,CACvC,CAEA,KAAAI,CAAMA,IACgB,mBAAVA,GAAwBA,aAAiBC,UACnDtH,MAAK,EAAO6D,KAAKwD,EACnB,CAEA,cAAAE,CAAeC,GACd,GAAGA,aAAwB7D,MAC1B,OAAO6D,EAAa3F,SAAQ4F,GAAezH,KAAKuH,eAAeE,KAChE,GAA4B,iBAAjBD,EACV,MAAM,IAAIE,MAAM,oCACjB,GAAqC,mBAA1BF,EAAaG,SACvB,MAAM,IAAID,MAAM,mDACjB,GAAqC,mBAA1BF,EAAaI,SACvB,MAAM,IAAIF,MAAM,mDAEjB1H,MAAK,EAAc6D,KAAK2D,GACxBxH,KAAK6H,OACN,CAEA,SAAIC,GACH,MAAO,UACoB,GAAtB9H,MAAK,EAAOC,SAGbD,MAAK,IAGRA,MAAK,EAAc,WAClB,KAA4B,GAAtBA,MAAK,EAAOC,QAAY,CAC7B,MAAMoH,EAAQrH,MAAK,EAAO,GAC1B,GAAIqH,EAAM,CACT,MAAMU,EAAeV,aAAiBC,cAAgBD,QAAcA,IACjEU,IACFA,aAAwBpE,MAAQoE,EAAalG,SAAQ4F,GAAezH,KAAKuH,eAAeE,KAAgBzH,KAAKuH,eAAeQ,GAC9H,CAEA/H,MAAK,EAAOgI,OACb,CAEA,OADAhI,MAAK,EAAc,KACZA,KAAK8H,KACZ,EAbkB,IAFX9H,MAAK,GALP,EAwBR,CAEA,iBAAMiI,CAAYC,SACXlI,KAAK8H,MAEX,MAAMnB,EAASuB,EAAMC,SAASxB,OAE9B,GAAI3G,MAAK,EAAW2G,EAAQuB,EAAMd,IAAIH,YACrC,OAAOiB,EAER,MAAM,IAAEd,EAAG,SAAEe,GAAaD,EACpBE,QAAcpI,MAAK,EAAU2G,EAAQ,CAAES,MAAKe,aAClD,IAAKC,EACJ,OAAOF,EAER,IAAK,IAAIT,KAAeW,EACvBF,QAAcT,EAAYG,SAASM,GAEpC,OAAOA,CACR,CAEA,KAAAL,GACC7H,MAAK,EAAS,CAAC,CAChB,CAEA,oBAAMqI,CAAejB,EAAKkB,GACzB,OAAO/B,EAASa,EAAKkB,EACtB,CAEA,GAAW3B,EAAQS,GAClB,QAAIpH,MAAK,EAAaoH,QAElBpH,MAAK,GAAyB2G,GAAUF,MAExCzG,MAAK,EAAgB2G,GAI1B,CAEA,OAAM,CAAUA,EAAQ3E,GACvB,IAAIoG,EAAQpI,MAAK,EAAO2G,GAMxB,OALKyB,IACJA,EAAQpI,MAAK,EAAsB2G,EAAQ3E,GAC3ChC,MAAK,EAAO2G,GAAUyB,GAGhBA,CACR,CAEA,OAAM,CAAsBzB,EAAQ3E,GACnC,MAAMQ,EAAS,GACf,IAAK,IAAIiF,KAAezH,MAAK,QAClByH,EAAYE,SAAS3F,IAC9BQ,EAAOqB,KAAK4D,GAGd,OAAOjF,CACR,GAID4B,YAAW,IAAMwC,EAASkB,OAAO,IAGjC,UC7IA,QAAoC,IAA1BzB,EAAOkC,eAA+B,CAC/C,MAAMC,EAASnC,EAAOkC,eAChBE,EAAiB,SAASP,GAC/BM,EAAO1I,UAAU4I,KAAKC,KAAK3I,KAAMkI,EAAMI,QAAQM,OAAQV,EAAMd,IAAKc,EAAMC,SAASU,MAAOX,EAAMC,SAASW,SAAUZ,EAAMC,SAASY,eAC5F,IAA1Bb,EAAMI,QAAQU,SACvBC,OAAOC,oBAAoBhB,EAAMI,QAAQU,SACxCnH,SAAQsH,IACRX,EAAO1I,UAAUsJ,iBAAiBT,KAAK3I,KAAMmJ,EAASjB,EAAMI,QAAQU,QAAQG,GAAS,IAEvFX,EAAO1I,UAAUuJ,KAAKV,KAAK3I,KAAMkI,EAAMI,QAAQ/H,KAChD,EACM+I,EAAM,WACX,MAAMC,EAAM,IAAIf,EAAOgB,WACvB,IAAIxH,EAyCJ,OAvCAuH,EAAIH,iBAAmB,SAASK,EAAOC,GACtC1H,EAAKsG,QAAQU,QAAUhH,EAAKsG,QAAQU,SAAW,CAAC,EAChDhH,EAAKsG,QAAQU,QAAQS,GAASC,CAC/B,EAEAH,EAAIb,KAAO,SAASiB,EAASC,EAAMC,EAASC,EAAWC,GACtD,MAAM3C,EAAM,IAAI4C,IAAIJ,EAAMvD,EAAOK,SAASC,QAC1C3E,EAAO,CACNoF,IAAM,IAAI4C,IAAIJ,EAAMlD,UACpB4B,QAAU,CACTM,OAASe,GAEVxB,SAAW,CACVS,OAASe,EACThD,OAAQS,EAAIT,OACZsD,SAAW7C,EAAI6C,SACfC,SAAU9C,EAAI8C,SACdC,KAAM/C,EAAI+C,KACVC,KAAOhD,EAAIiD,SACXC,MAAOlD,EAAI9D,OACXpD,KAAOkH,EAAIlH,KACX2I,MAA2B,kBAAZgB,GAAwBA,EACvCf,SAAWgB,EACXf,SAAWgB,GAGd,EAEAR,EAAIF,KAAO,SAASkB,GAChBvI,EAAKmG,SAASU,OAChB7G,EAAKsG,QAAQ/H,KAAOgK,EACjB,EAAQtC,YAAYjG,GACnBwI,KAAK/B,EAAegC,KAAKlB,IAClB,MAAEmB,QAAQC,QAGrBlC,EAAeE,KAAKY,EAAKvH,EAC3B,EAEOuH,CACR,EAEAlD,EAAOkC,eAAiBe,EACxBjD,EAAOkC,eAAezI,UAAY0I,EAAO1I,UACzCuG,EAAOkC,eAAezI,UAAU+G,YAAcyC,CAC/C,CC3DAjD,EAAOG,MAAQqC,eAAee,EAAMgB,GACnC,MAAMxD,EAAM,IAAI4C,IAAIJ,EAAMvD,EAAOK,UAC3B1E,QAAa,EAAQiG,YAAY,CACrCb,IAAM,IAAI4C,IAAIJ,EAAMlD,UACpB4B,QAAUsC,GAAY,CAAC,EACvBzC,SAAW,CACVS,YAA6B,IAAbgC,EAA2B,MAASA,EAAShC,QAAU,MACvEjC,OAAQS,EAAIT,OACZsD,SAAW7C,EAAI6C,SACfC,SAAU9C,EAAI8C,SACdC,KAAM/C,EAAI+C,KACVC,KAAOhD,EAAIiD,SACXnK,KAAOkH,EAAIlH,KACXoK,MAAOlD,EAAI9D,OACXuF,OAAQ,KAIX,OAAOtC,EAASvE,EAAKoF,IAAKpF,EAAKsG,QAChC,ECrBe,MAAMuC,EACjB,cAAMlD,CAAS3F,GAAM,CACrB,cAAM4F,CAAS5F,GAAM,CACrB,mBAAM8I,CAAc1D,EAAKkB,GAC3B,OAAO/B,EAASa,EAAKkB,EACtB,ECID,MAAMyC,EAAuBlC,MAAOmC,EAAOhJ,KAC1CA,EAAKsG,QAAQU,QAAUhH,EAAKsG,QAAQU,SAAW,CAAC,EAChDhH,EAAKsG,QAAQU,QAAuB,cAAI,UAAUgC,IAC3ChJ,GAIO,MAAMiJ,UAAyBJ,EAE7C,GAAS,KACT,GAAY,CAAC,EACb,GACA,GACA,GACA,GACA,GAEA,WAAAhE,EAAY,UAAEqE,EAAS,WAAEC,EAAU,YAAEC,EAAW,gBAAEC,EAAkB,IAAS,aAAEC,IAE9E,GADAC,QACwB,iBAAdL,KAA4BA,aAAqBvH,QAA+B,mBAAduH,EAC3E,MAAM,IAAIxD,MAAM,oEAGjB,GAFA1H,MAAK,EAAakL,EAEO,mBAAfC,EACT,MAAM,IAAIzD,MAAM,gDAGjB,GAFA1H,MAAK,EAAcmL,EAEhBC,GAAsC,mBAAhBA,EACxB,MAAM,IAAI1D,MAAM,iDACjB1H,MAAK,EAAeoL,GAAeL,EAEnC/K,MAAK,EAAmBqL,EACxBrL,MAAK,EAAgBsL,CACtB,CAEA,cAAM3D,CAAS3F,GACd,MAAMwJ,SAAcxL,MAAK,EACnBkL,EAAYlL,MAAK,EACjB2G,EAAS3E,EAAKmG,SAASxB,OAC7B,MAAa,aAAT6E,QAAkCN,EAAUlJ,GAC9B,WAATwJ,EAA0BN,GAAavE,EACvCuE,aAAqBvH,OACtBuH,EAAUO,SAAS9E,EAG5B,CAEA,cAAMiB,CAAS5F,GACd,IAAKhC,MAAK,EAAQ,CACjB,MAAM,IAAEoH,EAAG,SAAEe,GAAanG,EAC1BhC,MAAK,EAAY,CAAEoH,MAAKe,YACxBnI,MAAK,EAASA,MAAK,EAAY,CAAEoH,MAAKe,aACtCnI,MAAK,GACN,CAEA,OAAOA,MAAK,EAAiBgC,EAC9B,CAEA,OAAM,CAAiBA,GACtB,MAAM0J,EAAW1L,MAAK,EAChBgL,QAAchL,MAAK,EACnBwC,QAAekJ,EAASV,EAAOhJ,GAErC,OAAOQ,GAAkBR,CAC1B,CAEA,KACC,GAAIhC,MAAK,EAAmB,EAAG,CACTA,MAAK,EAA1B,MACM2L,EAAU9C,UACX7I,MAAK,QACFA,MAAK,EAAcA,MAAK,SAExBA,MAAK,EAAYA,MAAK,GAE7BoE,WAAWuH,EAAQ3L,MAAK,EAAkB,EAI3CoE,WAAWuH,EAAU3L,MAAK,EAC3B,CACD,EC1FD,MCEA,GACC4L,iBDHwB,SAASC,GACjC,MAAMxE,EAAQwE,EAQd,OAPAxE,EAAM8D,WAAatC,UAClB,MAAMiD,QAAiBtF,MAAMa,EAAM0E,MAAM3E,IAAK,CAC7CwB,OAASvB,EAAM0E,MAAMnD,QAAU,QAGhC,OADAkD,QAAiBA,EAASE,OACnBF,EAASzE,EAAM0E,MAAMD,SAASlH,cAAc,EAE7CqG,EAAiBY,EACzB,ECNCZ,iBAAgB,GCCjB5E,EAAO4F,UAAY5F,EAAO4F,WAAa,CAAC,EACxC5F,EAAO4F,UAAUC,gBAAkB7F,EAAO4F,UAAUC,iBAAmB,CACtEC,QAAU,aACVC,QAAO,EACPvB,YAAW,EACX9C,aAAY,GCZN,MAAMsE,EAAoB,aACpBC,EAAoC,8BACpCC,EAAY,oBAiBZC,GAfU,IAAIxC,IAAItD,UAeN,CACxB+F,YAd0B,CAC1B,YAAc,YACd,UAAc,YACd,QAAY,WACZ,QAAY,SACZ,eAAmB,SACnB,eAAmB,iBACnB,kBAAqB,oBACrB,oBAAwB,WACxB,kBAAqB,wBACrB,UAAc,iBAMfrG,OAAOsG,WAAaF,ECtBpB,MAAMG,EAAUvG,OAAOwG,aCOjBC,EAAsB,eAE5B,IAEIC,EACAC,EACAC,EAJAC,GAAa,EACbC,EAAe,CAAC,EAKpB,MAAMC,EAAY,CAACC,EAAW,IACzBA,GAAYC,KAAKC,MAXV,OAWyB,EAM/BC,EAAS1E,UAEd,IAAIiD,QAAiBtF,MAAM,IAAIwD,IFrBN,qBEqBsBtD,WAC/C,GAAuB,KAAnBoF,EAAS0B,OAAe,OAAO,EACnC,GAAuB,KAAnB1B,EAAS0B,OAAe,OAAO,KDvBV,IAACC,EAAKzL,ECyB/B8J,QAAiBA,EAASE,ODzBAyB,EC0BfZ,ED1BoB7K,EC0BC8J,EDzBhCa,EAAQe,QAAQD,EAAKE,KAAKC,UAAU,CAAE5L,UC2BtC,MAAM,OAAE6L,EAAM,YAAEC,EAAW,SAAEV,EAAQ,aAAEW,GAAiBjC,EAExD,OAAIqB,EAAUC,KAGdN,EAASe,EACTd,EAAce,EACdd,EAAWI,EACXF,EAAea,EAEfrB,WAAWmB,OAASf,EACpBJ,WAAWqB,aAAeb,EAE1Bc,KAEO,EAAI,EAGNC,EAAcpF,UACnB,MAAMoF,ED3CkB,CAACR,IACzB,MAAM,KAAEzL,EAAO,MAAS2L,KAAKO,MAAMvB,EAAQwB,QAAQV,IAAQ,MAC3D,OAAOzL,CAAI,ECyCSoM,CAAUvB,GAC9B,IAAKoB,EACJ,OAAO,EAER,MAAM,OAAEJ,EAAM,YAAEC,EAAW,SAAEV,GAAaa,EAE1C,GAAId,EAAUC,GAEb,OD9C0BK,EC6CdZ,ED5CbF,EAAQ0B,WAAWZ,IC6CX,ED9CkB,IAACA,ECiD3B,MAAMrG,EAAM,IAAI4C,IAAIuC,EAAW7F,UACzB4H,EAASlH,EAAImH,aACnBD,EAAOnM,IAAI,SAAU,MACrBmM,EAAOnM,IAAI,eAAgB2L,GAC3BQ,EAAOnM,IAAI,aAAc0L,EAAOW,IAChCF,EAAOnM,IAAI,aAAciL,EAAWC,KAAKC,aAEnC9G,MAAMY,EAAI,EAGX4G,EAAgC,KACrC,MAAMS,EAAazB,GAAYK,KAAKC,MApEtB,KAsEdlJ,YAAWyE,gBACJ0E,GAAQ,GACZkB,EAAW,EAGF1C,EAAQlD,UACpB,IAAKoE,EAAY,CAEhB,SADMgB,WACKV,IAEV,OADA7G,SAASgI,KAAO,IAAI1E,IAAIuC,EAAW7F,UAAUO,YACtC,EAGRgG,GAAa,CACd,CAEA,OAAOH,CAAM,EAYDiB,EAAe,IACpBb,EC/ER,EAAQ3F,eAAe,IAnBR,cAA8BsD,EAC5C,WAAAhE,GACC0E,OACD,CAEA,cAAM5D,CAAS3F,GACd,OAAO0E,SAASC,QAAU3E,EAAKmG,SAASxB,MACzC,CAEA,cAAMiB,CAAS5F,GACd,MAAMgJ,EDgGA+B,EC3FN,OAJI/B,IACHhJ,EAAKsG,QAAQU,QAAUhH,EAAKsG,QAAQU,SAAW,CAAC,EAChDhH,EAAKsG,QAAQU,QAAuB,cAAI,UAAUgC,KAE5ChJ,CACR,ICrBD,MASA,EATwB,WACvB,MAAM2M,EAAOhL,MAAMC,KAAK4F,WAClBgC,EAAOmD,EAAK3G,QAClB,KAAM2G,EAAK1O,OAAS,GAAE,CACJ0O,EAAK3G,OACtB4G,CAASpD,EACV,CACD,ECPM,EAAQ,CACbqD,OACsB,oBAAXzI,OAA+BA,YACpB,IAAX,EAAAJ,EAA+B,EAAAA,EACtB,oBAATM,KAA6BA,KAChC,CAAC,EAETwI,UAAY,SAASrF,EAAOsF,GAI3B,OAHwB,IAArBvF,UAAUvJ,aAA+C,IAAxB,EAAM4O,OAAOpF,KAChD,EAAMoF,OAAOpF,GAASsF,GAEhB,EAAMF,OAAOpF,EACrB,GAGD,ICbMuF,EAAiB,EAAMF,UAAU,8BAA+B,CAAC,GAgBvE,EAfiB,SAASrF,EAAOwF,GAChC,OAAO,SAASC,GACf,IAAIC,EAAaH,EAAeE,EAAME,MAClCD,IACHA,EAAaH,EAAeE,EAAME,MAAQ,CAAC,GAExCD,EAAW1F,GAKdiB,QAAQ2E,KAAK,iCAAoC5F,EAAQ,OAJzD0F,EAAW1F,IAAS,EACpBwF,EAAWC,EAAMpP,WAInB,CACD,ECbMwP,EAAU,EAAS,gBAAiBC,IACzC,MAAMC,EAAe,kBACfC,EAAuBC,IACvBA,EAAQC,uBAAsBD,EAAQC,qBAAuB,IAAIzN,KAE/DwN,EAAQC,sBASVC,EAAgB,CAACF,EAAS1N,EAAM6N,KACrC,MAAM,QAAEC,EAAO,OAAEC,EAAM,OAAEC,EAAM,OAAEC,GAAWjO,EACtCkO,EAAUH,EAAOG,QACvB,GAAIL,EAAY,CACfA,EAAmC,iBAAfA,EAA0BA,EAAWrM,MAAMgM,GAAgBK,EAC/E,IAAK,IAAI9M,KAAS8M,EAAY,CAC7B,MAAMM,EAAQH,EAAOI,QAAQrN,GACzBoN,GAAS,IACZT,EAAQW,oBAAoBtN,EAAO+M,EAASI,GAC5CF,EAAOM,OAAOH,EAAO,IAED,GAAjBH,EAAO/P,QAAawP,EAAoBC,GAASrN,OAAO4N,EAC7D,CACD,KAAO,CACN,IAAK,IAAIlN,KAASiN,EACjBN,EAAQW,oBAAoBtN,EAAO+M,EAASI,GAE7CT,EAAoBC,GAASrN,OAAO4N,EACrC,GAGDV,EAAUzM,GAAK,WACd,GAAI0G,UAAUvJ,OAAS,EAAG,MAAM,IAAIyH,MAAM,uBAE1C,MAAMiH,EAAOhL,MAAMC,KAAK4F,WACxB,IAAIwG,EAA4B,iBAAZrB,EAAK,GAAkBA,EAAK3G,QAAQxE,MAAMgM,GAAgBb,EAAK3G,QACnF,MAAMnH,EAA4B,iBAAZ8N,EAAK,GAAkBA,EAAK3G,QAAU,KACtDiI,EAAStB,EAAK3G,QACd+H,OAA4B,IAAZpB,EAAK,GAAqB,CAAEuB,SAAS,EAAOK,MAAM,EAAOC,SAAS,GAA6B,kBAAZ7B,EAAK,GAAmB,CAAEuB,QAASvB,EAAK3G,QAASuI,MAAM,EAAOC,SAAS,GAAU7B,EAAK3G,QACzL8H,EAAU,SAAU/M,GACzB,GAAIlC,EAAQ,CACX,MAAMC,EAASiC,EAAMjC,OACrB,GAAyB,mBAAdA,EAAOyB,KAAsBzB,EAAOyB,GAAG1B,GAAS,MAC5D,CACA,MAAM2B,EAASyN,EAAOQ,MAAM,KAAMjH,WAElC,OADIuG,EAAOQ,MAAMX,EAAc5P,KAAM8P,GAC9BtN,CACR,EAEAiN,EAAoBzP,MAAMmC,IAAI8N,EAAQ,CAAEA,SAAQH,QAASA,EAASE,SAAQD,WAE1E,IAAK,IAAIhN,KAASiN,EACjBhQ,KAAK0Q,iBAAiB3N,EAAO+M,EAASC,GAGvC,OAAO/P,IACR,EAEAuP,EAAUoB,SAAW,SAAUV,EAAQlN,EAAOmN,GAC7C,MAAMlO,EAAOyN,EAAoBzP,MAAMiC,IAAIgO,GAI3C,OAHIjO,EAAM4N,EAAc5P,KAAMgC,EAAMe,GAC/B/C,KAAKqQ,oBAAoBJ,EAAQlN,EAAOmN,GAEtClQ,IACR,EAEAuP,EAAUqB,QAAU,WACnB,MAAMjC,EAAOhL,MAAMC,KAAK4F,WAClBmC,EAA6B,iBAAZgD,EAAK,GAAkBA,EAAK3G,SAAW,EAC9D,GAAI2D,GAAW,EAAG,CACjB,MAAMH,EAAOmD,EAAK,GACZkC,IAnEoBnB,EAmEU1P,MAlExB8Q,6BAA4BpB,EAAQoB,2BAA6B,CAAC,GAExEpB,EAAQoB,4BAiERC,EAAYF,EAASrF,GACvBuF,GAAW5M,aAAa4M,GAE5BF,EAASrF,GAAQpH,YAAW,YACpByM,EAASrF,GAChBxL,KAAK4Q,QAAQH,MAAMzQ,KAAM2O,EAAK,GAC5BhD,EACJ,KAAO,CACN,MAAMH,EAAOmD,EAAK3G,QACZgJ,EAAWrC,EAAK,aAAcsC,MAAQtC,EAAK3G,QAAU,KACrDhG,EAAO2M,EAAK1O,QAAU,EAAoB,GAAf0O,EAAK1O,OAAc0O,EAAK3G,QAAU2G,EAAQqC,EACrEjO,EAAQf,EAAO,IAAIkP,YAAY1F,EAAM,CAAE2F,SAAS,EAAMC,YAAY,EAAMC,UAAU,EAAMC,OAAQtP,IAAU,IAAIiP,MAAMzF,EAAM,CAAE2F,SAAS,EAAMC,YAAY,EAAMC,UAAU,IAEzKL,IAAUjO,EAAMwO,eAAiBP,GACrChR,KAAKwR,cAAczO,EACpB,CAnF0B,IAAC2M,EAoF3B,OAAO1P,IACR,CAAC,IC7FF,EAAgByR,YD+FhB,GEjGA,MAuBA,EAvBgB,EAAS,eAAelC,IACvCA,EAAUvN,KAAO,WAChB,MAAMA,EAAO,CAAC,EACd,QAA4B,IAAjBhC,KAAK0R,QACf,IAAKtC,QAAQpP,KAAK0R,QACjB1P,EAAKoN,MAAQpP,KAAK0R,QAAQtC,MAe5B,OAbApP,KAAKgC,KAAO,WACX,OAAwB,GAApBwH,UAAUvJ,OACN+B,EACqB,GAApBwH,UAAUvJ,OACX+B,EAAKwH,UAAU,UACU,IAAjBA,UAAU,IAAsC,MAAhBA,UAAU,UAClDxH,EAAKwH,UAAU,IAEtBxH,EAAKwH,UAAU,IAAMA,UAAU,GAEzBxJ,KACP,EAAEyK,KAAKzK,MAEDA,KAAKgC,KAAKyO,MAAM,KAAMjH,UAC9B,CAAC,ICnBI,EAAU,EAAS,uBAAuB+F,IAC/CA,EAAUjK,MAAQ,WACjB,IAAIqM,EAAQ3R,KAAK4R,WACjB,KAAsB,GAAhBD,EAAM1R,QACX0R,EAAM,GAAGE,QAAO,GAEjB,OAAO7R,IACR,EAEAuP,EAAU9L,QAAU,WACnB,OAAOzD,KAAK4R,UACb,EAEArC,EAAUuC,KAAO,WAChB,OAAuB,GAApBtI,UAAUvJ,OACLD,KAAK+R,UACe,GAApBvI,UAAUvJ,QAAuC,kBAAjBuJ,UAAU,GAC9CA,UAAU,GACLxJ,KAAKgS,UAELhS,KAAK+R,WAEbpO,MAAMC,KAAK4F,WAAW3H,SAAQ4B,IAC7BzD,KAAKsF,SACiB,iBAAZ7B,GAEFA,aAAmBwO,MAAQxO,aAAmByO,UAAYzO,aAAmB0O,iBADpFnS,KAAKuF,OAAO9B,EAGb,IAGKzD,KACR,EAEA,MAAMuF,EAAS,WACd,MAAMA,EAASgK,EAAU6C,YAAY3H,KAAKzK,MAC1C,IAAI,IAAIG,EAAI,EAAGA,EAAIqJ,UAAUvJ,OAAQE,IAAI,CACxC,IAAIkS,EAAM7I,UAAUrJ,GACjBkS,aAAeJ,KACjBjS,KAAKoS,YAAYC,GACK,iBAARA,EACdC,OAAOD,GAAKxQ,QAAQ0D,GACU,mBAAhB8M,EAAIxQ,SAClBwQ,EAAIxQ,QAAQ0D,EACd,CACD,EACAgK,EAAUhK,OAASA,EAEnB,MAAMgN,EAAU,SAASC,EAAeC,GACvCzS,KAAK0S,aAAaD,EAAUD,EAC7B,EACAjD,EAAUgD,QAAU,WACnB,GAA6B,GAA1BvS,KAAK4R,WAAW3R,OAClBsF,EAAOkL,MAAMzQ,KAAMwJ,eACf,CACJ,MAAMrI,EAAQnB,KAAK4R,WAAWzQ,QACxBwR,EAASJ,EAAQ9H,KAAKzK,KAAMmB,GAClC,IAAI,IAAIhB,EAAI,EAAGA,EAAIqJ,UAAUvJ,OAAQE,IAAI,CACxC,MAAMkS,EAAM7I,UAAUrJ,GACnBkS,aAAeJ,KACjBU,EAAON,IACe,iBAARA,GAEgB,mBAAhBA,EAAIxQ,UADlBwQ,EAAIxQ,QAAQ8Q,EAGd,CACD,CACD,EAEApD,EAAU/N,QAAU,WACnB,GAAGgI,UAAUvJ,OAAS,EACrB,MAAM,IAAIyH,MAAM,sDAEjB,MAAMkL,EAA6B,GAApBpJ,UAAUvJ,OAAcD,KAAK6S,WAAa7S,KACnD8S,EAA8B,GAApBtJ,UAAUvJ,OAAcD,KAAOwJ,UAAU,GACnDuJ,EAA8B,GAApBvJ,UAAUvJ,OAAcuJ,UAAU,GAAKA,UAAU,GAE9DuJ,aAAmBpP,OAASoP,aAAmBb,UAAYa,aAAmBZ,gBAChFY,EAAQlR,SAAQmR,GAASJ,EAAOF,aAAaM,EAAOF,KACpDA,EAAQjB,UAGRe,EAAOK,aAAaF,EAAQD,EAC9B,EAEAvD,EAAU2D,MAAQ,WACjB,GAAsB,MAAnBlT,KAAK6S,WACP,MAAM,IAAInL,MAAM,kEAEjB,MAAMkL,EAAS5S,KAAK6S,WACdM,EAAOnT,KAAKoT,YACfD,EACF5D,EAAU8D,OAAO5C,MAAM0C,EAAM3J,WAE7B+F,EAAUhK,OAAOkL,MAAMmC,EAAQpJ,UACjC,EAEA+F,EAAU8D,OAAS,WAClB,GAAsB,MAAnBrT,KAAK6S,WACP,MAAM,IAAInL,MAAM,kEAEjB,MAAMkL,EAAS5S,KAAK6S,WACdS,EAAYC,IAAUX,EAAOF,aAAaa,EAAMvT,KAAK,EAC3D,IAAI,IAAIG,EAAI,EAAGA,EAAIqJ,UAAUvJ,OAAQE,IAAI,CACxC,MAAMkS,EAAM7I,UAAUrJ,GACnBkS,aAAeJ,KACjBqB,EAASjB,IACa,iBAARA,GAEgB,mBAAhBA,EAAIxQ,UADlBwQ,EAAIxQ,QAAQyR,EAGd,CACD,CAAC,IAEF,ICjHA,EAAgBrB,KAAKuB,EAAYC,GCFjC,MAAMC,EAAiB,8BACjBC,EAAgB,SAAUlB,EAAUmB,GACzC,IAAIC,EAAQH,EAAeI,KAAKF,GAChC,IAAIC,EAaG,OAAOpB,EAASsB,iBAAiBH,GAb7B,CACV,IAAIpR,EAASiQ,EACb,GAAIoB,EAAM1D,MAAQ,IACjB3N,EAASiQ,EAASsB,iBAAiBH,EAAUI,OAAO,EAAGH,EAAM1D,QACxC,GAAjB3N,EAAOvC,QAAa,OAGzB,GADAuC,EAASA,EAAOoQ,OAAOiB,EAAM,IACzBrR,EAAQ,CACX,IAAIyR,EAAeL,EAAUI,OAAOH,EAAM1D,MAAQ0D,EAAM,GAAG5T,QAAQoB,OAGnE,OAFI4S,EAAahU,OAAS,IAAGuC,EAASA,EAAOtB,KAAK+S,IAE3CzR,CACR,CACD,CACD,EAEM,EAAU,EAAS,gBAAiB+M,IACzCA,EAAUrO,KAAO,WAChB,IAAIyQ,EAAQ,GACRhD,EAAOhL,MAAMC,KAAK4F,WAClB6I,EAAM1D,EAAK3G,QACf,KAAOqK,GAAK,CACX,GAAmB,iBAARA,EAAkB,CAC5B,IAAI7P,EAASmR,EAAc3T,KAAMqS,GAC7B7P,GAAQmP,EAAM9N,KAAKrB,EACxB,CAEA6P,EAAM1D,EAAK3G,OACZ,CAGA,OADakK,SAAStO,KAAK6M,MAAM,KAAMkB,EAExC,EAEApC,EAAUhN,GAAK,WACd,GAAIvC,gBAAgBkU,UAAYlU,gBAAgBmU,iBAAkB,OAAO,EACpE,GAAwB,GAApB3K,UAAUvJ,OAAa,CAC/B,GAA4B,iBAAjBuJ,UAAU,GAAiB,OAAOxJ,KAAKoU,QAAQ5K,UAAU,IAC/D,GAAmC,iBAAxBA,UAAU,GAAGvJ,OAAqB,CACjD,IAAIY,EAAS2I,UAAU,GACvB,IAAK,IAAIrJ,EAAI,EAAGA,EAAIU,EAAOZ,OAAQE,IAAK,GAAIH,KAAKoU,QAAQvT,EAAOV,IAAK,OAAO,CAC7E,CACD,MAAO,GAAIqJ,UAAUvJ,OAAS,EAAG,OAAOD,KAAKuC,GAAGoB,MAAMC,KAAK4F,YAE3D,OAAO,CACR,EAEA+F,EAAUqD,OAAS,SAAUyB,EAAUC,GACtC,IAAKtU,KAAK6S,WAAY,OAAO,KAC7ByB,EAAuC,kBAAbD,EAAyBA,EAAWC,EAC9DD,EAA+B,iBAAbA,EAAwBA,EAAW,KAErD,IAAIzB,EAAS5S,KAAK6S,WAGlB,GAFID,aAAkB2B,YAAcD,IAAkB1B,EAASA,EAAO4B,MAElEH,EAAU,CACb,IACC,KAAOzB,IAAWA,EAAOrQ,GAAG8R,IAAWzB,EAASA,EAAOA,OAAOyB,EAAUC,EACzE,CAAE,MAAOnO,GACRuE,QAAQC,MAAM,QAAS3K,KAAM,UAAW4S,EAAQ,SAAUzM,EAC3D,CACA,OAAOyM,CACR,CACA,OAAOA,CACR,EAEArD,EAAUkF,QAAU,WACnB,IAAIjS,EAAS,IAAImB,MACbiP,EAASrD,EAAUqD,OAAOnC,MAAMzQ,KAAMwJ,WAC1C,KAAOoJ,GACNpQ,EAAOqB,KAAK+O,GACZA,EAASrD,EAAUqD,OAAOnC,MAAMmC,EAAQpJ,WAGzC,OAAO0I,SAAStO,KAAKpB,EACtB,EAEA+M,EAAU8E,SAAW,WACpB,KAAIrU,gBAAgBkU,UAAYlU,gBAAgBmU,kBAAhD,CACK,GAAInU,KAAKwO,GAAI,MAAO,IAAMxO,KAAKwO,GAC/B,CACJ,IAAI6F,EAAWrU,KAAK0U,QAAQnT,cACxBqR,EAAS5S,KAAK4S,SAClB,GAAIA,EAAQ,CACX,IAAI+B,EAAkB/B,EAAO1R,KAAK,UAAYmT,GAC9C,GAAIM,aAA2BzC,SAAU,CACxC,IAAI/B,EAAQwE,EAAgBvE,QAAQpQ,MAChCmQ,EAAQ,IAAGkE,GAAY,eAAiBlE,EAAQ,GAAK,IAC1D,CACA,IAAIuD,EAAiBd,EAAOyB,WAC5B,OAAOX,EAAiBA,EAAiB,IAAMW,EAAWA,CAC3D,CACA,OAAOA,CACR,EACD,EAEA9E,EAAUqF,QAAU,SAAUC,GAC7B,OAAO7U,KAAK8U,SAASD,GAAQ1T,OAC9B,EAEAoO,EAAUuF,SAAW,SAAUD,GAC9B,MAAMrS,EAASxC,KAAKkB,KAAK2T,GACzB,GAAqB,GAAjBrS,EAAOvC,OAAa,OAAOuC,EAE/B,MAAMoQ,EAAS5S,KAAK+U,cACpB,OAAInC,EAAeA,EAAOkC,SAASD,GAE5B3C,SAAStO,KAAK,GACtB,EAEA2L,EAAUyF,OAAS,SAAUH,GAC5B,GAAI7U,KAAKuC,GAAGsS,GAAS,OAAO3C,SAAStO,KAAK5D,MAE1C,IAAIgV,EAAShV,KAAKkB,KAAK2T,GACvB,OAAIG,GAAUA,EAAO/U,OAAS,EAAU+U,EAC5B9C,SAAStO,KAAK5D,KAAK4S,OAAOiC,GACvC,CAAC,IAEF,ICzHM,EAAU,EAAS,oBAAoBtF,IAC5CA,EAAUvO,KAAO,WAChB,OAAwB,GAApBwI,UAAUvJ,OACND,KAAKiV,gBAAkB,MAC7B,MAAMzS,EAAS,CAAC,EAIhB,OAHAxC,KAAKkV,oBAAoBrT,SAAQuN,IAChC5M,EAAO4M,GAAQpP,KAAKmV,aAAa/F,EAAK,IAEhC5M,CACP,EAN6B,QAMvBoD,EACqB,GAApB4D,UAAUvJ,OACXD,KAAKmV,aAAa3L,UAAU,UACH,IAAjBA,UAAU,IAAsC,MAAhBA,UAAU,GACzDxJ,KAAKoV,gBAAgB5L,UAAU,IAE/BxJ,KAAKqV,aAAa7L,UAAU,GAAIA,UAAU,IAEpCxJ,KACR,CAAC,ICfF,EAAgBsV,QAAQC,EDiBxB,ECjBwD9B,GCHxD,MAAM,EAAU,EAAS,qBAAqBlE,IAC7CA,EAAUzH,MAAQ,SAAS0N,EAAWjF,GAKrC,OAJAvQ,KAAK8C,GAAG,QAAS0S,EAAWjF,GACF,YAAvBjQ,SAASmV,YACXzV,KAAK4Q,QAAQ,SAEP5Q,IACR,CAAC,ICLF,EAAgBkU,SAAUqB,EDQ1B,GCNAjV,SAASoQ,iBAAiB,oBAAoB,IAAMpQ,SAASsQ,QAAQ,WCFrE,EAAgBuD,iBAAkBoB,EAAc9B,GCFhD,MA4BA,EA5BgB,EAAS,oBAAoBlE,IAC5CA,EAAU5M,SAAW,WAMpB,OALuB,GAApB6G,UAAUvJ,OACZuJ,UAAU,GAAGhG,MAAM,OAAO3B,SAAQ6T,GAAS1V,KAAK2V,UAAUC,IAAIF,KACvDlM,UAAUvJ,OAAS,GAC1B0D,MAAM7D,UAAU+B,QAAQ8G,KAAKa,WAAUkM,GAAS1V,KAAK2V,UAAUC,IAAIF,KAE7D1V,IACR,EAEAuP,EAAU3M,YAAc,WAMvB,OALuB,GAApB4G,UAAUvJ,OACZuJ,UAAU,GAAGhG,MAAM,OAAO3B,SAAQ6T,GAAS1V,KAAK2V,UAAU9D,OAAO6D,KAC1DlM,UAAUvJ,OAAS,GAC1B0D,MAAM7D,UAAU+B,QAAQ8G,KAAKa,WAAWkM,GAAS1V,KAAK2V,UAAU9D,OAAO6D,KAEjE1V,IACR,EAEAuP,EAAUsG,YAAc,WAMvB,OALuB,GAApBrM,UAAUvJ,OACZuJ,UAAU,GAAGhG,MAAM,OAAO3B,SAAQ6T,GAAS1V,KAAK2V,UAAUG,OAAOJ,KAC1DlM,UAAUvJ,OAAS,GAC1B0D,MAAM7D,UAAU+B,QAAQ8G,KAAKa,WAAWkM,GAAS1V,KAAK2V,UAAUG,OAAOJ,KAEjE1V,IACR,CAAC,IC1BI+V,EAAY,OAEZC,EAAYtG,GACVA,EAAQuG,MAAMC,UAAYH,EAG5BI,EAAQzG,IACb,IAAIwG,EAAWF,EAAStG,GAAmC,GAAxBA,EAAQuG,MAAMC,QAYjD,OAVAxG,EAAQ0G,KAAO,WAEd,OADApW,KAAKiW,MAAMC,QAAUA,EACdlW,IACP,EAAEyK,KAAKiF,GAERA,EAAQ2G,KAAO,WAEd,OADArW,KAAKiW,MAAMC,QAAUH,EACd/V,IACP,EAAEyK,KAAKiF,GAEDA,CAAO,EAIT,EAAU,EAAS,mBAAmBH,IAC3CA,EAAU6G,KAAO,WAChB,OAAOD,EAAKnW,MAAMoW,KAAK3F,MAAM,KAAMjH,UACpC,EAEA+F,EAAU8G,KAAO,WAChB,OAAOF,EAAKnW,MAAMqW,KAAK5F,MAAM,KAAMjH,UACpC,EAEA+F,EAAU+G,WAAa,WACtB,OAAON,EAAShW,MAAQA,KAAKoW,OAASpW,KAAKqW,MAC5C,CAAC,IC/BF,EAAgBE,YAAaC,EDkC7B,GErCA,MAAMC,EAAa,CAClB,CACCpC,SAAW,SACXpS,IAAM,WACL,MAAMO,EAAS,GAKf,OAJAxC,KAAKkB,KAAK,UAAUW,SAAQkO,IACxBA,EAAO2G,UACTlU,EAAOqB,KAAKkM,EAAOzN,MAAM,IAEpBE,CACR,EACAL,IAAM,WACL,IAAIoB,EAAS,GACb,MAAMoL,EAAOhL,MAAMC,KAAK4F,WACxB,IAAI6I,EAAM1D,EAAK3G,QACf,KAAMqK,GACF1O,MAAMgT,QAAQtE,GAChB9O,EAASA,EAAOqT,OAAOvE,GAEvB9O,EAAOM,KAAKwO,GAEbA,EAAM1D,EAAK3G,QAEZhI,KAAKsC,MAAQiB,EACbvD,KAAKkB,KAAK,UAAUW,SAAQkO,GAAUA,EAAO2G,SAAWnT,EAAO6M,QAAQL,EAAOzN,QAAU,IACxFtC,KAAK4Q,QAAQ,UACd,GAED,CACCyD,SAAW,8CACXpS,IAAM,WACL,MAAiB,MAAdjC,KAAKsC,OAA+B,OAAdtC,KAAKsC,MACtBtC,KAAK6W,QACL7W,KAAK6W,QACL7W,KAAKsC,WADR,CAEN,EACAH,IAAM,SAASuH,GACO,kBAAXA,EACT1J,KAAK6W,QAAUnN,EACU,iBAAXA,EACd1J,KAAK6W,QAAU7W,KAAKsC,OAASoH,EACtB/F,MAAMgT,QAAQjN,KACrB1J,KAAK6W,QAAUnN,EAAO0G,QAAQpQ,KAAKsC,QAAU,GAE9CtC,KAAK4Q,QAAQ,UACd,IAIIkG,EAAmB,CACvB7U,IAAM,WACL,OAAOjC,KAAKsC,KACb,EACAH,IAAM,SAASuH,GACd1J,KAAKsC,MAAQoH,EACb1J,KAAK4Q,QAAQ,QACd,GAsBF,EAXgB,EAAS,gBAAgBrB,IACxCA,EAAUwH,IAAM,WACf,IAAIvL,EAVe,SAASiH,GAC7B,IAAI,IAAItS,EAAI,EAAGA,EAAIsW,EAAWxW,OAAQE,IACrC,GAAGsS,EAASlQ,GAAGkU,EAAWtW,GAAGkU,UAC5B,OAAOoC,EAAWtW,GACpB,OAAO2W,CACR,CAKaE,CAAahX,MACxB,OAAuB,GAApBwJ,UAAUvJ,OACLuL,EAAKvJ,IAAIwO,MAAMzQ,KAAMwJ,YAE5BgC,EAAKrJ,IAAIsO,MAAMzQ,KAAMwJ,WAEfxJ,KACR,CAAC,IC1EF,EAAgBiX,iBAAiBC,GCAjC,EAAgBC,oBAAoB,EAAS,gBAAgB5H,IAC5DA,EAAUwH,IAAM,WACf,OAAuB,GAApBvN,UAAUvJ,OACLD,KAAKsC,OAEZtC,KAAKsC,MAAQkH,UAAU,GAEjBxJ,KACR,CAAC,KCRF,EAAgBoX,kBAAkBF,GCJlC,MAgBA,EAhByB,WACxB,MAAMvI,EAAOhL,MAAMC,KAAK4F,WAClB6N,EAAW1I,EAAK3G,QAChBsP,EAAS3I,EAAK3G,QACpB2G,EAAK9M,SAASf,IACbmI,OAAOC,oBAAoBpI,GAC1Be,SAAQuN,IACR,MAAMmI,EAAOtO,OAAOuO,yBAAyB1W,EAAQsO,QACzB,IAAjBkI,EAAOlI,IAA+C,mBAAfmI,EAAKjV,QACtDgV,EAAOlI,GAAQ,WACd,OAAOiI,EAAS1O,KAAK3I,KAAMoP,EAAM5F,UAClC,EAAC,GACD,GAGJ,ECkBA,EA/BgB,EAAS,eAAe+F,IACvCA,EAAUa,QAAU,WACnB,IAAI,IAAIjQ,EAAI,EAAGA,EAAIH,KAAKC,OAAQE,IAC/B,GAAGH,KAAKG,IAAMqJ,UAAU,GACvB,OAAOrJ,EAET,OAAQ,CACT,EAEAoP,EAAU1N,QAAU,WACnB,OAAO8B,MAAM7D,UAAU+B,QAAQ4O,MAAM9M,MAAMC,KAAK5D,MAAOwJ,UACxD,EAEA+F,EAAUzL,IAAM,WACf,OAAOH,MAAM7D,UAAUgE,IAAI2M,MAAM9M,MAAMC,KAAK5D,MAAOwJ,UACpD,EAEA+F,EAAU1O,OAAS,WAClB,OAAO8C,MAAM7D,UAAUe,OAAO4P,MAAM9M,MAAMC,KAAK5D,MAAOwJ,UACvD,EAEA+F,EAAUpO,MAAQ,WACjB,GAAGnB,KAAKC,OAAS,EAChB,OAAOD,KAAK,EACd,EAEAuP,EAAUkI,KAAO,WAChB,GAAGzX,KAAKC,OAAS,EAChB,OAAOD,KAAKA,KAAKC,OAAS,EAC5B,CAAC,IC3BF,EAAgBiS,SAAUwF,GAE1BxF,SAASpS,UAAU6X,QAAU,WAC5B,MAAMhJ,EAAOhL,MAAMC,KAAK4F,WAClBoO,EAAUjJ,EAAK3G,QACf6P,EAAgC,mBAAZD,EACpBE,EAAU,GAChB,IAAI,IAAI3X,EAAI,EAAGA,EAAIH,KAAKC,OAAQE,IAAI,CACnC,MAAMoT,EAAOvT,KAAKG,GAClB,IAAIqC,EACDqV,EACFrV,EAASoV,EAAQnH,MAAM,CAAC8C,GAAMqD,OAAOjI,IACL,mBAAlB4E,EAAKqE,KACnBpV,EAAS+Q,EAAKqE,GAASnH,MAAM8C,EAAM5E,IAEjCnM,GACFsV,EAAQjU,KAAKrB,EACf,CAEA,OAAOsV,CACR,EAEA5F,SAASpS,UAAUiX,IAAM,WACxB,GAAuB,GAApBvN,UAAUvJ,QACZ,GAAGD,KAAKC,OAAS,EAAE,CAClB,MAAMuC,EAAS,IAAIN,IAQnB,OAPAlC,KAAK6B,SAAQ0R,IACZ,GAAuB,mBAAbA,EAAKwD,IAAmB,CACnBxD,EAAKwD,OAElBvU,EAAOL,IAAKoR,EAAKnE,MAAQmE,EAAK/E,IAAM+E,EAAKc,WAAad,EAAKwD,MAC7D,KAEMvU,CACR,OAGA0P,SAASpS,UAAU6X,QAAQlH,MAAMzQ,KAAM,CAAC,OAAO4W,OAAOjT,MAAMC,KAAK4F,YACnE,EAEA0I,SAAStO,KAAO,WACf,MAAM+K,EAAOhL,MAAMC,KAAK4F,WAClBxH,EAAO,CAAC,EACd,IAAI+V,EAAU,EAEd,KAAMpJ,EAAK1O,OAAS,GAAE,CACrB,MAAMoS,EAAM1D,EAAK3G,QACjB,QAAkB,IAARqK,GAA8B,MAAPA,EAChC,GAAGA,aAAeJ,KACjBjQ,EAAK+V,KAAa,CAACzV,MAAO+P,EAAK2F,YAAY,QACvC,GAAG3F,aAAeH,UAAYG,aAAeF,gBAAkBE,aAAe1O,MAClF,IAAI,IAAIxD,EAAI,EAAGA,EAAIkS,EAAIpS,OAAQE,IAC3BkS,EAAIlS,IAAMkS,EAAIlS,aAAc8R,OAC9BjQ,EAAK+V,KAAa,CAACzV,MAAO+P,EAAIlS,GAAI6X,YAAY,GAKnD,CAGA,OADAhW,EAAK/B,OAAS,CAACqC,MAAOyV,GACd9O,OAAOqJ,OAAOJ,SAASpS,UAAWkC,EAC3C,EAGA,GAAiB,SAASiW,EAAeC,GACxC,IAAIJ,EAAU,GAad,OAZA9X,KAAK6B,SAAQ0R,IACZ,GAAGA,GAAuC,mBAAxBA,EAAK0E,GAA8B,CACpD,MAAMzV,EAAS+Q,EAAK0E,GAAexH,MAAM8C,EAAM2E,GAC5C1V,IACCA,aAAkB0P,SACpB4F,EAAUA,EAAQlB,OAAOjT,MAAMC,KAAKpB,IAEpCsV,EAAQjU,KAAKrB,GAEhB,KAGqB,IAAnBsV,EAAQ7X,YACV,EACO6X,EAAQ,aAAc7F,MAAQ6F,EAAQ,aAAc5F,SACpDA,SAAStO,KAAKkU,GAEdA,CACT,GAAE5F,SAASpS,UAAWmS,KAAKnS,UAAWyW,YAAYzW,UAAWmX,iBAAiBnX,UAAWwV,QAAQxV,UAAW2R,YAAY3R,WCrFxH,EAAgBqS,eAAgBuF,GAEhCvF,eAAerS,UAAU6X,QAAU,WAClC,MAAMhJ,EAAOhL,MAAMC,KAAK4F,WAClBoO,EAAUjJ,EAAK3G,QACf6P,EAAgC,mBAAZD,EACpBE,EAAU,GAChB,IAAI,IAAI3X,EAAI,EAAGA,EAAIH,KAAKC,OAAQE,IAAI,CACnC,MAAMoT,EAAOvT,KAAKG,GAClB,IAAIqC,EACDqV,EACFrV,EAASoV,EAAQnH,MAAM,CAAC8C,GAAMqD,OAAOjI,IACL,mBAAlB4E,EAAKqE,KACnBpV,EAAS+Q,EAAKqE,GAASnH,MAAM8C,EAAM5E,IAEjCnM,GACFsV,EAAQjU,KAAKrB,EACf,CAEA,OAAOsV,CACR,EAEA3F,eAAerS,UAAUiX,IAAM,WAC9B,GAAuB,GAApBvN,UAAUvJ,QACZ,GAAGD,KAAKC,OAAS,EAAE,CAClB,MAAMuC,EAAS,IAAIN,IAQnB,OAPAlC,KAAK6B,SAAQ0R,IACZ,GAAuB,mBAAbA,EAAKwD,IAAmB,CACnBxD,EAAKwD,OAElBvU,EAAOL,IAAKoR,EAAKnE,MAAQmE,EAAK/E,IAAM+E,EAAKc,WAAad,EAAKwD,MAC7D,KAEMvU,CACR,OAGA2P,eAAerS,UAAU6X,QAAQlH,MAAMzQ,KAAM,CAAC,OAAO4W,OAAOjT,MAAMC,KAAK4F,YACzE,EAEA2I,eAAevO,KAAO,WACrB,MAAM+K,EAAOhL,MAAMC,KAAK4F,WAClBxH,EAAO,CAAC,EACd,IAAI+V,EAAU,EAEd,KAAMpJ,EAAK1O,OAAS,GAAE,CACrB,MAAMoS,EAAM1D,EAAK3G,QACjB,QAAkB,IAARqK,GAA8B,MAAPA,EAChC,GAAGA,aAAekE,YACjBvU,EAAK+V,KAAa,CAACzV,MAAO+P,EAAK2F,YAAY,QACvC,GAAG3F,aAAeF,gBAAkBE,aAAeH,UAAYG,aAAe1O,MAClF,IAAI,IAAIxD,EAAI,EAAGA,EAAIkS,EAAIpS,OAAQE,IAC3BkS,EAAIlS,IAAMkS,EAAIlS,aAAcoW,cAC9BvU,EAAK+V,KAAa,CAACzV,MAAO+P,EAAIlS,GAAI6X,YAAY,GAKnD,CAGA,OADAhW,EAAK/B,OAAS,CAACqC,MAAOyV,GACd9O,OAAOqJ,OAAOH,eAAerS,UAAWkC,EACjD,EAGA,GAAiB,SAASiW,EAAeC,GACxC,IAAIJ,EAAU,GAad,OAZA9X,KAAK6B,SAAQ0R,IACZ,GAAGA,GAAuC,mBAAxBA,EAAK0E,GAA8B,CACpD,IAAIzV,EAAS+Q,EAAK0E,GAAexH,MAAM8C,EAAM2E,GAC1C1V,IACCA,aAAkB2P,eACpB2F,EAAUA,EAAQlB,OAAOjT,MAAMC,KAAKpB,IAEpCsV,EAAQjU,KAAKrB,GAEhB,KAGqB,IAAnBsV,EAAQ7X,YACV,EACO6X,EAAQ,aAAcvB,aAAeuB,EAAQ,aAAc3F,eAC3DA,eAAevO,KAAK6M,MAAM,KAAMqH,GAEhCA,CACT,GAAE3F,eAAerS,UAAWmS,KAAKnS,UAAWyW,YAAYzW,UAAWmX,iBAAiBnX,UAAWwV,QAAQxV,UAAW2R,YAAY3R,WCvF9H,EAAM+O,OAAO5C,UAAY,EAAM4C,OAAO5C,WAAa,CAAC,EACpD,EAAM4C,OAAO5C,UAAUkM,OAAS,EAAMtJ,OAAO5C,UAAUkM,QAAU,CAChEhM,QAAU,aACViM,MAAQ,CACPC,MAAO,IAIT,EAAMxJ,OAAO3N,KAAO,WACnB,OAAOZ,SAASY,KAAKuP,MAAMnQ,SAAUkJ,UACtC,EAEA,EAAMqF,OAAO/G,MAAQ,WACpB,OAAOxH,SAASwH,MAAM2I,MAAMnQ,SAAUkJ,UACvC,EAEA,EAAMqF,OAAOyD,OAAS,SAASgG,EAAUC,GACxC,GAA4B,iBAAjB/O,UAAU,GACpB,MAAM,IAAI9B,MAAM,wCAEjB,MAAM8Q,EAAWlY,SAASmY,cAAc,YAExC,OADAD,EAASzG,UAAYuG,EAClBC,EACKC,EAEDlY,SAASoY,WAAWF,EAAS/U,SAAS,GAAMmO,UACpD,EAEA,EAAM/C,OAAO8J,OAAS,SAASC,EAAOC,GACrC,OAAGD,aAAiBjV,MACZ2D,QAAQwR,IAAIF,EAAM9U,KAAIiV,GAAQ,EAAMlK,OAAO8J,OAAOI,EAAMF,MAE5C,iBAAVD,EACF,IAAItR,SAAQ,CAAC0R,EAAE7S,KACrB,MAAMwS,EAASrY,SAASmY,cAAc,UACtCE,EAAO9P,OAAQ,EACf8P,EAAOM,OAAS,WAAWD,GAAG,EAC9BL,EAAOO,QAAU,WAAW,MAAM,IAAIxR,MAAM,cAAc,EACzDmR,EAAyCA,EAAQtT,OAAOoT,GAA9CrY,SAASC,KAAKgF,OAAOoT,GAChCA,EAAOQ,IAAMP,CAAK,IAGZtR,QAAQ8R,OAAO,2DACxB,EC7Ce,MAAMC,EACpB,WAAAxS,CAAY4G,EAAK6L,GAChBtZ,KAAKyN,IAAMA,EACXzN,KAAKsZ,QAAUA,CAChB,CAEA,cAAIC,GACH,OAAOvZ,KAAKyN,OAAOzN,KAAKsZ,OACzB,CAEA,YAAIE,GACH,QAASxZ,KAAKsZ,QAAQtZ,KAAKyN,IAC5B,CAEA,SAAInL,GACH,OAAOtC,KAAKsZ,QAAQtZ,KAAKyN,IAC1B,CAEA,SAAInL,CAAMN,GACThC,KAAKsZ,QAAQtZ,KAAKyN,KAAOzL,CAC1B,CAEA,UAAIuD,CAAOvD,GACV,GAAIhC,KAAKwZ,SAEJ,CACJ,MAAMlX,EAAQtC,KAAKsC,MAChBA,aAAiBqB,MACnBrB,EAAMuB,KAAK7B,GAEXhC,KAAKsC,MAAQ,CAACtC,KAAKsC,MAAON,EAC5B,MAPChC,KAAKsC,MAAQN,CAQf,CAEA,MAAA6P,UACQ7R,KAAKsZ,QAAQtZ,KAAKyN,IAC1B,CAEA,WAAOgM,CAAKzX,EAAMyL,EAAK6E,GAAO,GAC7B,IAAIgH,EAAUtX,EACd,MAAM0X,EAAOjM,EAAIjK,MAAM,KACvB,IAAI4L,EAAOsK,EAAK1R,QAAQ3G,OACxB,KAAMqY,EAAKzZ,OAAS,GAAE,CACrB,IAAIqZ,EAAQlK,GAAM,CACjB,IAAIkD,EACH,OAAO,KAERgH,EAAQlK,GAAQ,CAAC,CAClB,CAEAkK,EAAUA,EAAQlK,GAClBA,EAAOsK,EAAK1R,QAAQ3G,MACrB,CAEA,OAAO,IAAIgY,EAAejK,EAAMkK,EACjC,ECrDD,MAyDaK,EAAqBC,GAChB,MAAVA,QAAoC,IAAXA,EAGpBC,GAAeD,IAC3B,GAAc,MAAVA,EAAgB,OAAO,EAG3B,cADoBA,GAEnB,IAAK,SACL,IAAK,SACL,IAAK,UACL,IAAK,SACL,IAAK,YACJ,OAAO,EAGT,OAAO,CAAK,EAGAE,GAAYF,IACrBD,EAAkBC,KAGI,iBAAXA,KAAyBA,EAAO/S,aAA2C,WAA5B+S,EAAO/S,YAAYuI,OAMpE2K,GAAY,CAAC9U,EAAGC,KAC5B,MAAM8U,EAAQL,EAAkB1U,GAC1BgV,EAAQN,EAAkBzU,GAChC,GAAI8U,GAASC,EAAO,OAAOhV,IAAMC,EAEjC,GAAI2U,GAAY5U,IAAM4U,GAAY3U,GAAI,OAAOD,IAAMC,EAEnD,MAAMgV,SAAejV,EAErB,OAAIiV,UADiBhV,IAEP,aAAVgV,EAA6BjV,IAAMC,EAtDpB,EAACD,EAAGC,KACvB,MAAMiV,EAAclR,OAAOyQ,KAAKzU,GAC1BmV,EAAcnR,OAAOyQ,KAAKxU,GAEhC,GAAIiV,EAAYla,SAAWma,EAAYna,OAAQ,OAAO,EACtD,IAAK,MAAMwN,KAAO0M,EAAa,CAC9B,MAAMhV,EAASF,EAAEwI,GACXrI,EAASF,EAAEuI,GAEjB,IAAKsM,GAAU5U,EAAQC,GAAS,OAAO,CACxC,CACA,OAAO,CAAI,EAgDJiV,CAAYpV,EAAGC,IA/EF,EAACD,EAAGC,KACxB,MAAMoV,EAASrR,OAAOsR,eAAetV,GAC/BuV,EAASvR,OAAOsR,eAAerV,GACrC,GAAIoV,GAAUE,EAAQ,OAAO,EAE7B,IAAKF,EAAQ,OAAO,EAEpB,MAAMH,EAAclR,OAAOC,oBAAoBoR,GACzCF,EAAcnR,OAAOC,oBAAoBsR,GAE/C,GAAIL,EAAYla,SAAWma,EAAYna,OAAQ,OAAO,EACtD,IAAK,MAAMwN,KAAO0M,EAAa,CAC9B,MAAMhV,EAASF,EAAEwI,GACXrI,EAASF,EAAEuI,GAEjB,IAAKsM,GAAU5U,EAAQC,GAAS,OAAO,CACxC,CACA,OAAO,CAAI,EA8DiBqV,CAAaxV,EAAGC,GAAE,EAUlCwV,GAAUd,IACtB,IAAKE,GAASF,GAAS,OAAO,EAE9B,IAAK,MAAMnM,KAAOmM,EAAQ,CAEzB,GAAqB,mBADPA,EAAOnM,GACY,OAAO,CACzC,CAEA,OAAO,CAAI,EA+BCkN,GAAQ,SAAU7Z,KAAW8Z,GACpC9Z,IAAQA,EAAS,CAAC,GAEvB,IAAK,IAAIwW,KAAUsD,EACdF,GAAOpD,IACVrO,OAAOC,oBAAoBoO,GAAQzV,SAAS4L,IACvCiN,GAAO5Z,EAAO2M,IAAOkN,GAAM7Z,EAAO2M,GAAM6J,EAAO7J,IAC9C3M,EAAO2M,GAAO6J,EAAO7J,EAAI,IAKjC,OAAO3M,CACR,EAQaD,GAAS,WACrB,MAAOmB,EAAM6Y,GAAY,KAAEC,GAAO,EAAK,UAAEC,GAAY,EAAI,QAAEtG,EAAU,IAAO,CAAC,GAAKjL,UAC5EhH,EAAS,CAAC,EAEhB,IAAK,IAAI4M,KAAQpN,EAAM,CACtB,MAAMM,EAAQN,EAAKoN,GACb4L,EAASH,EAAWzL,EAAM9M,EAAON,GACvC,IAAIgZ,GAAYF,GAAF,MAAUxY,GACnB,GAAI0Y,GAAUF,EAAM,CAEX,kBADOxY,GACKA,aAAiBqB,OAASrB,aAAiBJ,KAAOI,aAAiB2Y,KAAO3Y,aAAiB4Y,QAAUzG,EAAQhJ,SAASnJ,IAAUA,GAASN,EAAMQ,EAAO4M,GAAQ9M,EAClLE,EAAO4M,GAAQvO,GAAOyB,EAAOuY,EAAY,CAAEC,OAAMC,YAAWtG,QAASA,EAAQmC,OAAO5U,IAC1F,OALgEQ,EAAO4M,GAAQ9M,CAMhF,CAEA,OAAOE,CACR,EAEa2Y,GAAW,CAACC,EAAGhM,EAAM9M,KACjC2G,OAAOoS,eAAeD,EAAGhM,EAAM,CAC9B9M,QACAgZ,UAAU,EACVC,cAAc,EACdvD,YAAY,GACX,EAEUwD,GAAS,CAACJ,EAAGhM,EAAMnN,KAC/BgH,OAAOoS,eAAeD,EAAGhM,EAAM,CAC9BnN,MACAsZ,cAAc,EACdvD,YAAY,GACX,EAYH,IACC2B,oBACAG,YACAC,aACAW,UACAnV,OAxFqB,SAAUkW,EAAMvT,EAAOwT,GAC5C,QAAqB,IAAVxT,EAAuB,CAChBmR,EAAeI,KAAKiC,EAASD,GAAM,GAC3ClW,OAAS2C,CACnB,CACA,OAAOwT,CACR,EAmFCf,SACA9Z,UACA8a,oBAzD2B,UAAU,MAAEC,EAAK,QAAEC,IAC9C,MAAO,CAACzM,EAAM9M,EAAOgX,IACbsC,EAAMnQ,SAAS2D,KAAUyM,CAElC,EAsDCV,YACAK,UACAM,UApBwB,CAACV,EAAGhM,EAAMnN,EAAKE,KACvC8G,OAAOoS,eAAeD,EAAGhM,EAAM,CAC9BnN,MACAE,MACAoZ,cAAc,EACdvD,YAAY,GACX,GCtLU+D,GAAc,KACzB,IAAIC,EAAiB,KACjBC,EAAe,KAEnB,MAAMC,EAAU,IAAI5U,SAAQ,CAAC0R,EAAG7S,KAC/B6V,EAAiBhD,EACjBiD,EAAe9V,CAAC,IAGjB,IAEI7D,EAFA6Z,GAAW,EACXxR,GAAQ,EAgBZ,OAbAwQ,GAASe,EAAS,WAAY1Z,IAC7BF,EAAQE,EACR2Z,GAAW,EACP7Z,aAAiBoF,OACpBiD,GAAQ,EACRsR,EAAa3Z,IACP0Z,EAAe1Z,EAAM,IAG7BkZ,GAAOU,EAAS,SAAS,IAAM5Z,IAC/BkZ,GAAOU,EAAS,SAAS,IAAMvR,IAC/B6Q,GAAOU,EAAS,YAAY,IAAMC,IAE3BD,CAAO,ECxDHE,GAAqB,CAACC,EAAW9I,KAC7C,IAAI+I,EAAW,cACf,GAAmB,iBAAT/I,EACT+I,EAAW/I,OACP,GAAGA,aAAgBgD,YACvB+F,EAAW/I,EAAKgJ,aACZ,IAA4B,iBAAlBhJ,EAAKiJ,SAEf,MAAM,IAAI9U,aAAgB6L,EAAV,0CADpB+I,EAAW/I,EAAKiJ,QAC2D,CAE1E,MAAO,GAAGF,EAAS/a,iBAAiB8a,GAAW,EAIrCI,GAA2B,CAAClY,EAAWgP,IACzC6I,GAAmB,cAAiC7X,IAAagP,GCZtEmJ,GAAW,IAAI9b,QAkCf+b,GAAcC,GACZ,cAAwBA,EAE9B,GAASb,KACT,WAAAlV,EAAY,WAACgW,GAAa,EAAK,QAAEpZ,EAAU,KAAI,UAAEqZ,GAAY,EAAK,UAAEC,EAAY,MAAK,UAAEC,EAAY,IAAM,CAAC,GACzGzR,QAEGuR,GACF9c,KAAKgB,KAAK,KAAM8b,EAAUC,EAAWC,IAEnCH,GACF7c,KAAKid,aAAa,CAACC,KAAK,SAEtBzZ,GACFzD,KAAKmd,KAAK5X,OAA0B,mBAAZ9B,EAAyBA,EAAQzD,MAAQyD,EACnE,CAEA,QAAI0Z,GACH,OAAOnd,KAAK6c,YAAc7c,IAC3B,CAEA,SAAI8H,GACH,OAAO9H,MAAK,CACb,CAEA,UAAMmW,GAAQ,CAEd,aAAMiH,GACFpd,KAAK8H,MAAMqU,WACdnc,MAAK,EAAU+b,KAChB,CAEA,iBAAAsB,GACKrd,KAAKsd,eAAiBhd,UAAYN,KAAKud,aAlEjC,CAACC,IACb,IAAI7R,EAAU+Q,GAASza,IAAIub,GACvB7R,GAASxH,aAAawH,GAE1B+Q,GAASza,IAAIub,EAAWpZ,YAAWyE,UAClC6T,GAASra,OAAOmb,GAChB,UACOA,EAAUrH,OAChBqH,EAAU1V,MAAM2V,SACjB,CAAC,MAAMtX,GACNuE,QAAQC,MAAM,8BAA+B6S,EAAWrX,GACxDqX,EAAU1V,MAAM2V,QAAQtX,EACzB,CACAqX,EAAU5M,QAAQwL,GAAmB,aAAcoB,GAAW,GCjBrC,IDkBV,EAoD0C,CAAKxd,KAC9D,CAEA,eAAA0d,GACC1d,KAAKqd,mBACN,CAEA,wBAAAM,CAAyBvO,EAAMwO,EAAUC,GACpCD,GAAYC,GAAY7d,KAAKud,cAChCvd,KAAK4Q,QC9EqB,GD8EG6L,GAAyBrN,EAAMpP,OAC5DA,KAAK4Q,QC/EqB,GD+EGwL,GAAmB,SAAUpc,OAE5D,CAEA,oBAAA8d,GACC9d,KAAKod,SACN,GAIIW,GAAW,IAAI7b,IAER8b,GAAmBpB,IAC/B,IAAIlH,EAAQqI,GAAS9b,IAAI2a,GAMzB,OALY,MAATlH,IACFA,EAAQiH,GAAWC,GACnBmB,GAAS5b,IAAIya,EAAclH,IAGrBA,CAAK,EAOb,GAJkBsI,GAAgBzH,aEtGrB0H,GAAa,CAAC7O,EAAM8O,IACX,iBAAXA,EACFA,EAAS9O,EDJa,KCMLA,EAGb,GAAS,SAASsG,EAAOyI,GACrC,MAAM7B,EAAW5G,EAAM8G,SAClB4B,eAAenc,IAAIqa,IACvB8B,eAAeC,OAAO/B,EAAU5G,EAAOyI,EAEzC,ECHMG,GAAc,CAAC/K,EAAMgL,EAAOC,KAC9B,GAAGA,EAAMjL,GACL,MAAO,CAACA,OAAMgL,SAElB,IAAI/b,EAAS,KACb,IAAI,IAAIic,KAASlL,EAAK3B,WAAW,CAC7B,MAAM9P,EAAOwc,GAAYG,EAAOF,EAAQ,EAAGC,GAEhC,MAAR1c,IAA2B,MAAVU,GAAkBA,EAAO+b,MAAQzc,EAAKyc,SACtD/b,EAASV,EACjB,CAEA,OAAOU,CAAM,EAGJkc,GAAqB,CAACnL,EAAMiL,KACrC,MAAM5J,EAAU0J,GAAY/K,EAAM,EAAGiL,GACrC,OAAkB,MAAX5J,EAAkBA,EAAQrB,KAAO,IAAI,EC5B1CoL,GAAqB,IAAI/d,QAClBge,GAAgBC,IAC5B,GAAGF,GAAmBG,IAAID,GACzB,OAAOF,GAAmB1c,IAAI4c,GAE/B,MAAM7c,EAAO,CAAC,EAEd,OADA2c,GAAmBxc,IAAI0c,EAAK7c,GACrBA,CAAI,EAGC+c,GAAkB,SAASF,EAAKzP,EAAM9M,GAClD,MAAMN,EAAO4c,GAAaC,GAC1B,GAAwB,IAArBrV,UAAUvJ,OACZ,OAAO+B,EACH,GAAwB,IAArBwH,UAAUvJ,OACjB,OAAO+B,EAAKoN,GACR,GAAwB,IAArB5F,UAAUvJ,OAGjB,MAAM,IAAIyH,MAAM,kCAFhB1F,EAAKoN,GAAQ9M,CAGf,EAEa0c,GAA2BC,GAChC,SAAS3Y,EAAMhE,GACrB,GAAuB,GAApBkH,UAAUvJ,OAGZ,OAAO8e,GAAgBzY,EAAM2Y,GAF7BF,GAAgBzY,EAAM2Y,EAAS3c,EAGjC,EC3BD,GAAe2b,GAAW,SCAbiB,GAAa,GAAG,UAChBC,GAAc,GAAG,WACjBC,GAAiB,GAAG,cACpBC,GAAmB,GAAG,gBCHnC,GAAepB,GAAW,cCAbqB,GAAiB,GAAW,YCMzC,QANsB,IAAX,EAAAtZ,EAA+B,EAAAA,EACpB,oBAAXI,OAA+BA,OACtB,oBAATE,KAA6BA,KAChC,CAAC,ECJM,MAAMiZ,GACpB,WAAA1Y,CAAYvE,GACXtC,KAAKwZ,SAA+B,GAApBhQ,UAAUvJ,OAC1BD,KAAKsC,MAAQA,CACd,ECOD,MAAMkd,GACL,WAAA3Y,CAAY7E,EAAMyd,GACjBzf,KAAKgC,KAAOA,EACZhC,KAAKyf,SAAWA,EAChBzf,KAAK0f,MAAQ,IAAIxd,GAClB,CAEA,UAAAyd,CAAW3d,GACVhC,KAAKgC,KAAOA,EACZhC,KAAK0f,MAAQ,IAAIxd,GAClB,CAEA,UAAA0d,GACC5f,KAAK0f,MAAQ,IAAIxd,GAClB,CAEA,cAAA2d,CAAeC,EAAUC,GAAO,GAC/B,GAAI/f,KAAK0f,MAAMZ,IAAIgB,GAClB,OAAO9f,KAAK0f,MAAMzd,IAAI6d,GAEvB,IAAIE,EAAM,KACV,GAAIhgB,KAAKgC,MAAQ8d,KAAY9f,KAAKgC,KACjCge,EAAM,CAAEhe,KAAMhC,KAAKgC,KAAMyd,SAAUzf,KAAKyf,SAAUQ,SAAS,OACvD,KAAGF,EAGP,OAAO,KAFPC,EAnCiB,EAACP,EAAUK,KAC9B,KAAML,GAAS,CACd,MAAMO,EAAMP,EAASS,MAAMjQ,OAAO4P,eAAeC,GAAU,GAC3D,GAAGE,EACF,OAAOA,EAERP,EAAWA,EAAS7M,MACrB,CACA,MAAO,CAAE5Q,KAAM,KAAMyd,SAAU,KAAMQ,SAAS,EAAO,EA2B7CE,CAAYngB,KAAKyf,SAAS7M,OAAQkN,EAE7B,CAGZ,OAFGE,EAAIC,SACNjgB,KAAK0f,MAAMvd,IAAI2d,EAAUE,GACnBA,CACR,CAEA,WAAAI,CAAYN,GAEX,MAAM,QAAEG,GAAYjgB,KAAK6f,eAAeC,GACxC,OAAOG,CACR,CACA,WAAAI,CAAYP,GAEX,MAAM,KAAE9d,GAAShC,KAAK6f,eAAeC,GACrC,OAAO9d,EAAOA,EAAK8d,QAAYla,CAChC,CACA,WAAA0a,CAAYR,EAAUxd,GAErB,MAAM,KAAEN,EAAI,QAAEie,GAAYjgB,KAAK6f,eAAeC,GAC1CG,EACHje,EAAK8d,GAAYxd,GAEbtC,KAAKgC,OAGRhC,KAAKgC,KAAO,CAAC,GAFbhC,KAAKgC,KAAK8d,GAAYxd,EAKvBtC,KAAK0f,MAAMvd,IAAI2d,EAAU,CAAE9d,KAAMhC,KAAKgC,KAAMyd,SAAUzf,KAAKyf,SAAUQ,SAAS,IAEhF,CACA,cAAAM,CAAeT,GAEd,MAAM,IAAIpY,MAAM,wBACjB,EAGc,MAAM8Y,GACpB,WAAA3Z,CAAYyS,EAASmG,GACpBzf,KAAKiQ,OAAS,IAAIuP,GAAOlG,EAASmG,GAClCzf,KAAKgC,KAAO,IAAIye,MAAMzgB,KAAKiQ,OAAQ,CAClC6O,IAAK,SAAS9c,EAAM8d,GACnB,OAAO9d,EAAKoe,YAAYN,EACzB,EACA7d,IAAK,SAASD,EAAM8d,GACnB,OAAO9d,EAAKqe,YAAYP,EACzB,EACA3d,IAAK,SAASH,EAAM8d,EAAUxd,GAC7B,OAAON,EAAKse,YAAYR,EAAUxd,EACnC,EACAie,eAAgB,SAASve,EAAM8d,GAC9B,OAAO9d,EAAKue,eAAeT,EAC5B,GAGF,CAEA,UAAAH,CAAW3d,GACVhC,KAAKiQ,OAAO0P,WAAW3d,EACxB,CAEA,UAAA4d,GACC5f,KAAKiQ,OAAO2P,YACb,EC7FD,MACMc,GAAa,kDAMbC,GAAsB,IAAIpB,GAC1BqB,GAAiBte,GAClBA,aAAiBid,GACbjd,EAED,IAAIid,GAAajd,GAkCnBmb,GAAU5U,eAAegY,EAAWC,EAAaC,EAASC,GAC/D,GAAID,GAAWF,EAAUzR,MAAQ2R,EAChC,OAAOF,EAAUjO,OAAS6K,GAAQoD,EAAUjO,OAAQkO,EAAaC,EAASC,GAAY,KAEvF,MAAMxe,QAnCSqG,eAAeoY,EAAYC,GAC1C,GAA0B,iBAAfD,EACV,OAAOA,EAER,MAAME,EAAa,IAAIjb,SAAS,UACjC,8EAIa+a,0DAQZ,IAIIze,EAJAmJ,EAAUvH,YAAW,KACxBuH,EAAU,KACVjB,QAAQ2E,KAAK,0BAA2B4R,EAAY,IAAIvZ,MAAQ,GAlCnC,KAqC9B,IACClF,QAAe2e,EAAWD,EAC3B,CAAC,MAAM/a,GAAG,CAIV,OAFGwF,GACFxH,aAAawH,GACPnJ,CACR,CAMsB4e,CAAQN,EAAaD,EAAUX,MAAMle,MAC1D,OAAIQ,QACIA,EAECwe,aAAoBzB,IAAgByB,EAASxH,SAC9CwH,EAAS1e,WADZ,CAEN,EAEM+e,GAAexY,MAAO4W,EAAU5L,EAAOyN,IACzCzN,EAzDkB,GA0DbA,EAzDqB,GA2DtB4J,GAAQgC,EAAU5L,EAzDS,GAyD0B0N,GAAU1N,EA1DxC,IA0DwEyN,GAGjGC,GAAYjf,GACbA,EAEoB,IADvBA,EAAQA,EAAMjB,QACDpB,OAAc,KAAOqC,EAE5B,KAGO,MAAMkf,GACpB,WAAA3a,EAAY,QAAEyS,EAAU,GAAM,OAAE1G,EAAS,KAAI,KAAExD,EAAO,OACrDpP,KAAK4S,OAAUA,aAAkB4O,GAAsB5O,EAAS,KAChE5S,KAAKoP,KAAOA,EACZpP,KAAKsZ,QAAUA,EACftZ,KAAKkgB,MAAQ,IAAIM,GAAQxgB,KAAKsZ,QAAStZ,KACxC,CAEA,SAAIoI,GACH,OAAOpI,KAAK4S,OAAS5S,KAAK4S,OAAOxK,MAAQ,IAAMpI,KAAKoP,KAAO,IAAMpP,KAAKoP,IACvE,CAEA,kBAAIqS,GACH,OAAKzhB,KAAKsZ,QAEHtZ,KAAK4S,OAAS5S,KAAK4S,OAAO6O,eAAiB,IAAMzhB,KAAKoP,KAAO,IAAMpP,KAAKoP,KADvEpP,KAAK4S,OAAS5S,KAAK4S,OAAO6O,eAAiB,EAEpD,CAEA,gBAAIC,GACH,MAAMlf,EAAS,GACf,IAAIid,EAAWzf,KACf,KAAOyf,GACFA,EAASnG,SACZ9W,EAAOqB,KAAK4b,EAASnG,SAEtBmG,EAAWA,EAAS7M,OAGrB,OAAOpQ,CACR,CAEA,OAAAmf,CAAQlU,EAAK5M,GACZ,GAAK4M,EAAL,CAEK,IAAI5M,GAAUA,GAAUb,KAAKoP,KAG3B,CACN,MAAM0Q,EAAWzG,EAAeI,KAAKzZ,KAAKsZ,QAAS7L,GAAK,GACxD,OAAOqS,EAAWA,EAASxd,MAAQ,IACpC,CALKtC,KAAK4S,QACR5S,KAAK4S,OAAO+O,QAAQlU,EAAK5M,EAI3B,CACD,CAEA,UAAA8e,CAAWlS,EAAKnL,EAAOzB,GACtB,GAAK4M,EAEA,GAAI5M,GAAUA,GAAUb,KAAKoP,KAC7BpP,KAAK4S,QACR5S,KAAK4S,OAAO+M,WAAWlS,EAAKnL,EAAOzB,OAC9B,CACa,MAAhBb,KAAKsZ,cAA2C,IAAjBtZ,KAAKsZ,UACtCtZ,KAAKsZ,QAAU,CAAC,EAChBtZ,KAAKkgB,MAAMP,WAAW3f,KAAKsZ,UAEXD,EAAeI,KAAKzZ,KAAKsZ,QAAS7L,GAC1CnL,MAAQA,EACjBtC,KAAKkgB,MAAMN,YACZ,CACD,CAEA,YAAAgC,CAAatI,EAASzY,GACjBA,GAAUA,GAAUb,KAAKoP,KACxBpP,KAAK4S,QACR5S,KAAK4S,OAAOgP,aAAatI,EAASzY,GAEnCb,KAAKsZ,QAAUtZ,KAAKsZ,QAAUuI,GAAYlH,MAAM3a,KAAKsZ,QAASA,GAAWA,CAE3E,CAEA,aAAMmE,CAAQqD,EAAaE,GAC1B,MAAMM,EAAmC,GAApB9X,UAAUvJ,OAAc2gB,GAAeI,GAAYL,GACxE,IACC,MAAM9M,EAAQ6M,GAAW5M,KAAKgN,GAC9B,OAAIjN,QACUwN,GAAarhB,KAAM6T,EAAOyN,SAE1B7D,GAAQzd,KAAMuhB,GAAUT,GAAc,KAAMQ,EAC3D,CAAE,MAAOnb,GAER,OADAuE,QAAQC,MAAM,+BAAiCmW,EAAa,KAAO3a,GAC5Dmb,EAAa9H,SAAW8H,EAAahf,MAAQwe,CACrD,CACD,CAEA,iBAAMgB,CAAYC,EAAOf,GACxB,IAAIgB,EAAOD,EACPE,EAAOF,EACPlO,EAAQ6M,GAAW5M,KAAKkO,GAC5B,MAAMV,EAAmC,GAApB9X,UAAUvJ,OAAc2gB,GAAeI,GAAYL,GACxE,KAAgB,MAAT9M,GAAe,CACrB,MAAMrR,QAAe6e,GAAarhB,KAAM6T,EAAOyN,GAC/CW,EAAOA,EAAKze,MAAMqQ,EAAM,IAAI9P,OAC5Bie,EAAOA,EAAKxe,MAAMqQ,EAAM,IAAI9P,UAAuB,IAAXvB,EAAyB,YAAyB,MAAVA,EAAiB,OAASA,GAC1GqR,EAAQ6M,GAAW5M,KAAKmO,EACzB,CACA,OAAOD,CACR,CAEA,oBAAavE,CAAQqD,EAAaI,EAAUF,EAAUkB,GACrD,MAAMzC,EAAW,IAAI+B,GAAmB,CAAElI,QAAS4H,IAC7CI,EAAe9X,UAAUvJ,OAAS,EAAI2gB,GAAeI,GAAYL,GACvE,MAAwB,iBAAbuB,GAAyBA,EAAW,EACvC,IAAI5a,SAAQmW,IAClBrZ,YAAW,KACVqZ,EAAQgC,EAAShC,QAAQqD,EAAaQ,GAAc,GAClDY,EAAS,IAGPzC,EAAShC,QAAQqD,EAAaQ,EACtC,CAEA,wBAAaQ,CAAYC,EAAOb,EAAUF,EAAUkB,GACnD,MAAMzC,EAAW,IAAI+B,GAAmB,CAAElI,QAAS4H,IAC7CI,EAAe9X,UAAUvJ,OAAS,EAAI2gB,GAAeI,GAAYL,GACvE,MAAwB,iBAAbuB,GAAyBA,EAAW,EACvC,IAAI5a,SAAQmW,IAClBrZ,YAAW,KACVqZ,EAAQgC,EAASqC,YAAYC,EAAOT,GAAc,GAChDY,EAAS,IAGPzC,EAASqC,YAAYC,EAAOT,EACpC,CAEA,kBAAOa,EAAY,QAAC7I,EAAO,WAAEuB,EAAU,OAAE9K,EAAO,CAAC+K,MAAK,GAAK,KAAE1L,EAAI,OAAEwD,IAElE,OADA0G,EAAUuI,GAAYhhB,OAAO,CAACmB,KAAMsX,EAASuB,aAAY9K,WAClD,IAAIyR,GAAmB,CAAClI,UAASlK,OAAMwD,UAC/C,E,OC5MM,MAAMwP,GAA0B,WACjCC,GAAQ,CAAC,EAqBTC,GAAazZ,MAAOyO,EAAQoI,EAAOjS,IACjC8U,GAAYjQ,OAAOgF,GAAQ,GAAOoI,EAAOjS,GAG3C8U,GAAc1Z,MAAO6G,EAASgQ,EAAOjS,KAC1C,IAAI+K,EAAW,KACf,GAAI9I,aAAmB8S,oBAAqBhK,EAAW,IAAIiK,GAAS/S,EAASjC,OACxE,CAEJ,GADA+K,EAAWlY,SAASmY,cAAc,cAC9B/I,aAAmBuC,MAAQvC,aAAmBwC,UAAYxC,aAAmByC,gBAAkBzC,aAAmB/L,OACjH,MAAM,IAAI+D,MAAM,mCADwG8Q,EAAS/U,QAAQ8B,OAAOmK,EAAQgT,WAAU,IAGvKlK,EAAW,IAAIiK,GAASjK,EAAU/K,EACnC,CAEA,IAAK+K,EAAU,MAAM,IAAI9Q,MAAM,0BAI/B,OAFIgY,GAASjS,IAAK4U,GAAM5U,GAAO+K,GAExBA,CAAQ,EAeD,MAAMiK,GAQpB,WAAA5b,CAA+C2R,EAA+B/K,GAC7EzN,KAAKwY,SAAWA,EAChBxY,KAAKyN,IAAMA,CACZ,CAEA,aAAAkV,CAAcC,EAAMtiB,UAEnB,OADesiB,EAAIlK,WAAW1Y,KAAKwY,UAAU,GAC7B/U,QAAQmO,UACzB,CAEA,MAAAC,GACK7R,KAAKyN,KAAO4U,GAAMriB,KAAKyN,aAAa4U,GAAMriB,KAAKyN,IACpD,CAEA,kBAAajH,CAAMY,EAAKsY,GAAQ,EAAMmD,EAAQ,MAC7C,MAAmB,iBAARzb,EACHqb,GAAShJ,KAAK,IAAIzP,IAAI5C,EAAK0b,UAAWpD,EAAOmD,GAC1Czb,aAAe4C,IAAYyY,GAAShJ,KAAKrS,EAAKsY,EAAOmD,QAEhE,IAAInb,MAAM,0DACX,CAEA,iBAAa+R,CAAKjB,EAAUkH,GAAQ,EAAMmD,EAAQ,MACjD,GAAIrK,aAAoBiK,GAAU,OAAOjK,EAEzC,MAAM/K,EAvFO,EAAC+K,EAAUkH,EAAOmD,KAChC,IAAKnD,EAAO,OAAO,KAEnB,IAAIjS,EAAM,KAMV,OALIoV,EAAOpV,EAAMoV,EACY,iBAAbrK,EAAuB/K,EAAM+K,EACpCA,aAAoBxO,IAAKyD,EAAM+K,EAASvR,WACxCuR,aAAoBjC,cAAa9I,EAAM+K,EAASnE,YAErD5G,EAAYA,EAAI1N,WAEb,IAAI,EA4EEgjB,CAAOvK,EAAUkH,EAAOmD,GACpC,OAAIpV,GAAO4U,GAAM5U,GAAa4U,GAAM5U,GACP,iBAAb+K,EACR8J,GAAW9J,EAAUkH,EAAOjS,GACzB+K,aAAoBxO,SA7EjBnB,OAAOzB,EAAKsY,EAAOjS,KAClC,MAAM3B,QAAiBtF,MAAMY,EAAIH,YAC3BqQ,QAAexL,EAASkW,OAC9B,OAAOM,GAAWhL,EAAQoI,EAAOjS,EAAI,EA0EauV,CAAQxK,EAAUkH,EAAOjS,GACjE+K,aAAoBvG,MAAQuG,aAAoBtG,UAAYsG,aAAoBrG,gBAAkBqG,aAAoBgK,oBAA4BD,GAAY/J,EAAUkH,EAAOjS,QAExL,IAAI/F,MAAM,qGACX,CAEA,6BAAaub,CAAiB1P,EAAM2P,EAAiBxD,EAAOmD,GAC3D,IACC,MAAMrK,EAzDW,CAACjF,IACpB,IAAIiF,EAAWjF,EAAKrS,KAAK,qBAAqBC,QAC9C,GAAMqX,EAAU,OAAOA,EACvB,MAAMlW,EAAQiR,EAAKvS,KAAKohB,IACxB,IAAK9f,EAAO,OAAO,KACnB,IAEC,GADAkW,EAAWtX,KAAKoB,GAAOnB,QACjBqX,EAAU,OAAOA,CACxB,CAAE,MAAOrS,GAAI,CACb,OAAO,IAAI6D,IAAI1H,EAAOoE,SAAS,EAgDZyc,CAAY5P,GAC7B,GAAIiF,EAAU,OAAOiK,GAAShJ,KAAKjB,EAAUkH,EAAOmD,EACrD,CAAE,MAAO1c,GACRuE,QAAQ2E,KAAK,iCAAkCkE,EAAMpN,EACtD,CAEA,OAAO+c,CACR,EAGM,MCjHME,GAAY,OACZC,GAAc,SACdC,GAAgB,WAChBC,GAAqB,gBACrBC,GAAgC,2BAGhCC,GAAY,OCEnBC,GAAa,CAACN,GAAWhB,GAAyBmB,GAAoBC,GAA+BF,GAAeG,IACpHE,GAAS,CAACxE,GAAaC,GAAgBC,IAMvCuE,GAAY5E,GAAwBoD,IAEpCyB,GAAiBhb,MAAOib,IAC7B,GAAIA,EAAMC,aAAa3B,IAA0B,CAChD,IAAI5J,EAAWoL,GAAUE,GAKzB,OAJKtL,IACJA,QAAiBiK,GAASQ,iBAAiBa,EAAO,MAAM,GACxDF,GAAUE,EAAOtL,IAEXA,CACR,CAAO,CACN,MAAMwL,EAAMF,EAAM9iB,KAAKuiB,IACjB7N,EAAQ0I,eAAenc,IAAI+hB,GAC3BC,OAlBiBpb,OAAOib,IAC/B,MAAMG,EAAaH,EAAM9iB,KAAKwiB,KAAkC,KAChE,OAAO,GAAS/F,QAAQwG,EAAY,CAAC,EAAG,CAAC,EAAE,EAgBjBC,CAAiBJ,GAEpCpU,EAAU,IAAIgG,EACpB,IAAK,IAAInR,KAAa0f,EAAY,CACjC,MAAM3hB,EAAQ2hB,EAAW1f,GACJ,iBAAVjC,GAAoBoN,EAAQ1O,KAAKuD,EAAWjC,EACxD,CAEA,OAAOoN,CACR,GAGD,MAAMyU,WAAc,GACnB,6BAAWC,GACV,OAAOV,EACR,CAEA,mBAAWlH,GACV,OAAO,EACR,CAEA,iBAAWmH,GACV,OAAOA,EACR,CAEA,IAAe,EAEf,WAAA9c,CAAYwd,GACX9Y,MAAM8Y,GAAW,CAAC,GAClBrkB,KAAK8C,GAAG,SAAS,KACZ9C,KAAKskB,QACRtkB,KAAK4Q,QAAQuO,GAAY,GAE5B,CAEA,UAAMhJ,SACC5K,MAAM4K,OACRnW,MAAK,IACRA,MAAK,GAAe,EACpBA,KAAK4Q,QAAQsO,IACVlf,KAAKskB,QACPtkB,KAAK4Q,QAAQuO,IAEhB,CAEA,QAAI/P,GACH,OAAOpP,KAAKgB,KAAKoiB,GAClB,CAEA,QAAImB,GACH,OAAOvkB,KAAKgB,KAAKyiB,GAClB,CAEA,UAAIa,GACH,OAAOtkB,KAAK+jB,aAAaV,GAC1B,CAEA,UAAIiB,CAAOA,GAENA,GADYtkB,KAAKskB,SAEpBtkB,KAAKgB,KAAKqiB,GAAaiB,EAAS,GAAK,MACjCA,EACHtkB,KAAK4Q,QAAQwO,IAEbpf,KAAK4Q,QAAQyO,IAEhB,CAEA,YAAImF,GACH,OAAOxkB,KAAK+jB,aAAaT,GAC1B,CAEA,WAAIhK,GACH,OAAOtZ,KAAKgB,KDjGc,UCkG3B,CAEA,WAAIyjB,GACH,OAAOzkB,KAAK+jB,aAAaW,aAC1B,CAEA,eAAMlH,GACL,OAAOqG,GAAe7jB,KACvB,EAGD,GAAOmkB,IACP,YCnHaQ,GAAc,SACd,GAAe,UCMtB,GAAa,CAACA,GAAa,IAE3B,GAAS,CAACrF,IAEhB,MAAMsF,WAAkB,GACvB,6BAAWR,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAO,EACR,CAEA,iBAAWmH,GACV,OAAO,EACR,CAEA,WAAA9c,CAAYwd,GACX9Y,MAAM8Y,GAAW,CAAC,GAClBrkB,KAAK8C,GAAG,SAAUC,IACjBA,EAAM8hB,iBACN7kB,KAAK4Q,QAAQ0O,GAAe,GAE9B,CAEA,UAAMnJ,GAAQ,CAEd,QAAIoO,GACH,OAAOvkB,KAAKgB,KDhCW,OCiCxB,CAEA,UAAIF,GACH,OAAOd,KAAKgB,KAAK2jB,GAClB,CAEA,WAAIrL,GACH,OAAOtZ,KAAKgB,KAAK,GAClB,CAEA,WAAIyjB,GACH,OAAOzkB,KAAK+jB,aD7Cc,UC8C3B,EAGD,GAAOa,IACP,YCnDA,GAAe3G,GAAW,QCDpB6G,GAAqB,GAsBrBC,GAAQ,CACb5O,KAAM,EACNnU,KAAM,EACNwW,SAAU,EACV/U,QAAS,EACTuhB,OAAQ,GAGM,MAAMC,GAEpB,gBAAWF,GAAU,OAAOA,EAAM,CAClC,mBAAWG,GAAa,OAAO,CAAE,CACjC,mBAAWC,GAAa,OAAO,GAAO,CAEtC,WAAAte,GAAgB,CAEhB,QAAIuI,GAAS,CACb,QAAIgW,GAAS,CACb,SAAIC,GAAS,OAAON,GAAMC,MAAM,CAOhC,aAAM5D,CAAQ9H,GACb,OAAOA,CACR,CAGA,aAAO+E,CAAOtO,GAlDS,GAAGuV,gBAC1B,KAAMA,aAAqBL,IAC1B,MAAM,IAAIvd,MAAM,iDAEjB,GAAI4d,EAAUF,KAAOH,GAAUC,SAC9B,MAAM,IAAIxd,MAAM,6CAA+Cud,GAAUC,SAAW,KAErF,GAAII,EAAUF,KAAOH,GAAUE,SAC9B,MAAM,IAAIzd,MAAM,8CAAgDud,GAAUE,SAAW,KAEtFL,GAAmBjhB,KAAKyhB,GACxBR,GAAmB9f,MAAK,CAACC,EAAGC,KAC3B,MAAMmgB,EAAQpgB,EAAEogB,MAAQngB,EAAEmgB,MAC1B,OAAY,GAATA,EACKpgB,EAAEmgB,KAAOlgB,EAAEkgB,KAEZC,CAAK,GACX,EAkCDE,CAAgBxV,EACjB,CAEA,qBAAWyV,GACV,OAAOV,EACR,EChDoB,IAAI7J,IACR,IAAI/Y,IAKrB,MA0BMujB,GAAcjN,GACfA,aAAoBiK,GAAiBjK,EAASmK,uBAClCnK,IAAa3Y,OAAeyS,OAAOkG,GAC5CA,EAGR,IAAIhK,GAAK,EACM,MAAM,GACpB,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAEA,WAAA3H,EAAY,QAAEpD,EAAU,KAAI,SAAEgc,EAAQ,SAAEiG,EAAQ,SAAElN,EAAQ,UAAEvX,EAAS,KAAEkc,EAAI,KAAED,EAAO,UAAS,OAAEpc,EAAS,KAAI,OAAE8R,EAAS,KAAI,KAAE+S,EAAO,KAAI,UAAEC,EAAY,KAAI,gBAAEC,IAC3J,IAAKpG,EAAU,MAAM,IAAI/X,MAAM,qCAC/B,IAAKge,EAAU,MAAM,IAAIhe,MAAM,qCAC/B,IAAK8Q,EAAU,MAAM,IAAI9Q,MAAM,qCAC/B,IAAKzG,EAAW,MAAM,IAAIyG,MAAM,sCAChC,IAAKyV,EAAM,MAAM,IAAIzV,MAAM,iCAE3B1H,MAAK,EAAM4S,EAAS,GAAGA,EAAOpE,OAAOA,OAAS,SAASA,KACvDxO,MAAK,EAAS4S,EAASA,EAAO2L,MAAQ,EAAI,EAC1Cve,MAAK,EAAU4S,EACf5S,MAAK,EAAY0lB,EACjB1lB,MAAK,EAAQmd,EACbnd,MAAK,EAAYylB,GAAWjN,GAC5BxY,MAAK,EAAQkd,EACbld,MAAK,EAAe,IAAIib,IACxBjb,MAAK,EAAQ2lB,GAAc5J,KAC3B/b,MAAK,EAAoB6lB,aAA2B5K,IAAM4K,EAAkB,IAAI5K,IAChFjb,MAAK,EAAa4lB,aAAqBjiB,MAAQiiB,EAAY,GAE3D5lB,KAAKyD,QAAUA,EACfzD,KAAKiB,UAAYA,EACjBjB,KAAKc,OAASA,EACdd,KAAKyf,SAAWA,EAGhBzf,KAAK8lB,MAAO,EACZ9lB,KAAK+lB,QAAS,EAIVnT,GACHA,EAAOoT,YAAYpQ,IAAI5V,KAEzB,CAEA,MAAIwO,GACH,OAAOxO,MAAK,CACb,CACA,SAAIue,GACH,OAAOve,MAAK,CACb,CACA,UAAI4S,GACH,OAAO5S,MAAK,CACb,CACA,YAAI0lB,GACH,OAAO1lB,MAAK,CACb,CACA,QAAImd,GACH,OAAOnd,MAAK,CACb,CACA,YAAIwY,GACH,OAAOxY,MAAK,CACb,CACA,YAAIwY,CAASA,GACZxY,MAAK,EAAYylB,GAAWjN,EAC7B,CAEA,QAAI0E,GACH,OAAOld,MAAK,CACb,CACA,eAAIgmB,GACH,OAAOhmB,MAAK,CACb,CAEA,UAAIimB,GACH,OAAOjmB,MAAK,EAAMmc,QACnB,CAEA,eAAA0J,CAAgBP,GACf,MAAMY,EAAmBlmB,MAAK,EAC9BslB,aAAqBL,GAAYiB,EAAiBtQ,IAAI0P,EAAUlW,MAAQ8W,EAAiBtQ,IAAI0P,EAC9F,CAEA,eAAAa,CAAgBb,GACf,MAAMY,EAAmBlmB,MAAK,EAC9B,OAAIslB,aAAqBL,KAAoBiB,EAAiBpH,IAAIwG,EAAUlW,OAAS8W,EAAiBpH,IAAIwG,KAElGY,EAAiBpH,IAAIwG,EAC9B,CAEA,QAAAc,CAAS/O,GACJrX,KAAK4S,OAAQ5S,KAAK4S,OAAOwT,SAAS/O,GACjCrX,KAAK8H,MAAMuP,EACjB,CAEA,WAAMvP,CAAMuP,GACX,MAAMuO,EAAY5lB,MAAK,EACvB,IAAIqX,EAIG,CACN,MAAMsO,EAAO3lB,MAAK,EAClB,IAAK2lB,EAAKxJ,SAAU,CACnB,IAAKnc,KAAK+lB,OAAQ,IAAK,IAAI1O,KAAYuO,QAAiBvO,EAASrX,MAEjE,IAAK,IAAIye,KAASze,KAAKgmB,kBAAmBvH,EAAM3W,QAE5C9H,KAAK4S,QAAQ5S,KAAK4S,OAAOoT,YAAY3jB,OAAOrC,MAEhD2lB,EAAKlI,QAAQzd,KACd,CAEA,OAAO2lB,CACR,CAhBKtO,aAAoB1T,MAAO0T,EAASxV,SAASwV,GAAarX,KAAK2lB,KAAKnb,KAAK6M,KACpEA,aAAoB/P,QAASse,EAAU/hB,MAAKgF,eAAkBwO,IAC1C,mBAAbA,GAAyBuO,EAAU/hB,KAAKwT,EAe1D,CAEA,UAAAgP,EAAW,SAAE5G,EAAWzf,KAAKyf,SAAQ,SAAEiG,EAAW1lB,KAAK0lB,SAAQ,SAAElN,EAAWxY,KAAKwY,SAAQ,UAAEvX,EAAYjB,KAAKiB,UAAS,KAAEkc,EAAOnd,KAAKmd,KAAI,KAAED,EAAOld,KAAKkd,KAAI,OAAEpc,EAASd,KAAKc,OAAM,gBAAE+kB,EAAkB,MAAS,CAAC,GAC5M,OAAO,IAAI,GAAQ,CAAEpG,WAAUiG,WAAUlN,WAAUvX,YAAWic,OAAMC,OAAMrc,SAAQ8R,OAAQ5S,KAAM6lB,mBACjG,CAEA,KAAAS,EAAM,QAAE7iB,EAAUzD,KAAKyD,QAAO,SAAE+U,EAAWxY,KAAKwY,SAAQ,UAAEvX,EAAYjB,KAAKiB,UAAS,KAAEkc,EAAOnd,KAAKmd,KAAI,KAAED,EAAOld,KAAKkd,KAAI,OAAEpc,EAASd,KAAKc,OAAM,gBAAE+kB,EAAkB7lB,MAAK,GAAsB,CAAC,GAC7L,OAAO,IAAI,GAAQ,CAAEyD,UACpBgc,SAAUzf,KAAKyf,SACfiG,SAAU1lB,KAAK0lB,SACflN,WACAvX,YACAkc,OACAD,OACApc,SACA+kB,kBACAF,KAAM3lB,MAAK,EACX4lB,UAAW5lB,MAAK,GAElB,CAEA,cAAAumB,EAAe,SAAE9G,EAAWzf,KAAKyf,SAAQ,SAAEiG,EAAW1lB,KAAK0lB,SAAQ,SAAElN,EAAWxY,KAAKwY,SAAQ,UAAEvX,EAAYjB,KAAKiB,UAAS,KAAEkc,EAAOnd,KAAKmd,KAAI,KAAED,EAAOld,KAAKkd,KAAI,OAAEpc,EAASd,KAAKc,OAAM,gBAAE+kB,EAAkB,MAAS,CAAC,GAChN,MAAO,CAAEpG,WAAUiG,WAAUlN,WAAUvX,YAAWic,OAAMC,OAAMrc,SAAQ8R,OAAQ,KAAMiT,kBACrF,EC9Lc,MAAMW,WAAyBjQ,YAC7C,WAAA1P,GACC0E,QACAvL,KAAKymB,QAAS,CACf,CAMA,aAAMrF,EAAQ,SAAC5I,EAAQ,QAAEc,IAExB,OADAA,EAAQ7V,QAAU+U,EAASkK,WAAU,GAC9BpJ,CACR,ECXc,MAAMoN,WAAuB,GAC3C,WAAA7f,GACC0E,QAEAvL,KAAKid,aAAa,CAACC,KAAM,QAC1B,CACA,aAAMkE,EAAQ,SAAC5I,EAAQ,QAAEc,IACxB,OAAOA,CACR,EAED,IAAI8E,eAAeC,OAAO,eAAgBqI,GAAgB,CAAC,MAAMvgB,GAAG,CCyDpE8e,GAAU5G,OAAO,CAAEiH,UAAW,IAlE9B,cAAsBL,GACrB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GACH,MAAO,SACR,CACA,QAAIgW,GACH,OAAOH,GAAUC,QAClB,CACA,SAAIG,GACH,OAAOJ,GAAUF,MAAM5O,IACxB,CAEA,aAAMiL,CAAQ9H,GACb,MAAM,SAAEd,EAAQ,SAAEkN,EAAQ,SAAEjG,GAAanG,EACzC,GAAMd,aAAoBlD,QAEnB,GAAIkD,EAASxX,KAAK,eACxBsY,EAAQ7V,QAAUnD,SAASoY,WAAWF,GAAU,GAChDc,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,OACX,GAAIvN,EAASxX,KAAK,cAAe,CACvCsY,EAAQ7V,QAAU,IAAI,GACtB+U,EAASxX,KAAK,aAAc,MAC5B,MAAM2lB,EAAerN,EAAQiN,eAAe,CAAErJ,KAAM,UAAWpc,OAAQwY,EAAQ7V,UAC/EW,YAAW,KACVshB,EAASkB,OAAOD,EAAa,GAC3BE,SAASrO,EAASxX,KAAK,eAAiB,QAAU,KACrDsY,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,CAClB,MAAO,GAAIvN,aAAoBgK,oBAAqB,CACnDlJ,EAAQ7V,QAAUnD,SAASmY,cAAcD,EAAS9D,SAClD,MAAM2R,EAAa/M,EAAQ+M,WAAW,CAAE7N,SAAUA,EAAS/U,QAAQmO,WAAY3Q,UAAWqY,EAAQ7V,QAAQA,gBACpGiiB,EAASkB,OAAOP,GACtB/M,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,CAClB,MAAO,GAAIvN,EAASuL,aAAa,gBAAiB,CACnCvL,EAASxX,KAAK,gBAAgBK,OAChCpB,OAAS,EAAGqZ,EAAQ7V,QAAUnD,SAASmY,oBAAoBgH,EAASqC,YAAYtJ,EAASxX,KAAK,mBAEzGsY,EAAQ7V,QAAUnD,SAASoY,WAAWF,GAAU,GAChDc,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,EAEnB,MAAO,GAAIvN,EAAS9D,QAAS,CAC5B,IAAInS,EAAKiW,EAASxX,KAAK,MACvB,GAAGuB,EAAG,CACLA,QAAWkd,EAASqC,YAAYvf,GAChC,MAAMmN,EAAUpP,SAASmY,cAAcD,EAAS9D,QAAS,CAAEnS,OAC3DmN,EAAQ1O,KAAK,KAAMuB,GACnB+W,EAAQ7V,QAAUiM,CACnB,MACC4J,EAAQ7V,QAAWnD,SAASmY,cAAcD,EAAS9D,QAErD,MACC4E,EAAQ7V,QAAUnD,SAASoY,WAAWF,GAAU,GAChDc,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,OAzCjBzM,EAAQ7V,QAAUnD,SAASoY,WAAWF,GAAU,GA4CjD,OAAOc,CACR,KC/DD,MAAMwN,GAAQ,CACb,OAAUje,OAAS7G,OAAMsX,cACxB,MAAM,SAACmG,EAAQ,SAAEjH,GAAYc,EAC7BtX,QAAayd,EAASqC,YAAY9f,GAClCA,EAAO,IAAIgI,IAAIhI,EAAM0E,SAASC,QAC9B,IAAIoJ,QAAe0P,EAASqC,YAAYtJ,EAASxX,KAAK,qBAAuB,MAI7E,OAHA+O,EAASpC,KAAKO,MAAM6B,IAEpB/N,QAAawE,MAAMxE,EAAKiF,WAAY8I,IACxB/D,MAAM,EAEnB,IAAOnD,OAAS7G,OAAMsX,cACrB,MAAM,SAACmG,GAAYnG,EAGnB,OADAtX,QAAayd,EAAShC,QAAQzb,EACnB,EAEZ,OAAU6G,OAAS7G,OAAMsX,cACxB,MAAM,SAACmG,GAAYnG,EAGnB,OADAtX,QAAayd,EAASqC,YAAY9f,EACvB,GAuDbijB,GAAU5G,OAAO,CAAEiH,UAAW,IAlC9B,cAAmBL,GAClB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GAAS,MAAO,MAAO,CAC3B,QAAIgW,GAAS,OAAO,GAAK,CACzB,SAAIC,GAAQ,OAAOJ,GAAUF,MAAM/iB,IAAI,CAEvC,aAAMof,CAAQ9H,GACb,KAAMA,EAAQd,oBAAoBjC,aAAiB+C,EAAQd,SAASxX,KAAK,cACxE,OAAOsY,EAER,IACC,MAAM,SAAEd,GAAac,EACf4D,EAAO4J,GAAOtO,EAASxX,KAAK,mBAAqB,UACvD,IAAKkc,EACJ,MAAM,IAAIxV,MAAM,sCAEjB,IAAI1F,EAAOwW,EAASxX,KAAK,aACzBgB,QAAakb,EAAK,CAAElb,OAAMsX,YAE1B,MAAM2F,EAAUzG,EAASxX,KAAK,iBAE9BsY,EAzCmB,GAAG2F,UAASjd,OAAM+kB,QAAOzN,cAC9C,GAAI2F,EACH3F,EAAQmG,SAASE,WAAWV,EAASjd,EAAM+kB,QACvC,GAAIA,EACRzN,EAAQmG,SAASmC,aAAa5f,EAAM+kB,OACjC,CACH,MAAMtH,EAAW,IAAI+B,GAAmB,CAAElI,QAAStX,EAAMoN,KAAM,YAAawD,OAAQ0G,EAAQmG,WAE5FnG,EAAQmG,SAAWA,CACpB,CAGA,OAAOnG,CAAO,EA6BF0N,CAAc,CAAE/H,UAASjd,OAAM+kB,MAD3BvO,EAASxX,KAAK,mBACoBsY,WACjD,CAAE,MAAOnT,GACRuE,QAAQC,MAAMxE,EAAGmT,EAAQd,SAC1B,CAEA,OAAOc,CAER,KC/CD2L,GAAU5G,OAAO,CAAEiH,UAAW,IA3B9B,cAAiBL,GAChB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GAAS,MAAO,IAAK,CACzB,QAAIgW,GAAS,OAAOH,GAAUC,SAAW,GAAK,CAC9C,SAAIG,GAAU,OAAOJ,GAAUF,MAAM5O,IAAK,CAE1C,aAAMiL,CAAQ9H,GACb,MAAM,SAAEd,GAAac,EACrB,KAAMd,aAAoBjC,aAAiBiC,EAASxX,KAAK,YACxD,OAAOsY,EAER,MAAM6H,EAAa3I,EAASxX,KAAK,WAC3Bye,EAAWnG,EAAQmG,SAQzB,aAPqBA,EAAShC,QAAQ0D,GAAY,KAEjD7H,EAAQ7V,QAAU,KAClB6V,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,GAGXzM,CACR,KCUD2L,GAAU5G,OAAO,CAAEiH,UAAW,IAlC9B,cAAqBL,GACpB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GAAS,MAAO,QAAS,CAC7B,QAAIgW,GAAS,OAAOH,GAAUC,SAAW,CAAE,CAC3C,SAAIG,GAAU,OAAOJ,GAAUF,MAAMvM,QAAS,CAE9C,aAAM4I,CAAQ9H,GACb,KAAMA,EAAQd,oBAAoBjC,aAAiB+C,EAAQd,SAASuL,aAAa,gBAAsD,GAApCzK,EAAQd,SAASzT,SAAS9E,QAC5H,OAAOqZ,EAGRA,EAAQd,SAAWc,EAAQd,SAASkK,WAAU,GAC9C,MAAM,SAAElK,EAAQ,SAAEiH,GAAanG,EAC/B,IAAI6C,GAAW,EACf,MAAM8K,EAAQzO,EAAStX,KAAK,wBACtBjB,EAASgnB,EAAMhnB,OACrB,IAAK,IAAIE,EAAI,EAAGA,EAAIF,EAAQE,IAAK,CAChC,MAAMoT,EAAO0T,EAAM9mB,IACdgc,SAAmBsD,EAAShC,QAAQlK,EAAKvS,KAAK,cAAc,GAChEmb,GAAW,EAEX5I,EAAK1B,QACP,CAKA,OAHIsK,GACH3D,EAAStX,KAAK,6BAA6B2Q,SAErCyH,CACR,KCUD2L,GAAU5G,OAAO,CAAEiH,UAAW,IAxC9B,cAAsBL,GACrB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GACH,MAAO,SACR,CACA,QAAIgW,GACH,OAAOH,GAAUC,QAClB,CACA,SAAIG,GACH,OAAOJ,GAAUF,MAAMvM,QACxB,CAEA,aAAM4I,CAAQ9H,GACb,KAAMA,EAAQd,oBAAoBjC,aAAiB+C,EAAQd,SAASxX,KAAK,iBAAiB,OAAOsY,EACjG,IACC,MAAM,SAAEd,EAAQ,SAAEiH,EAAQ,SAAEiG,GAAapM,EACzC,IAAI4N,EAAU1O,EAASxX,KAAK,gBAC5BkmB,QAAgBzH,EAASqC,YAAYoF,GACrCA,EAAU,IAAIld,IAAIkd,EAASxgB,UAC3BwgB,QAAgBzE,GAAShJ,KAAKyN,GAE9B,MAAMhK,EAAO1E,EAASxX,KAAK,sBAAwB,UAE7CqlB,EAAa/M,EAAQ+M,WAAW,CAAE7N,SAAU0O,EAASjmB,UAAWqY,EAAQ7V,QAASyZ,SAMvF,aALMwI,EAASkB,OAAOP,SAChBA,EAAWve,QACjBwR,EAAQyM,QAAS,EACjBzM,EAAQwM,MAAO,EAERxM,CACR,CAAE,MAAOnT,GAER,OADAuE,QAAQC,MAAMxE,EAAGmT,EAAQd,UAClBc,CACR,CACD,KCrCD,MAAM6N,GACC,eADDA,GAEA,mBAFAA,GAGG,sBAHHA,GAIE,qBAJFA,GAKE,qBALFA,GAMC,oBANDA,GAOM,yBA8CNC,GAAUve,MAAO7G,EAAM+N,KAC5B,IAAI,SAAEyI,EAAQ,SAAEiH,EAAQ,SAAEiG,EAAQ,UAAEzkB,EAAS,UAAEiK,EAAS,QAAEoO,GAAYvJ,EAItE,GAHA0P,EAAW,IAAI+B,GAAmB,CAAElI,QAAStX,EAAMoN,KAAM,eAAgBwD,OAAQ6M,IAEjFvU,IAAYA,SAAkBuU,EAAShC,QAAQvS,GAAW,GACtDA,EACH,OAAO,EACR,MAAMmc,EAAc/N,EAAQ+M,WAAW,CAAE5G,WAAUxe,YAAWuX,WAAU0E,KAAM,WAG9E,aAFMwI,EAASkB,OAAOS,SAChBA,EAAYvf,SACX,CAAI,EA8CZmd,GAAU5G,OAAO,CAAEiH,UAAW,IA3C9B,cAAsBL,GACrB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GAAS,MAAO,SAAU,CAC9B,QAAIgW,GAAS,OAAOH,GAAUC,SAAW,CAAE,CAC3C,SAAIG,GAAU,OAAOJ,GAAUF,MAAMvM,QAAS,CAE9C,aAAM4I,CAAQ9H,GACb,KAAMA,EAAQd,oBAAoBjC,eAAkB+C,EAAQd,SAASxX,KAAKmmB,MAAoB7N,EAAQd,SAASxX,KAAKmmB,IACnH,OAAO7N,EAERA,EAAQyM,QAAS,EACjB,IACC,MAAM,SAAEvN,EAAQ,SAAEiH,EAAQ,SAAEiG,EAAQ,QAAEjiB,GAAY6V,EAC5CvJ,EAAS,CACd/N,MAAOwW,EAASxX,KAAKmmB,KAAmB,IAAI9lB,OAC5CimB,OAAQ9O,EAASxX,KAAKmmB,KAAoB,IAAI9lB,OAC9CkmB,YAAa9H,EAAShC,QAAQjF,EAASxX,KAAKmmB,KAAoB,KAChEK,WAAY/H,EAAShC,QAAQjF,EAASxX,KAAKmmB,KAAmB,KAC9DlI,SAAUzG,EAASxX,KAAKmmB,KAAkB,QAAQ9lB,OAClDmM,QAASgL,EAASxX,KAAKmmB,KAAqB,UAAU9lB,OACtD6J,UAAWsN,EAASxX,KAAKmmB,IACzB3O,SAAUA,EAAS5G,WACnB6N,WACAiG,WACAzkB,UAAWwC,EACX6V,WAEKvJ,EAAO/N,MAAuB,IAAf+N,EAAO/N,OAAe+N,EAAOuX,WAnEnCze,OAAOkH,IACxB,IAAI,KAAE/N,EAAI,MAAEulB,EAAK,KAAEC,EAAI,MAAEF,EAAK,QAAErI,EAAO,OAAEzR,EAAM,SAAEiS,GAAa1P,EAE9D/N,QAAayd,EAAShC,QAAQzb,GAC9B,IAAIylB,EAAQzlB,EACNA,aAAgB2B,QACrB8jB,EAAQxe,OAAOC,oBAAoBlH,IAEpCslB,EAAiB,IAATA,QAAoB7H,EAAShC,QAAQ6J,EAAO,GAAK,KACzD,MAAMrnB,EAASqnB,EAAQI,KAAKC,IAAIJ,EAAQD,EAAOG,EAAMxnB,QAAUwnB,EAAMxnB,OACrE,IAAI6lB,GAAO,EACX,IAAK,IAAI3lB,EAAIonB,EAAOpnB,EAAIF,IAAW6lB,EAAM3lB,GAAQqnB,EAAM,CACtD,MAAMI,EAAY,CAAC,EACnBA,EAAU3I,GAAWjd,EAAK7B,GAC1BynB,EAAUpa,GAAU,CACnB2C,MAAOhQ,EACP0nB,OAAQ1nB,EAAI,EACZmnB,MAAOrnB,EACP+B,QAED8jB,SAAesB,GAAQQ,EAAW7X,EACnC,GAiDS+X,CAAU/X,QAzFJlH,OAAOkH,IACtB,IAAI,MAAEwX,EAAK,KAAEC,EAAI,MAAEF,EAAK,QAAErI,EAAO,OAAEzR,EAAM,SAAEiS,GAAa1P,EAExDuX,QAAc7H,EAAShC,QAAQ6J,GAC/B,MAAMrnB,EAASsnB,EAASD,EAAQE,EAChC,IAAI1B,GAAO,EACX,IAAK,IAAI3lB,EAAIonB,EAAOpnB,EAAIF,IAAW6lB,EAAM3lB,GAAQqnB,EAAM,CACtD,MAAMI,EAAY,CAAC,EACnBA,EAAU3I,GAAW9e,EACrBynB,EAAUpa,GAAU,CACnB2C,MAAOhQ,EACP0nB,OAAQ1nB,EAAI,EACZqnB,OACAF,SAEDxB,SAAesB,GAAQQ,EAAW7X,EACnC,GAuESgY,CAAQhY,EAIhB,CAAE,MAAOpF,GACRD,QAAQC,MAAM,yBAA0BA,EACzC,CACA,OAAO2O,CAER,KC1GD,MAAM0O,GAAgB,cAChBC,GAAkB,IAAIhN,IAAI,CAAC+M,KAE3B,GAAY,CACjBE,KAAM,GAAGF,KACTG,IAAK,GAAGH,SACRI,OAAQ,GAAGJ,YACXK,MAAO,GAAGL,WACVM,MAAO,GAAGN,WACVO,KAAM,GAAGP,UACTQ,UAAW,GAAGR,gBA4CT,GAAUnf,MAAO7G,EAAM+N,KAC5B,IAAI,SAAEyI,EAAQ,SAAEiH,EAAQ,SAAEiG,EAAQ,UAAExa,EAAS,QAAEoO,GAAYvJ,EAI3D,GAHA0P,EAAW,IAAI+B,GAAmB,CAAElI,QAAStX,EAAMoN,KAAM4Y,GAAepV,OAAQ6M,IAEhFvU,IAAYA,SAAkBuU,EAAShC,QAAQvS,GAAW,GACtDA,EAAW,OAAO,EAEtB,MAAMmc,EAAe/N,EAAQ+M,WAAW,CAAE5G,WAAUjH,WAAU0E,KAAM,SAAU2I,gBAAiBoC,KAI/F,aAHMvC,EAASkB,OAAOS,SAChBA,EAAYvf,SAEX,CAAI,EAmDZmd,GAAU5G,OAAO,CAAEiH,UAAW,IAhD9B,cAAqBL,GACpB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GACH,OAAO4Y,EACR,CACA,QAAI5C,GACH,OAAOH,GAAUC,SAAW,CAC7B,CACA,SAAIG,GACH,OAAOJ,GAAUF,MAAMvM,QACxB,CAEA,aAAM4I,CAAQ9H,GACb,KAAMA,EAAQd,oBAAoBjC,eAAkB+C,EAAQd,SAASxX,KAAK,GAAUknB,QAAU5O,EAAQd,SAASxX,KAAK,GAAUqnB,OAAS,OAAO/O,EAE9I,IACC,MAAM,SAAEd,EAAQ,SAAEiH,EAAQ,SAAEiG,EAAQ,QAAEjiB,EAAO,UAAExC,GAAcqY,EACvDvJ,EAAS,CACd/N,MAAOwW,EAASxX,KAAK,GAAUknB,OAAS,IAAI7mB,OAC5CimB,OAAQ9O,EAASxX,KAAK,GAAUqnB,QAAU,IAAIhnB,OAC9CkmB,YAAa9H,EAAShC,QAAQjF,EAASxX,KAAK,GAAUsnB,QAAU,KAChEd,WAAY/H,EAAShC,QAAQjF,EAASxX,KAAK,GAAUunB,OAAS,KAC9DtJ,SAAUzG,EAASxX,KAAK,GAAUmnB,MAAQ,QAAQ9mB,OAClDmM,QAASgL,EAASxX,KAAK,GAAUonB,SAAW,UAAU/mB,OACtD6J,UAAWsN,EAASxX,KAAK,GAAUwnB,WACnChQ,SAAUA,EACViQ,QAAShlB,EAAQiR,QACjB+K,WACAiG,WACAzkB,YACAqY,WAEKvJ,EAAO/N,MAAuB,IAAf+N,EAAO/N,OAAe+N,EAAOuX,WAxEpCze,OAAOkH,IACvB,IAAI,KAAE/N,EAAI,MAAEulB,EAAK,KAAEC,EAAI,MAAEF,EAAK,QAAErI,EAAO,OAAEzR,EAAM,SAAEiS,GAAa1P,EAE9D/N,QAAayd,EAAShC,QAAQzb,GAC9B,IAAIylB,EAAQzlB,EACNA,aAAgB2B,QAAQ8jB,EAAQxe,OAAOC,oBAAoBlH,IAEjEslB,EAAiB,IAATA,QAAoB7H,EAAShC,QAAQ6J,EAAO,GAAK,KACzD,MAAMrnB,EAASqnB,EAAQI,KAAKC,IAAIJ,EAAQD,EAAOG,EAAMxnB,QAAUwnB,EAAMxnB,OACrE,IAAI6lB,GAAO,EACX,IAAK,IAAI3lB,EAAIonB,EAAOpnB,EAAIF,IAAW6lB,EAAM3lB,GAAQqnB,EAAM,CACtD,MAAMI,EAAY,CAAC,EACnBA,EAAU3I,GAAWjd,EAAK7B,GAC1BynB,EAAUpa,GAAU,CACnB2C,MAAOhQ,EACP0nB,OAAQ1nB,EAAI,EACZmnB,MAAOrnB,EACP+B,QAED8jB,SAAe,GAAQ8B,EAAW7X,EACnC,GAqDa2Y,CAAS3Y,QA3FPlH,OAAOkH,IACtB,IAAI,MAAEwX,EAAK,KAAEC,EAAI,MAAEF,EAAK,QAAErI,EAAO,OAAEzR,EAAM,SAAEiS,GAAa1P,EACxDuX,QAAc7H,EAAShC,QAAQ6J,GAC/B,MAAMrnB,EAASsnB,EAAQD,EAAQE,EAC/B,IAAI1B,GAAO,EACX,IAAK,IAAI3lB,EAAIonB,EAAOpnB,EAAIF,IAAW6lB,EAAM3lB,GAAQqnB,EAAM,CACtD,MAAMI,EAAY,CAAC,EACnBA,EAAU3I,GAAW9e,EACrBynB,EAAUpa,GAAU,CACnB2C,MAAOhQ,EACP0nB,OAAQ1nB,EAAI,EACZqnB,OACAF,SAEDxB,SAAe,GAAQ8B,EAAW7X,EACnC,GA2EiE,CAAQA,EAExE,CAAE,MAAOpF,GACRD,QAAQC,MAAM,wBAAyBA,EACxC,CAKA,OAHA2O,EAAQ7V,QAAU,KAClB6V,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,EACVzM,CACR,KClHD,MAAMqP,GAAiB,CACtBzL,KAAM,OACN0L,UAAU,EACVC,eAAgB,EAChBC,UAAW,GAmBN,GAAQ,CACb,KAASjgB,MAAOkH,EAAQuJ,KACvB,MAAM,QAAC7V,EAAO,SAAEgc,EAAQ,SAAEjH,GAAYc,EAEtC,IAAI0I,QAAavC,EAASqC,YAAYtJ,EAASuQ,aAC/C/G,EAAO1P,OAAO0P,GAAK,GAAMve,QAAQslB,YAC9BhZ,EAAO+Y,UAAY,IACrB9G,EAXoB,EAACA,EAAM/hB,IACtB+hB,EAAK/hB,OAASA,EAAS+hB,EAAKgH,UAAU,EAAG/oB,EAAS,GAAGoB,OAAS,MAAQ2gB,EAUpEiH,CAAejH,EAAMjS,EAAO+Y,YAEpCrlB,EAAQslB,YAAc/G,CAAI,EAE3B,KAAQnZ,MAAOkH,EAAQuJ,KACtB,MAAM,SAACmG,EAAQ,SAAEjH,GAAYc,EAE7B,IAAI7V,QAAgBgc,EAASqC,YAAYtJ,EAASuQ,aAClDtlB,EAAU6O,OAAO7O,GAAQ,GACzBA,EAAUnD,SAASoY,WAAWjV,EAAQA,SAAS,GAE5CsM,EAAO6Y,UAGTnlB,EAAQvC,KArCgB,iDAqCS2Q,SAFjCyH,EAAQ7V,QAAUA,CAInB,GAkCFwhB,GAAU5G,OAAO,CAAEiH,UAAW,IA7B9B,cAA0BL,GACzB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GAAS,MAAO,MAAO,CAC3B,QAAIgW,GAAS,OAAOH,GAAUC,SAAW,CAAE,CAC3C,SAAIG,GAAU,OAAOJ,GAAUF,MAAMthB,OAAQ,CAI7C,aAAM2d,CAAQ9H,GACb,MAAM,SAAEd,GAAac,EACrB,KAAMd,aAAoB0Q,OAA+C,GAAtC1Q,EAASuQ,YAAY1nB,OAAOpB,QAAgBuY,EAASzD,eAAiByD,EAASzD,cAAcgP,aAAa,oBAC5I,OAAOzK,EAER,MAAM1G,EAAS4F,EAASzD,cAClBhF,EAAS6C,OA3DE/J,OAAO+J,EAAQ0G,KACjC,MAAMmG,EAAWnG,EAAQmG,SACzB,MAAO,CACNvC,WAAYuC,EAASqC,aAAalP,EAAO5R,KAAK,2BAA6B,QAAQK,OAAOE,eAC1FqnB,SAAUhW,EAAOmR,aAAa,sBAC9B8E,gBAAiBjW,EAAO5R,KAAK,8BAA+B,EAC5D8nB,UAAWjC,eAAepH,EAASqC,YAAYlP,EAAO5R,KAAK,0BAA4B,MACvF,EAoD8BmoB,CAAWvW,EAAQ0G,GAAWqP,GAErDzL,EAAO,GAAMnN,EAAOmN,MAC3B,IAAIA,EACH,MAAM,IAAIxV,MAAM,cAAgBqI,EAAOmN,KAAO,qBAI/C,aAFMA,EAAKnN,EAAQuJ,GAEZA,CACR,KC5ED,MAAM8P,GAAiB,6BAEjBC,GAAyB,UACzBC,GAAyB,kBACzBC,GAAqB,CAAC,MAKtBC,GAAiB,CACtBxY,SAAUnI,MAAO9F,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAAS0a,EAAS7E,KAC1E,MAAMmQ,QAAoBhK,EAASqC,YAAY7R,EAAQA,GACvDxM,EAAQX,GAAGC,EAAO2mB,GAAUD,EAAapF,GAAS,EAEnDsF,YAAa9gB,MAAO9F,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAAS0a,EAAS7E,KAC7E,MAAM5D,EAAQyI,EAAQnW,QAChB6c,EAAiB1G,EAAQ1S,SAAS6d,IAClCjV,EAAWpE,QAAewP,EAASqC,YAAY7R,EAAQA,GAAU,KACvExM,EAAQX,GAAGC,GAAQA,IACf8hB,GACF9hB,EAAM8hB,iBACJxQ,EACF5Q,EAAQqR,SAAST,GAAUwB,YAAYH,GAEvCjS,EAAQoS,YAAYH,EAAM,GAC1B,EAEHkU,gBAAiB/gB,MAAO9F,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAAS0a,EAAS7E,KACjF,MAAM/U,EAAY4Z,EAAQnW,QACpB6c,EAAiB1G,EAAQ1S,SAAS6d,IAClCjV,EAAWpE,QAAewP,EAASqC,YAAY7R,EAAQA,GAAU,KACvExM,EAAQX,GAAGC,GAAQA,IACf8hB,GACF9hB,EAAM8hB,iBACJxQ,EACF5Q,EAAQqR,SAAST,GAAUxS,SAAQ6N,IAClCA,EAAQ7M,gBAAgB0B,EAAS,IAGlCd,EAAQZ,gBAAgB0B,EAAU,GAClC,EAEH,CAAC8kB,IAAyBxgB,MAAO9F,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAAS0a,EAAS7E,KAC1F,MAAMmQ,EAAcxZ,QAAewP,EAAShC,QAAQxN,EAAQA,GAAU,KAEtE,GAAKwZ,GACA,GAA2B,mBAAhBA,EAA4BhmB,EAAQX,GAAGC,EAAO0mB,QACzD,GAA2B,iBAAhBA,EAA0BhmB,EAAQX,GAAGC,EAAO2mB,GAAUD,EAAapF,SAC9E,GAA2B,iBAAhBoF,EAA0B,CACzC,MAAM,QAAEvZ,GAAU,EAAK,QAAEM,GAAU,EAAK,KAAED,GAAO,GAAUkZ,EAC3DhmB,EAAQX,GAAGC,EAAO0mB,EAAYI,YAAa,CAAE3Z,UAASM,UAASD,QAChE,OANkB7F,QAAQC,MAAM,IAAIjD,MAAM,mBAAqBuI,EAAS,sBAMxE,GAII6Z,GAAgBjhB,OAASqC,YAAWkE,OAAM9M,QAAOgX,cACtD,MAAM,SAAEmG,EAAQ,QAAEhc,EAAO,SAAE+U,GAAac,EAExC,IAAI/U,EAAa2G,EAAoBsN,EAASxX,KAAKoO,GAAtB9M,EAC7B4I,EAAYA,EAAY5I,EAAQkW,EAASxX,KAAK,IAAMoO,GACpD,MAAMoK,EAAWuQ,GAAQxlB,GAErB2G,GAAasO,GAEE,KADlBtO,QAAkBuU,EAAShC,QAAQvS,GAAW,KACtBzH,EAAQzC,KAAKoO,QAAYqQ,EAASqC,YAAYvd,EAAWA,IACvE2G,GAEQ,KADlBA,QAAkBuU,EAAShC,QAAQvS,GAAW,KACtBzH,EAAQzC,KAAKoO,GAAM,GACjCoK,GACV/V,EAAQzC,KAAKoO,QAAYqQ,EAASqC,YAAYvd,EAAWA,GAC1D,EAGKwlB,GAAWznB,GACA,MAATA,QAAkC,IAAVA,EAG1B0nB,GAAYnhB,OAASqC,YAAWkE,OAAM9M,QAAOgX,cAClD,MAAM,SAAEmG,EAAQ,SAAEjH,EAAQ,QAAE/U,GAAY6V,EAGxC,IAAIrJ,GADJ/E,EAAYA,EAAY5I,EAAQkW,EAASxX,KAAK,KAAOoO,IACnBoJ,EAASxX,KAAK,IAAMoO,GAA5B9M,EACtBkB,EAAQ4L,EAAK5L,MA5EQ,MA6EN,GAAhBA,EAAMvD,SACRuD,EAAQ4L,EAAK5L,MA7Ee,MA+E7B,MAAMT,EAAQS,EAAMwE,QACdwD,GAAQhI,EAAMwE,SAAWqhB,IAAwB9nB,mBAElC,IAAX0O,GAAoC,MAAVA,GACnCvF,QAAQC,MAAM,kBAAkB5H,uBAA4BU,EAAS,iBAEtEwM,EAASA,EAAO5O,OAChB,MAAMgjB,EAAU,CACf4F,QAAQ,GAGL/e,EAC+C,SAAvCuU,EAAShC,QAAQvS,GAAW,UAAuBgf,GAAQnnB,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAASD,EAAO8V,SAClH4Q,GAAQnnB,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAASD,EAAO8V,EAAQ,EAGhF4Q,GAAUrhB,MAAO9F,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAAS0a,EAAS7E,KAChF,MAAM6Q,EAASX,GAAehe,GAC9B,GAAI2e,EAAQ,OAAOA,EAAOpnB,EAAOkN,EAAQoU,EAAS7Y,EAAMiU,EAAUhc,EAAS0a,EAAS7E,EAAQ,EAGvFoQ,GAAY,SAAU1Y,EAAUqT,GACrC,OAAO,SAAUthB,GAChBA,EAAM8hB,iBACN9hB,EAAMC,kBACFD,EAAMqnB,cAAernB,EAAMqnB,cAAcxZ,QAAQI,EAAUjO,GAC1DA,EAAMjC,OAAO8P,QAAQI,EAAUjO,EACrC,CACD,EAqCAkiB,GAAU5G,OAAO,CAAEiH,UAAW,IAnC9B,cAAwBL,GACvB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GACH,MAAO,WACR,CACA,QAAIgW,GACH,OAAOH,GAAUC,QAClB,CACA,SAAIG,GACH,OAAOJ,GAAUF,MAAMthB,OACxB,CAEA,aAAM2d,CAAQ9H,GACb,MAAM,SAAEd,GAAac,EACrB,KAAMd,aAAoBjC,aAAc,OAAO+C,EAE/C,MAAM+Q,EAAY,IAAIpP,IAAIsO,IAC1B,IAAK,MAAMhlB,KAAaiU,EAASyL,WAAY,CAC5C,MAAO,CAAEqG,EAAMpf,EAAWnI,EAAOqM,GAAQga,GAAetV,KAAKvP,EAAU6K,MACvE,IAAKkb,IAASD,EAAUvL,IAAI1P,GAAO,CAClC,MAAM9M,EAAQiC,EAAUjC,MAEpBS,QAAainB,GAAU,CAAE9e,YAAWnI,QAAOqM,OAAM9M,QAAOgX,kBACjDwQ,GAAc,CAAE5e,YAAWkE,OAAM9M,QAAOgX,WACpD,CACA+Q,EAAUzU,IAAIxG,EACf,CAEA,OAAOkK,CACR,KCrJD,MAAMiR,GAA2B,sBAK3BC,GAAe,UAEfC,GAAW,QA8DjBxF,GAAU5G,OAAO,CAAEiH,UAAW,IA1C9B,cAA4BL,GAC3B,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GACH,MAAO,gBACR,CACA,QAAIgW,GACH,OAAOH,GAAUC,SAAW,CAC7B,CACA,SAAIG,GACH,OAAOJ,GAAUF,MAAMthB,OACxB,CAEA,aAAM2d,CAAQ9H,GACb,MAAM,SAAEmG,EAAQ,SAAEjH,EAAQ,QAAE/U,GAAY6V,EACxC,KAAMd,aAAoBjC,aAAiBiC,EAASxX,KAAKupB,KAA2B,OAAOjR,EAC3F,IACC,IAAI5J,OArCY7G,OAAO2P,EAAUiH,KACnC,IAAI/P,GAAW8I,EAASxX,KAAKupB,KAA6B,IAAIlpB,OAC9D,IAAKopB,GAASC,KAAKhb,GAAU,CAC5B,IACCA,QAAgB+P,EAAShC,QAAQ/N,EAASA,EAC3C,CAAE,MAAOvJ,GAAI,CACb,GAAIuJ,aAAmB6G,YAAa,OAAO7G,CAC5C,CAEA,IACCA,EAAUxO,KAAKwO,EAChB,CAAE,MAAOvJ,GAAI,CAEb,OAAIuJ,GAAWA,EAAQzP,OAAS,EAA4B,GAAlByP,EAAQzP,OAAcyP,EAAQvO,QAAUuO,EAE3E,IAAI,EAsBWib,CAAWnS,EAAUiH,GACzC,GAAI/P,EAAS,CACZ,MAAMwN,EAAO1E,EAASxX,KA/CY,6BA+C2BwpB,GACzDtN,GAAQsN,IACX/mB,EAAQ6B,QAAQC,OAAOmK,GACvB4J,EAAQwM,MAAO,EACfxM,EAAQyM,QAAS,GAEjBzM,EAAQxR,OAAM,EAAGrE,cACZA,IApDU,UAqDTyZ,EAAqBzZ,EAAQ8B,OAAOmK,GApD1B,WAqDLwN,GAAsBzZ,EAAQ8O,QAAQ7C,GAChD,GAGH,CACD,CAAE,MAAOvJ,GACRuE,QAAQkgB,IAAIzkB,EAAG,CAAEmT,WAClB,CAEA,OAAOA,CACR,KClED,MAAMuR,GAAO,cACPC,GAAwB,QAAQD,KAChCE,GAA8B,GAAGD,WA4CvC7F,GAAU5G,OAAO,CAAEiH,UAAW,IA1C9B,cAAyBL,GACxB,WAAApe,GACC0E,OACD,CAEA,QAAI6D,GAAS,OAAOyb,EAAK,CACzB,QAAIzF,GAAS,OAAOH,GAAUE,QAAS,CACvC,SAAIE,GAAU,OAAOJ,GAAUF,MAAMC,MAAO,CAI5C,aAAM5D,CAAQ9H,GACb,MAAM,SAAEd,EAAQ,QAAE/U,EAAO,KAAE0Z,GAAS7D,EACpC,KAAMd,aAAoBjC,aAAiBiC,EAASuL,aAAa+G,KAChE,OAAOxR,EAER,MAAM6H,EAAa3I,EAASxX,KAAK8pB,IAC3BE,EAAYxS,EAASuL,aAAagH,IAOlCtL,EAAW,IAAI+B,GAAmB,CAAElI,QAL7B,CACZ2R,SAAUxnB,EACVynB,MAAO/N,EACPgO,UAAW3S,GAE6CpJ,KAAM,YAAawD,OAAQ0G,EAAQmG,WAc5F,OAXAnG,EAAQ8M,UAASvd,UAChB,IACC,IAAImiB,EACH,OAAOvL,EAAShC,QAAQ0D,EAAY,MAErC1B,EAAShC,QAAQ0D,EAAY,KAC9B,CAAE,MAAOhb,GACRuE,QAAQC,MAAMxE,EACf,KAGMmT,CACR,KCrCM,MAAM8R,GAEN,OAFMA,GAGJ,SAHIA,GAID,YAJCA,GAKN,OAIDC,GAA6B,IAAI7J,GAAmB,CAAEpS,KAR9C,gBAURkc,GAAa,CAClB9pB,QAASqH,OAAS5H,YAAWH,SAAS,KAAM2C,cACvC3C,EACHA,EAAOU,QAAQiC,IAEfxC,EAAUqE,QACVrE,EAAUsE,OAAO9B,GAClB,EAED8B,OAAQsD,OAAS5H,YAAWH,SAAS,KAAM2C,cACtC3C,EAAQA,EAAOoS,MAAMzP,GACpBxC,EAAUsE,OAAO9B,EAAQ,EAE/B8O,QAAS1J,OAAS5H,YAAWH,SAAS,KAAM2C,cACvC3C,EAAQA,EAAOuS,OAAO5P,GACrBxC,EAAUsR,QAAQ9O,EAAQ,GA6C3B8nB,GAAa1iB,MAAOyQ,IACzB,IACC,IAAI,SAAEd,EAAQ,SAAEkN,GAAapM,EACzBd,aAAoB,SAAeA,EAAS4I,QAAQ9H,SAC7CkS,GAAkBlS,GAE7B,MAAM,OAAEyM,EAAM,QAAEtiB,GAAY6V,EAE5B,IAAKyM,GAAUtiB,EAAS,CACvB,IAAI,SAAEgc,GAAanG,EACnB,MAAMmS,EAAcnS,EAAQd,SAAS5G,WACrC,GAAI6Z,GAAeA,EAAYxrB,OAAS,EAAG,CAC1C,MAAMyrB,EAAoB,IAAIlK,GAAmB,CAAEpS,KAAMgc,GAAkB9R,QAAS,KAAM1G,OAAQ6M,IAC5F4G,QAAmBX,EAASkB,OAAOtN,EAAQ+M,WAAW,CAAEplB,UAAWwC,EAAS+U,SAAUiT,EAAahM,SAAUiM,WAC7GrF,EAAWve,OAClB,CACD,CAEIwR,EAAQ7V,SAAW6V,EAAQ7V,QAAQiR,SAAsC,QAA3B4E,EAAQ7V,QAAQiR,UAAmB4E,EAAQ7V,QAAU6V,EAAQ7V,QAAQmO,WACxH,CAAE,MAAOzL,GACRuE,QAAQC,MAAM,wBAAyBxE,EAAGmT,EAC3C,CACA,OAAOA,CAAO,EAGTkS,GAAoB3iB,MAAOyQ,IAChC,MAAMkM,EAAaP,GAAUO,WACvBvlB,EAASulB,EAAWvlB,OAC1B,IAAK,IAAIE,EAAI,EAAGA,EAAIF,IAAWqZ,EAAQwM,KAAM3lB,IAAK,CACjD,MAAMmlB,EAAYE,EAAWrlB,GAC7B,IACKmZ,EAAQ6M,gBAAgBb,UAAkBA,EAAUlE,QAAQ9H,EACjE,CAAE,MAAOnT,GACRuE,QAAQC,MAAM,sBAAuBxE,EAAGmf,EAAWhM,EACpD,CACD,CACA,OAAOA,CAAO,EAGA,MAAMqS,GACpB,WAAA9kB,EAAY,SAAE2R,EAAQ,KAAExW,GAAS,CAAC,GACjC,GAAIwW,KAAcA,aAAoBiK,IAAW,MAAM,IAAI/a,MAAM,6CAEjE1H,KAAKwY,SAAWA,EAChBxY,KAAKyf,SAAW,IAAI+B,GAAmB,CAAEpS,KAAMgc,GAAa9R,QAAStX,GAAc,CAAC,EAAG4Q,OAAQyY,IAChG,CAcA,YAAMzE,CAAOtN,GACZ,MAAMsS,EAAoBtS,aAAmB,GAC7C,GAAKsS,GAKE,GAAItS,EAAQ2M,OAAQ,MAAM,IAAIve,MAAM,8BAA+B4R,OALlD,CACvB,IAAI,SAAEd,EAAW,KAAI,KAAExW,EAAO,KAAI,UAAEf,EAAS,KAAEkc,EAAI,KAAED,EAAI,OAAEpc,GAAWwY,EACtEd,OAxGyB3P,OAAO2P,EAAUkN,KAC5C,GAAIlN,EAEH,OADAA,QAAiBiK,GAAShJ,KAAKjB,IACfmK,gBACV,GAAI+C,EAASlN,SACnB,aAAakN,EAASlN,SAASmK,gBAGhC,MAAM,IAAIjb,MAAM,iCAAiC,EAgG9BmkB,CAAoBrT,EAAUxY,MAC/C,MAAMyf,EAAW,IAAI+B,GAAmB,CAAEpS,KAAMgc,GAAe9R,QAAStX,EAAM4Q,OAAQ5S,KAAKyf,WAC3FnG,EAAU,IAAI,GAAQ,CAAEmG,WAAUiG,SAAU1lB,KAAMwY,SAAUA,EAAUvX,YAAWkc,KAAMA,GAAclc,EAAWic,KAAMA,GAAc,UAAWpc,UAChJ,CAWA,OATiBwY,EAAQd,oBACDvG,WAAYsZ,GAAWjS,QA3FzBzQ,OAAOyQ,IAC9B,IAAI,SAAEd,EAAQ,SAAEiH,GAAanG,EAC7B,IAAKd,GAA+B,GAAnBA,EAASvY,OAAa,OAAOqZ,EAE9C,IAAI7V,EAAU,GACd,IAAK,IAAIqoB,KAAgBtT,EAAU,CAClCsT,EAAavK,YACb,MAAMwK,EAAe,IAAIvK,GAAmB,CAAEpS,KAAMgc,GAAa9R,QAAS,KAAM1G,OAAQ6M,IAClFuM,QAAoBT,GAAWjS,EAAQ+M,WAAW,CAAE7N,SAAUsT,EAAcrM,SAAUsM,WACtFC,EAAYlkB,QAClB,MAAMyL,EAAOyY,EAAYvoB,QACrB8P,IACCA,aAAgB5P,QAAOF,EAAUA,EAAQmT,OAAOrD,IAChDA,aAAgBrB,UAAYqB,aAAgBpB,eAAgB1O,EAAUA,EAAQmT,OAAOjT,MAAMC,KAAK2P,IAC3FA,aAAgBtB,MAAMxO,EAAQI,KAAK0P,GAE9C,CAGA,OADA+F,EAAQ7V,QAA4B,GAAlBA,EAAQxD,OAAcwD,EAAU,KAC3C6V,CAAO,EAyEF2S,CAAgB3S,QApGVzQ,OAAOyQ,IACzB,GAAIA,EAAQ7V,QAAS,CACpB,MAAMyoB,EAAaZ,GAAWhS,EAAQ4D,MACtC,IAAKgP,EAAY,MAAM,IAAIxkB,MAAM,QAAU4R,EAAQ4D,KAAO,6BACpDgP,EAAW5S,EAClB,GAiGO6S,CAAW7S,GAEZsS,SACEtS,EAAQxR,QAERwR,CACR,CAEA,kBAAa8S,EAAM,SAAE5T,EAAQ,KAAExW,GAAS,CAAC,GAIxC,OAHIwW,GAAYA,aAAoBlR,UAASkR,QAAiBA,GAE9DA,EAAWA,QAAiBiK,GAAShJ,KAAKjB,GAAY,KAC/C,IAAImT,GAAS,CAAEnT,WAAUxW,QACjC,CAEA,mBAAa4kB,EAAO,UAAE3lB,EAAS,KAAEe,EAAI,SAAEwW,EAAQ,KAAE0E,EAAI,OAAEpc,IAEtD,OADiB,IAAI6qB,GAAS,CAAEnT,WAAUxW,SAC1B4kB,OAAO,CAAE3lB,YAAWic,OAAMpc,UAC3C,EClKD,MAAMurB,GAAOrN,GAAwB,OAC/BsN,GAAStN,GAAwB,SAEjCuN,GAAY,ICVH,MACd,WAAA1lB,GACCsU,GAASnb,KAAM,UAAW,IAAIY,QAC/B,CAEA,IAAAoB,CAAKwqB,GACJ,IAAIxqB,EAAOhC,KAAKysB,QAAQxqB,IAAIuqB,GAK5B,OAJKxqB,IACJA,EAAO,CAAC,EACRhC,KAAKysB,QAAQtqB,IAAIqqB,EAAWxqB,IAEtBA,CACR,CAEA,KAAAM,CAAMkqB,EAAW/e,EAAKnL,GACrB,GAAwB,GAApBkH,UAAUvJ,OAAa,OAAOD,KAAKgC,KAAKwqB,GAAW/e,QAC9B,IAAVnL,SAA8BtC,KAAKgC,KAAKwqB,GAAW/e,GAC7DzN,KAAKgC,KAAKwqB,GAAW/e,GAAOnL,CAClC,CAEA,OAAA8a,GACCpd,KAAKysB,QAAQpqB,OAAOmqB,UACrB,GDVK,GAAY,OACZ,GAAa,CAAC,IACpB,MAAME,WAAa,GAElB,6BAAWtI,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAO,EACR,CAEA,WAAA3V,CAAYwd,GACX9Y,MAAM8Y,GAAW,CAAC,EACnB,CAEA,QAAIjV,GACH,OAAOpP,KAAKgB,KAAK,GAClB,CAEA,OAAI2rB,GACH,OAAON,GAAKrsB,KACb,CAEA,OAAI2sB,CAAIA,GACPN,GAAKrsB,KAAM2sB,EACZ,CAEA,SAAI7I,GACH,OAAOwI,GAAOtsB,KACf,CAEA,aAAMkW,EAAQ,MAAE4N,EAAK,QAAExK,EAAO,KAAEiL,EAAI,QAAEE,GAAU,IAC/C,GAAIF,EAAM,MAAM,IAAI7c,MAAM,2CAE1B4kB,GAAOtsB,KAAM8jB,GACb,MAAM,KAAE3G,EAAI,IAAEwP,GAAQ3sB,KACtBmd,EAAK7X,QAEL,IAAIkY,EAAYsG,EAAMU,SAAW+H,GAAUjqB,MAAMwhB,EAAO,aAAe,KACnEW,IAAYjH,GACfA,QAAkBsG,EAAMtG,YACpBA,aAAqBiF,UAClBkJ,GAAS/E,OAAO,CACrB3lB,UAAWkc,EACXnb,KAAM,CACL4qB,MAAO5sB,KACP6sB,KAAMF,EACNG,OAAQH,EAAII,MACZC,OAAQlJ,EACRmJ,SAAU3T,GAEXd,SAAUgF,IAEXA,EAAYtL,SAAStO,KAAKuZ,EAAKvL,cAE3B4L,aAAqBkP,KACxBlP,EAAUmP,IAAMA,EAChBnP,EAAU1V,MAAM0C,MAAK,KACpBgT,EAAUtH,QAAQ,CAAE4N,QAAOxK,UAASiL,KAAMvkB,MAAO,KAGnDmd,EAAK5X,OAAOiY,IAGTsG,EAAMU,UAAU+H,GAAUjqB,MAAMwhB,EAAO,YAAatG,KAEpDA,aAAqBkP,KACxBlP,EAAUmP,IAAMA,EAChBnP,EAAU1V,MAAM0C,MAAK,KACpBgT,EAAUtH,QAAQ,CAAE4N,QAAOxK,UAASiL,KAAMvkB,MAAO,KAGnDmd,EAAK5X,OAAOiY,GAEd,EAED,GAAOkP,IACP,YE/EMQ,GAAQlO,GAAwB,QAChCmO,GAASnO,GAAwB,SAEjCxC,GAAWyB,GAAW,eAEfmP,GAAa,QACb,GAAY,OAEnBC,GAAY,CAACV,EAAKvd,KACvB,MAAMiF,EAAW,GAAG,GAAMmI,kBAAkBpN,MAC5C,OAAOud,EAAIzrB,KAAKmT,GAAUlT,OAAO,EAS5BmsB,GAAW,CAACX,EAAKvd,KACtB,IAAImV,EAAO,KACX,GAAInV,EAAM,CACT,MAAM5M,EAASmqB,EAAIxP,KAAKjc,KAAK,gBAAgBkO,OAAUjO,QACnDqB,GAA2B,GAAjBA,EAAOvC,SAAaskB,EAAO/hB,EAAOrB,QACjD,CAMA,OAJKojB,IAAMA,EAbQ,EAACoI,EAAKvd,IAClBsP,GAAmBiO,EAAIxP,MAAO5J,GAC7BA,aAAgB,KAAiB,MAARnE,GAAgBmE,EAAKnE,MAAQA,KAW5Cme,CAAYZ,EAAKvd,IAE/BmV,IAAMA,EAAKoI,IAAMA,GAEdpI,CAAI,EAGNiJ,GAAoB3kB,MAAOyQ,EAASqT,KACzC,IACC,OAAO,GAASlP,QAAQnE,EAASqT,EAAII,MAAO,KAC7C,CAAE,MAAO5mB,GACR,OAAO,IACR,GAGK,GAAa,CAACinB,GAAY,IAEhC,MAAMK,WAAoB,GACzB,6BAAWrJ,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOA,EACR,CAEA,WAAA3V,CAAYwd,GACX9Y,MAAM8Y,GAAW,CAAC,GAElBrkB,KAAKmd,KAAKra,GAAG,CAAC,GAAawc,KAAiBzW,MAAO9F,IAClD/C,KAAK8jB,MAAM,CAAEA,MAAO/gB,EAAMjC,QAAS,IAGpCd,KAAK8C,GAAG2Z,GAAyB2Q,GAAYptB,OAAO,KAC/CA,KAAK+jB,aAAaqJ,KAAaptB,KAAK8jB,MAAM,CAAEA,MAAO9jB,KAAKgB,KAAKosB,KAAc,GAEjF,CAEA,UAAMjX,SACC5K,MAAM4K,OACZnW,KAAK8H,MAAM0C,MAAK,KACXxK,KAAK+jB,aAAaqJ,KAAaptB,KAAK8jB,MAAM,CAAEA,MAAO9jB,KAAKgB,KAAKosB,KAAc,GAEjF,CAEA,YAAMM,GACL,OAAO1tB,KAAKmd,KAAKjc,KAAK,GAAMsb,SAC7B,CAEA,WAAMsH,EAAM,MAAEA,EAAK,QAAEW,EAAU,KAAI,QAAEnL,EAAU,KAAI,KAAEiL,EAAO,OAG3D,SAFMvkB,KAAK8H,MAEa,GAApB0B,UAAUvJ,OAAa,OAAOD,KAAKukB,KAAKT,MAE5C,GAAqB,iBAAVA,EAAoBA,EAAQuJ,GAAUrtB,KAAM8jB,QAClD,GAAIA,aAAiB,GACzBW,EAAqB,MAAXA,EAAkBA,EAAUX,EAAMW,QAC7B,MAAXnL,IAAiBA,QAAgBkU,GAAkB1J,EAAMxK,QAAStZ,OAC1D,MAARukB,IAAcA,EAAOT,EAAMS,MAC/BT,EAAQuJ,GAAUrtB,KAAM8jB,EAAMhjB,aAE1B,KAAMgjB,aAAiB,IAAQ,MAAM,IAAIpc,MAAM,2BAErC,MAAX+c,IAAiBA,GAAU,GACnB,MAARF,IAAcA,EAAOT,EAAMS,MAE/BA,EAAOA,EAAO+I,GAASttB,KAAMukB,GAAQvkB,KAAKukB,MAErCE,GAAWF,EAAKT,OAASA,KAEf,MAAXxK,IAAiBA,QAAgBkU,GAAkB1J,EAAMxK,QAAStZ,OAElEukB,EAAKT,QAAOS,EAAKT,MAAMQ,QAAS,SAC9BC,EAAKrO,QAAQ,CAAE4N,QAAOxK,UAASmL,YACrCX,EAAMQ,QAAS,EAChB,CAEA,QAAIC,GACH,IAAIA,EAAO2I,GAAMltB,MAOjB,OANKukB,IACJA,EAAO+I,GAASttB,KAAMA,KAAKgB,KAAK,KAChCksB,GAAMltB,KAAMukB,GACZA,EAAKoI,IAAM3sB,MAGLukB,CACR,CAEA,SAAIwI,GACH,IAAIA,EAAQI,GAAOntB,MAKnB,OAJK+sB,IACJA,EAAQ,CAAC,EACTI,GAAOntB,KAAM+sB,IAEPA,CACR,EAGD,GAAOU,I,oBCnHJrnB,OAHgB,UAAI,CACrBunB,yBAlBiCC,IACjC,MAAM,aAAEC,EAAY,eAAEC,EAAgBjgB,QAAQ,KAAEuB,IAAWwe,EAE3D,IAAIG,EAAQ,EACZ,IAAuB,IAAnBD,EACH,IAAK,MAAME,KAAOH,EAAc,CAC/B,MAAM,UAAEI,GAAcD,EAClB,aAAeC,EAClBF,GAAgB,EACR,QAAUE,IAClBF,GAAgB,EAClB,CAGD,MAAO,EAAE,SAAWA,GAAOG,OAAO,GAAI9e,EAAK7N,eAAewC,KAAK,KAAK,GCftEqC,OAAOiH,KAAKvN,UAAUquB,QAAU,SAAUC,GACtC,MAAMC,EAAO,IAAIhhB,KAAKrN,MAEtB,OADAquB,EAAKC,QAAQD,EAAKE,UAAYH,GACvBC,CACX,ECJI,kBAAmBG,WACtBA,UACEC,cACAC,SAAS,qBAAsB,CAAE3H,MAAO,OACxCvc,MAAMmkB,IACNjkB,QAAQkgB,IAAI+D,GACRA,EAAIC,WACPlkB,QAAQkgB,IAAI,6BACF+D,EAAIE,QACdnkB,QAAQkgB,IAAI,4BACF+D,EAAIrK,SACd5Z,QAAQkgB,IAAI,yBACZ+D,EAAIrK,OAAOwK,YAAY,kBACxB,IAEAC,OAAOpkB,IAEPD,QAAQkgB,IAAI,4BAA8BjgB,EAAM,ICZnD,MAAMqkB,WAAmChR,GAAgBiR,oBAErD,mBAAWzS,GAAY,MALV,UAK2B,CAExC,WAAA3V,GACI0E,QACAvL,KAAK8C,GAAG,SAAUC,IACvB,MAAM,OAACjC,GAAUiC,EACLjC,EAAOyB,GAVF,mBAWhBQ,EAAMC,kBACMhD,KAAKkvB,QACT,GAER,CAEA,UAAM/Y,SACI5K,MAAM4K,MAChB,CAEA,IAAAE,GACIrW,KAAKkvB,OACT,EAGJ,GAAOF,GAA4B,CAAEG,QAAS,WCtB9C,MAAMC,WAA0B,GAC/B,mBAAW5S,GACV,MALsB,mBAMvB,CAEA,WAAA3V,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACZ,MAAMkZ,QAAatjB,IACnB,GAAIsjB,EAAM,CACT,MAAMC,EAAetvB,KAAKgB,KAfP,YAgBnB,GAAIsuB,EAAc,CACjB,MAAM9W,QAAiBiK,GAAShJ,KAAK,IAAIzP,IAAIslB,EAAc5oB,iBACrDilB,GAAS/E,OAAO,CAAE3lB,UAAWjB,KAAMgC,KAAM,CAAEqtB,QAAQ7W,YAC1D,CACD,MAECxY,KAAK+oB,YAAc,sBAGrB,EAGD,GAAOqG,IAEP,MC/Ba,GAAW,SAKlBG,GAAqB,IAAIvlB,IAAI,GAAGqC,oCAAqD3F,UAE3F,MAAM8oB,WAAwB,GAC7B,mBAAWhT,GACV,OAAO,EACR,CAEA,IAAe,EACf,GAAQ,KAER,WAAA3V,GACC0E,QACAvL,KAAK8C,GAAG,GAAG,0BAAgC,SAC3C9C,KAAK8C,GAAG,GAAG,yBAA+B,QAC3C,CAEA,UAAMqT,GAEL,SADM5K,MAAM4K,QACPnW,MAAK,EAAc,CACvB,MAAMwY,QAAiBiK,GAAShJ,KAAK8V,UAC/B5D,GAAS/E,OAAO,CAAE3lB,UAAWjB,KAAKmd,KAAM3E,WAAUxW,WAAYhC,KAAKyvB,YAC1E,CACD,CAEA,cAAMA,GACL,IAAKzvB,MAAK,EAAO,CAChBA,MAAK,EAAQ,CACZwO,GAAIxO,KAAKgB,KA/BgB,WAgCzBoO,KAAMpP,KAAKgB,KA/BgB,aAgC3BgjB,IAAKhkB,KAAKgB,KA/BgB,aAkC3B,IAAI8K,QAAiBtF,MAAM,IAAIwD,IAAI,cAAchK,MAAK,EAAMwO,aAAc9H,WAC1EoF,QAAiBA,EAASE,OAC1BhM,MAAK,EAAM0vB,QAAU5jB,EAAS9J,IAC/B,CAEA,OAAOhC,MAAK,CACb,EAGD,GAAOwvB,IACP,MC3CMG,GAAgB9mB,MAAOzB,EAAKkB,KACjC,MAAMwD,QAAiBtF,MAPV,CAACY,GACNA,aAAe4C,IAEb5C,EADI,IAAI4C,IAAI5C,EAAKV,UAKEkpB,CAAMxoB,GAAMkB,GACzC,OAAGwD,EAAS+jB,IAAM/jB,EAAS0B,QAAU,UACvBzB,IAEPD,CAAQ,EAGHgkB,GAAUjnB,MAAOzB,IAC1B,MAAM0E,QAAiB6jB,GAAcvoB,EAAK,CAAC4B,QAAQ,CAAC,eAAgB,sBACpE,GAAG8C,EAAS0B,OAAS,IACpB,OAAO1B,EAASE,MAAM,EAGd+jB,GAAWlnB,MAAOzB,EAAKpF,KAChC,MAAM8J,QAAiB6jB,GAAcvoB,EAAK,CAACwB,OAAQ,OAAQI,QAAQ,CAAC,eAAgB,oBAAqBzI,KAAMoN,KAAKC,UAAU5L,KAC9H,GAAG8J,EAAS0B,OAAS,IACjB,OAAO1B,EAASE,MAAM,EAGjBgkB,GAAannB,MAAOzB,UACvBuoB,GAAcvoB,EAAK,CAACwB,OAAQ,SAAUI,QAAQ,CAAC,eAAgB,qBAAqB,ECtB9F,IAAIinB,GAAY,EAChB,MAAMC,GAAW,MAChB,IAAIR,EAAU,KACd,OAAO7mB,WACS,MAAX6mB,GAAmBO,GAAY5iB,KAAKC,SACvCoiB,EAAUS,KACVF,GAAY5iB,KAAKC,MARA,YAULoiB,EAEd,EATgB,GAWXS,GAActnB,UACnB,MAAM6mB,EAAU,IAAIxtB,IACd4J,SAAkBgkB,GAlBR,iBAkB2B9tB,KAC3C,IAAK,MAAM6L,KAAU/B,EACpB4jB,EAAQvtB,IAAI,GAAG0L,EAAOW,KAAMX,GAE7B,OAAO6hB,CAAO,EAmBFU,GAAYvnB,MAAOwnB,IAE/B,IAAIxiB,SADgBqiB,MACDjuB,IAAI,GAAGouB,KAO1B,OANKxiB,IACJA,QAAeiiB,GA5CM,CAACthB,GAAO,gBAAgBA,IA4CtB8hB,CAAeD,IAClCxiB,IACHqiB,KAAWriB,EAAOW,IAAMX,IAGnBA,CAAM,EChDR0iB,GAAiB,GAAGlkB,wBAIpBmkB,GAAgB/N,GAAShJ,KAAK,IAAIzP,IAAI,GAAGumB,mBAAgC7pB,WAE/E,MAAM+pB,WAA0B,GAC/B,mBAAWjU,GACV,MAPsB,UAQvB,CAEA,IAAe,EAEf,WAAA3V,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACPnW,MAAK,UACHA,KAAK4mB,SACF5mB,MAAK,GAAe,EAE/B,CAEA,YAAI0wB,GACH,OAAO7J,SAAS7mB,KAAKgB,KAxBA,aAyBtB,CAEG,YAAM4lB,GACF,MAAMpO,QAAiBgY,GACvB3iB,QAAeuiB,GAAUpwB,KAAK0wB,gBAC9B/E,GAAS/E,OAAO,CAAE3lB,UAAWjB,KAAKmd,KAAM3E,WAAUxW,KAAM,CAAC6L,WAC7D,EAGJ,GAAO4iB,IACP,MCxCM,GAAW,iBAEX,GAAQ,IAAIvuB,IAELyuB,GAAe9nB,UACxB,IAAI+nB,EAAY,KAChB,GAAiB,GAAd,GAAMluB,KAAU,CACfkuB,SAAmBd,GAAQ,KAAW9tB,KACtC,IAAI,MAAM6uB,KAAYD,EAClB,GAAMzuB,IAAI0uB,EAASriB,GAAIqiB,EAC/B,KACK,CACDD,EAAY,GACZ,IAAI,MAAOnjB,EAAKojB,KAAa,GACzBD,EAAU/sB,KAAKgtB,EACvB,CACA,OAAOD,CAAS,EAGPE,GAAcjoB,MAAO2F,IAC9B,GAAG,GAAMsQ,IAAItQ,GACT,OAAO,GAAMvM,IAAIuM,GAErB,MAAMqiB,QAAkBf,GAAQ,GAAG,MAAYthB,KAG/C,OAFA,GAAMrM,IAAI0uB,EAASriB,GAAIqiB,GAEhBA,CAAQ,EC5BNE,GAAkB,KAGlBC,GAA4B,IAE5BC,GAAgB,GAAGF,SACnBG,GAAyB,GAAGH,kBAC5BI,GAAgB,GAAGJ,SACnBK,GAAiB,GAAGL,UACpBM,GAAqB,GAAGN,cAExBO,GAAgB,GAAGP,SACnBQ,GAAoB,GAAGR,SACvBS,GAAmB,GAAGT,QACtBU,GAAuB,GAAGV,YAC1BW,GAA0B,GAAGX,eAE7BY,GAAsB,GAAGZ,iBACzBa,GAAgB,GAAGb,SAEnBc,GAAsB,GAAGd,eACzBe,GAAmB,GAAGf,YAEtBgB,GAAmB,GAAGhB,YACtBiB,GAAwB,GAAGjB,iBAC3BkB,GAAwB,GAAGlB,iBAE3BmB,GAA2B,GAAGnB,oBAC9BoB,GAA0B,GAAGpB,mBAG7BqB,GAAiB,OACjBC,GAAuB,aACvBC,GAAkB,QAClBC,GAAoB,UACpBC,GAAqB,WAcrBC,GAAe1B,UAGf2B,GAAoB,GAAGD,gBAEvBE,GAAiC,GAHd,GAAGF,8BAItBG,GAAe,GAAGH,WAClBI,GAAuB,GAAGJ,mBAE1BK,GAAgC,GAAGL,4BAGnCM,GAAqB,GAAGN,iBACxBO,GAA2B,GAAGP,kBAC9BQ,GAAoB,GAAGR,gBACvBS,GAAqB,GAAGT,iBACxBU,GAAwB,GAAGV,oBAC3BW,GAA4B,GAAGX,yBAE/BY,GAA0B,GAAGZ,sBAC7Ba,GAAsB,GAAGb,kBAEzBc,GAAyB,GAAGd,qBAC5Be,GAAqB,GAAGf,iBAExBgB,GAA+B,GAAGhB,2BAClCiB,GAA2B,GAAGjB,uBAE9BkB,GAA4B,GAAGlB,wBAC/BmB,GAAwB,GAAGnB,oBAE3BoB,GAA6B,GAAGpB,yBAChCqB,GAA4B,GAAGrB,wBAC/BsB,GAA+B,GAAGtB,2BAGlCuB,GACE,SADFA,GAEI,QAKJ,GAAiB,OACjBC,GAAqB,WACrBC,GAAmB,SACnBC,GAAkB,QAElBC,GAAiB,OACjBC,GAA6B,mBAC7BC,GAAoC,0BACpCC,GAAqB,WAErBC,GAAsB,YACtBC,GAAmB,SACnBC,GAAqB,WACrBC,GAAqB,WACrBC,GAA+B,qBAC/BC,GAAqB,WACrBC,GAAoB,WACpBC,GAAkB,QAClBC,GAAoB,UACpBC,GAAqB,WACrBC,GAA4B,kBAC5BC,GAA8B,oBAC9BC,GAAgB,MAChBC,GAAgB,MAChBC,GAAqB,WCjFlC,SAhCA,MAEI,GACA,GAEA,WAAAzuB,CAAY0uB,GACRv1B,MAAK,EAAQu1B,CACjB,CAEA,aAAIrqB,GAIA,OAHIlL,MAAK,IACLA,MAAK,EAAaA,MAAK,EAAMgB,KAAKwzB,MAAwB,GAEvDx0B,MAAK,CAChB,CAEA,cAAMw1B,CAASxzB,GACX,MAAMuzB,EAAOv1B,MAAK,EAClB,IAAIkL,EAAYlL,KAAKkL,UACrB,MAAMuqB,EAAUF,EAAKrqB,UASrB,OALAA,GAAYA,SAAkBsW,GAAmB/D,QAAQvS,EAAWlJ,GAAM,GACvEkJ,GAAauqB,IACZF,EAAKrqB,UAAYA,GAGdA,CACX,GCEJ,SA/BA,MACC,GACA,GAAa,KAEb,WAAArE,CAAY0uB,GACXv1B,MAAK,EAAQu1B,CACd,CAEA,aAAIrqB,GAIH,OAHuB,MAAnBlL,MAAK,IACRA,MAAK,EAAaA,MAAK,EAAMgB,KAAK4zB,KAAiC,IAE7D50B,MAAK,CACb,CAEA,cAAMw1B,CAASxzB,GACR,IAAI0zB,GAAW,EACrB,MAAMD,EAAUz1B,MAAK,EAAM01B,SAU3B,OALgB11B,KAAKkL,YACXwqB,QAAiBlU,GAAmB/D,QAAQzd,KAAKkL,UAAWlJ,GAAM,IAExE0zB,GAAYD,IAASz1B,MAAK,EAAM01B,SAAWA,GAExCA,CACR,GCgCD,SApDA,MACC,GACA,GAAe,IAAIza,IACnB,GAAW,IAAIA,IAEf,WAAApU,CAAY0uB,GACXv1B,MAAK,EAAQu1B,EACbA,EAAKzyB,GAAG2wB,IAA+B1wB,IACtCA,EAAMC,kBACNhD,MAAK,EAAa4V,IAAI7S,EAAMjC,OAAO,IAGpCy0B,EAAKzyB,GAAG4wB,IAA2B3wB,IAClCA,EAAMC,kBACNhD,MAAK,EAAaqC,OAAOU,EAAMjC,OAAO,GAExC,CAEA,mBAAA60B,CAAoBC,GACnB51B,MAAK,EAAS4V,IAAIggB,EACnB,CAEA,cAAMJ,CAASxzB,GACd,MAAMuzB,EAAOv1B,MAAK,EACZ61B,EAAU71B,MAAK,EACf81B,EAAc91B,MAAK,GAEnB,SAAEwZ,EAAQ,SAAEuc,EAAQ,UAAE7qB,EAAS,SAAEwqB,IADlB11B,MAAK,EAAMg2B,MACoBh2B,MAAK,GAGzD,IAAIg2B,GAAQ,EACZ,GAAI9qB,EAAW,CACd8qB,GAAQD,GAAWvc,OAxCY3Q,OAAOitB,EAAa9zB,EAAMuzB,KAC3D,IAAIS,GAAQ,EACZ,IAAK,IAAIxX,KAASsX,QACLtX,EAAM,CAAExc,OAAMuzB,WAAUS,GAAQ,GAE7C,OAAOA,CAAK,EAqCEC,CAA0BJ,EAAS7zB,EAAMuzB,KAAQS,GAAQ,GAErE,IAAK,IAAIJ,KAAcE,EACtB,GAAIE,GAASxc,EAAU,CACtB,MAAMkR,QAAalJ,GAAmB/D,QAAQmY,EAAW1qB,UAAWlJ,GAAM,GAC1E4zB,EAAWtR,QAAUoG,EAChBA,IAAMsL,GAAQ,EACpB,MAAOJ,EAAWtR,QAAS,CAE7B,CAKA,OAHAiR,EAAKS,MAAQA,EAGNA,CACR,GC5BD,SA1BA,MAEI,GAAY,IAAI/a,IAEhB,WAAApU,CAAY0uB,GACRA,EAAKzyB,GAAG6wB,IAA4B5wB,IAChCA,EAAM8hB,iBACN9hB,EAAMC,kBACN,MAAMlC,EAASiC,EAAMjC,OACrBd,MAAK,EAAU4V,IAAI9U,EAAO,IAG9By0B,EAAKzyB,GAAG8wB,IAAwB7wB,IAC5BA,EAAM8hB,iBACN9hB,EAAMC,kBACN,MAAMlC,EAASiC,EAAMjC,OACrBd,MAAK,EAAUqC,OAAOvB,EAAO,GAErC,CAEA,cAAM00B,CAASxzB,GACX,IAAI,IAAIk0B,KAAWl2B,MAAK,EACpBk2B,EAAQC,OAAOn0B,EACvB,GC7BS,GAAWM,GACP,MAATA,QAAkC,IAAVA,ECGnBqd,GAAa9W,MAAO7G,EAAMoN,EAAM9M,KACvC,GAAQA,KACR8M,EAAMgnB,GAAYp0B,EAAMoN,EAAM9M,GAC7B2G,OAAOotB,OAAOr0B,EAAMM,IAEnBN,GAGKs0B,GAAwBztB,MAAO/E,EAAKyyB,KAEhD,IAAIv0B,EAAO,CAAC,EACZ,GAAIu0B,EACH,IAAK,IAAIC,KAASD,EAAY,CAC7B,MAAMnnB,EAAOonB,EAAMpnB,KACb9M,EAAQwB,EAAI7B,IAAIu0B,GACtBx0B,QAAa2d,GAAW3d,EAAMoN,EAAM9M,EACrC,MAEA,IAAK,KAAK,KAAE8M,GAAQ9M,KAAUwB,EAC7B9B,QAAa2d,GAAW3d,EAAMoN,EAAM9M,GAItC,OAAON,CAAI,EA+BNy0B,GAAgB,MACTL,GAAc,SAAUp0B,EAAMoN,EAAM9M,GAChD,MAAMsZ,EAAQxM,EAAK5L,MAAMizB,IACzB,GAAwB,GAApBjtB,UAAUvJ,OAAa,OAAOqE,GAAStC,EAAM4Z,GAEjD,MAAM8a,EAAM,GAAQp0B,GACpB,OAAI,GAAQN,IAAS00B,EAAY10B,EAE1B20B,GAASD,EAAK10B,EAAMM,EAAOsZ,EACnC,EAEM+a,GAAW,CAAC9kB,EAAQ7P,EAAMM,EAAOsZ,KACtC,GAAI,GAAQ5Z,IAAS6P,EAAQ,OAAO,KAEpC,MAAMzC,EAAOwM,EAAM5T,QASnB,OARoB,GAAhB4T,EAAM3b,OACL4R,SAAe7P,EAAKoN,GACnBpN,EAAKoN,GAAQ9M,GAEd,GAAQN,EAAKoN,MAAQpN,EAAKoN,GAAQ,CAAC,GACvCunB,GAAS9kB,EAAQ7P,EAAKoN,GAAO9M,EAAOsZ,IAG9B5Z,CAAI,EAGNsC,GAAW,CAACtC,EAAM4Z,KACvB,GAAI,GAAQ5Z,GAAO,OAAO,KAC1B,GAAoB,GAAhB4Z,EAAM3b,OAAa,OAAO+B,EAE9B,MAAMoN,EAAOwM,EAAM5T,QACnB,OAAO1D,GAAStC,EAAKoN,GAAOwM,EAAM,EC9CtBgb,GAAoB,CAAC91B,EAAQwjB,EAAQuS,GAAU,KAC3D,MAAMC,EAAWh2B,EAAOwjB,OACxBA,EAASxjB,EAAOE,KAAKyzB,GAAkB,IAAM3zB,EAAOE,KAAKyzB,GAAkB,OACvEqC,GAAYxS,GAAUuS,IAAS/1B,EAAO8P,QAAQijB,GAA2B,EAGjEkD,GAAsB,CAACj2B,EAAQk2B,EAAUH,GAAU,KAC/D,MAAMC,EAAWh2B,EAAOk2B,SACpBA,EACHl2B,EAAOE,KAAK6zB,GAAoB,IAEhC/zB,EAAOE,KAAK6zB,GAAoB,OAE7BiC,GAAYE,GAAYH,IAAS/1B,EAAO8P,QAAQmjB,GAA6B,ECjC5EkD,GAAQjY,GAAwB,QAChC,GAAa,CAACyV,GAAkBI,GAAoBL,GAAqBU,GAA2BC,GAA6BP,IA+GvI,SA7GA,cAAmB,GAClB,6BAAWxQ,GACV,OAAO,EACR,CAEA,GACA,GACA,GACA,GAEA,WAAAvd,GACC0E,QACAvL,MAAK,EAAiB,IAAI,GAAcA,MACxCA,MAAK,EAAmB,IAAI,GAAgBA,MAC5CA,MAAK,EAAkB,IAAI,GAAeA,MAC1CA,MAAK,EAAoB,IAAI,GAAiBA,KAC/C,CAEA,aAAAk3B,CAActB,GACb51B,MAAK,EAAkB21B,oBAAoBC,EAC5C,CAEA,cAAMJ,CAASxzB,GAEdhC,KAAKgB,KAAKi0B,GAAoB,IAC9B,MAAM3b,EAAUrQ,OAAOotB,OAAO,CAAC,EAAGr0B,OFTN6G,OAAO0sB,UAC9BA,EAAKztB,MACX,MAAM9F,EAAO,CAAC,EACdA,EAAKgyB,IAA4BmD,GAAO5B,GAExC,IAAI6B,EAAM7B,EAAK3iB,OAAO4e,IAClBvP,EAAOjgB,EACX,KAAOo1B,GACNnV,EAAK+R,UAAoCmD,GAAOC,GAChDnV,EAAOA,EAAK+R,IACZoD,EAAMA,EAAIxkB,OAAO4e,IAGlB,OAAOxvB,CAAI,EEJoCq1B,CAAer3B,OAQ7D,aAPMA,MAAK,EAAiBw1B,SAASlc,SAC/BtZ,MAAK,EAAgBw1B,SAASlc,SAC9BtZ,MAAK,EAAkBw1B,SAASlc,GACtCtZ,KAAKgB,KAAKi0B,GAAoB,YAExBj1B,MAAK,EAAew1B,SAASlc,GAE5BtZ,KAAKg2B,KACb,CAEA,QAAIsB,GACH,IAAIA,EAAOL,GAAMj3B,MAKjB,OAJKs3B,IACJA,EAAOt3B,KAAK4S,OAAOqe,IACnBgG,GAAMj3B,KAAMs3B,IAENA,CACR,CAEA,UAAIhT,GACH,OAAOtkB,KAAK+jB,aAAa0Q,GAC1B,CAEA,UAAInQ,CAAOA,GACMtkB,KAAKskB,QACNA,IACdsS,GAAkB52B,KAAMskB,GACxBtkB,KAAKu3B,gBAEP,CAEA,mBAAMA,GAAiB,CAEvB,YAAIP,GACH,OAAOh3B,KAAK+jB,aAAa8Q,GAC1B,CAEA,YAAImC,CAASA,GACRh3B,KAAK01B,SAGRqB,GAAoB/2B,KAAMg3B,GAAWh3B,KAAK8H,MAAMqU,UAFhD4a,GAAoB/2B,MAAM,GAAOA,KAAK8H,MAAMqU,UAG7Cnc,KAAKw3B,iBACN,CAEA,qBAAMA,GAAmB,CAEzB,YAAI9B,GACH,OAAO11B,KAAK+jB,aAAa4Q,GAC1B,CAEA,YAAIe,CAASA,GD5CqB,EAAC50B,EAAQ40B,EAAUmB,GAAU,KAC/D,MAAMC,EAAWh2B,EAAO40B,SACpBA,EACH50B,EAAOE,KAAK2zB,GAAoB,IAEhC7zB,EAAOE,KAAK2zB,GAAoB,OAE7BmC,GAAYpB,GAAYmB,IAAS/1B,EAAO8P,QAAQmjB,GAA6B,ECsChF0D,CAAoBz3B,KAAM01B,GAAW11B,KAAK8H,MAAMqU,UAChDnc,KAAK03B,kBACL13B,KAAKg3B,UAAYtB,CAClB,CAEA,qBAAMgC,GACN,CAEA,aAAIxsB,CAAUA,GDpFqB,IAACpK,EAAQk1B,EAARl1B,ECqFdd,UDpFD,KADuBg2B,ECqFhB9qB,IDpFiB,MAAT8qB,GACnCl1B,EAAOE,KAAKm0B,GAA6B,MACzCr0B,EAAOE,KAAKk0B,GAA2B,OAC7Bc,GACVl1B,EAAOE,KAAKm0B,GAA6B,MACzCr0B,EAAOE,KAAKk0B,GAA2B,MAEvCp0B,EAAOE,KAAKk0B,GAA2B,MACvCp0B,EAAOE,KAAKm0B,GAA6B,KAG1Cr0B,EAAO8P,QAAQkiB,IC0Ed9yB,KAAK23B,kBACN,CAEA,aAAIzsB,GACH,OAAQlL,KAAK+jB,aAAaoR,GAC3B,CAEA,sBAAMwC,GAAoB,CAE1B,SAAI3B,CAAMA,GD9GqB,EAACl1B,EAAQk1B,UACnB,IAAVA,GAAkC,MAATA,GACnCl1B,EAAOE,KAAKg0B,GAAmB,MAC/Bl0B,EAAOE,KAAK+zB,GAAiB,OACnBiB,GACVl1B,EAAOE,KAAKg0B,GAAmB,MAC/Bl0B,EAAOE,KAAK+zB,GAAiB,MAE7Bj0B,EAAOE,KAAKg0B,GAAmB,IAC/Bl0B,EAAOE,KAAK+zB,GAAiB,OAG9Bj0B,EAAO8P,QAAQkjB,GAA0B,ECmGxC8D,CAAiB53B,KAAMg2B,GACvBh2B,KAAK63B,cACN,CAEA,SAAI7B,GACH,OAAOh2B,KAAK+jB,aAAagR,GAC1B,CAEA,kBAAM8C,GAAe,GC/HhBC,GAAU9Y,GAAwB,UAC3BmY,GAASnY,GAAwB,SAExC,GAAa,CAAC,GAAgBuV,GAAoBO,IAgBxD,MAAM,WAAkB,GACvB,6BAAW1Q,GACV,OAAO,GAAWxN,OAAO,GAAKwN,mBAC/B,CAEA,WAAAvd,CAAYsX,EAAU,CAAC,GACtB5S,MAAM4S,GACN,MAAM,MAAC7b,GAAS6b,EAChBgZ,GAAOn3B,KAAMsC,GAAS,KACvB,CAEA,UAAM6T,GACLnW,KAAK8H,MAAM0C,MAAK,IAAMxK,KAAK4Q,QAAQyiB,YAC7B9nB,MAAM4K,MACb,CAEA,aAAMiH,GACLpd,KAAK+3B,aAAa,YACZxsB,MAAM6R,UACZpd,KAAK4Q,QAAQ0iB,GACd,CAEA,eAAI0E,GACH,IAAIplB,EAASklB,GAAQ93B,MAKrB,OAJK4S,IACJA,EAvC4B,CAAC4jB,IAC/B,IAAI5jB,EAAS4jB,EAAM3jB,WACnB,KAAOD,GAAQ,CACd,GAAIA,aAAkB,GAAW,OAAOA,EAExCA,EAASA,EAAOC,UACjB,CACA,OAAO,IAAI,EAgCAolB,CAAgBj4B,MACzB83B,GAAQ93B,KAAM4S,IAERA,CACR,CAEA,sBAAM+kB,GAEL,OADA33B,KAAKskB,OAAStkB,KAAKkL,UACZlL,KAAK+3B,cACb,CAEA,QAAI3oB,GACH,OAAOpP,KAAKmV,aAAa,GAC1B,CAEA,YAAI4gB,GACH,OAAO/1B,KAAK+jB,aAAawQ,GAC1B,CAEA,YAAI/a,GACH,OAAQxZ,KAAK+jB,aAAa+Q,GAC3B,CAEA,WAAMxyB,CAAMA,GACX,MAAM,UAAC4I,EAAS,MAAE8qB,EAAK,MAAEluB,GAAS9H,KAGlC,GAAwB,GAApBwJ,UAAUvJ,OACb,OAASiL,GAAc8qB,EAAemB,GAAOn3B,MAAd,WAE1B8H,EACN,MAAMowB,EAAef,GAAOn3B,MAE5B,SAAUA,KAAKm4B,YAAY71B,IAEtB41B,IADJ51B,QAActC,KAAKo4B,eAAe91B,IAAUA,GACjB,CAC1B,MAAME,QAAexC,KAAKq4B,aAAa/1B,QAClB,IAAXE,IACTF,EAAQE,SACHxC,KAAK+3B,aAAaz1B,EACzB,CAEF,CAEA,cAAMkzB,CAASxzB,GACd,MAAMs2B,EAAmBt4B,KAAKkL,UACxBqtB,EAAev4B,KAAKg2B,MACpBA,QAAczqB,MAAMiqB,SAASxzB,GAC7BkJ,EAAYlL,KAAKkL,UAGvB,OAFAlL,KAAKw4B,uBAAuBF,GAAoBptB,EAAYqtB,GAAgBvC,GAErEA,CACR,CAEA,4BAAMwC,CAAuBC,EAAiBC,IAC3BD,GAAmBC,IAEpC14B,KAAK+3B,cACP,CAEA,kBAAMM,CAAa/1B,GAClB,OAAOA,CACR,CAEA,kBAAMy1B,CAAaz1B,SAEZtC,KAAK8H,MACY,GAApB0B,UAAUvJ,SACZqC,EAAQ60B,GAAOn3B,OAGhB,MAAM24B,ECtHqB,CAACr2B,IAC1B,GAAG,GAAQA,GACP,OAAO,EAEX,MAAMkJ,SAAclJ,EACpB,MAAY,WAATkJ,GAA4C,GAAvBlJ,EAAMjB,OAAOpB,UAElCqC,aAAiB+K,QAEjB/K,aAAiBqB,OAA0B,GAAhBrB,EAAMrC,QAEjCqC,aAAiB2Y,KAAwB,GAAhB3Y,EAAMrC,QAE/BqC,aAAiBJ,KAAwB,GAAhBI,EAAMrC,QAEvB,UAARuL,GAAgE,GAA5CvC,OAAOC,oBAAoB5G,GAAOrC,OAG7C,EDoGE24B,CAAct2B,GACxB4I,EAAYlL,KAAKkL,UArGF,IAACsO,EAuGtBlX,EADiBtC,KAAK+1B,UACF4C,EAAU,KAAOr2B,EAEjC4I,EAGHisB,GAAOn3B,KAAMsC,GAFbA,EAAQ,KA1GakX,GAgHNmf,EAAS34B,KA/GpBgB,KAAK8zB,GAAoBtb,EAAgB,KAAL,IAiHrCxZ,KAAKg4B,kBAAmBh4B,KAAKg4B,YAAYa,kBAAkB74B,KAAMsC,GAC7DtC,KAAKs3B,YAAYt3B,KAAKs3B,KAAKuB,kBAAkB74B,KAAMsC,EAC5D,CAEA,iBAAM61B,CAAY71B,GACjB,OAAO,CACR,CAEA,oBAAM81B,CAAe91B,GACpB,OAAOA,CACR,CAEA,uBAAMu2B,CAAkBrC,EAAOl0B,GAAQ,EAExC,YEjIaw2B,GAAkB,CAAC7oB,EAAQ4U,EAAgB7hB,EAAiB2I,KACrE,IAAI6C,EAAK,KAET,MAAMuqB,EAAoC,mBAAnBlU,EAAgCA,EAAiB,IAAMA,EACxEiB,EAAkC,mBAApB9iB,EAAiCA,EAAkB,IAAMA,EAE7E,OAAQD,IACDg2B,EAAQh2B,IACPA,EAAM8hB,iBACPiB,EAAK/iB,IACJA,EAAMC,kBAEV,MAAMg2B,EAzBe,CAACj2B,IACnB,CACHyI,KAAMzI,EAAMyI,KACZ1K,OAAQiC,EAAMjC,OACdwQ,OAAQvO,EAAMuO,OACd8Y,cAAernB,EAAMqnB,cACrB6O,uBAAwBl2B,EAAMk2B,uBAC9BC,eAAiBn2B,EAAMm2B,eACvBC,WAAYp2B,EAAMo2B,WAClBC,UAAWr2B,EAAMq2B,YAgBCC,CAAct2B,GAE7ByL,GACCrK,aAAaqK,GAEjBA,EAAKpK,YAAW,KACZoK,EAAK,KACLyB,EAAO+oB,EAAU,GAClBrtB,GXrCwB,GWqCO,CAEtC,ECvCW,MAAM2tB,GAEpB,gBAAOC,CAAU/C,GAAQ,OAAO,IAAK,CAErC,GAEA,WAAA3vB,CAAY2vB,EAAOgD,GAClBx5B,KAAKw2B,MAAQA,EACbx2B,KAAKw5B,MAAQA,EACbx5B,KAAKmW,MACN,CAEA,IAAAA,GAAS,CAET,YAAI6gB,CAASyC,GAAY,CAEzB,iBAAMtB,CAAY71B,GACjB,OAAO,CACR,CAEA,oBAAM81B,CAAe91B,GACpB,OAAOA,CACR,CAEA,kBAAM+1B,GACN,CAEA,SAAI/1B,GACH,OAAO,IACR,CAEA,SAAI0zB,GACH,OAAO,CACR,EC9BD,MAEM0D,GAAc,OAuBd7R,GAAU2R,IACR,CACNxe,OAAS1Y,GACgB,iBAAVA,EAEfgC,SAAU,IACFk1B,EAAMG,cAEdhD,SAAWr0B,IACVk3B,EAAMG,cAAgBr3B,CAAK,EAE5Bif,UAAYjf,GACN,GAAQA,IAAWs3B,OAAOC,MAAMv3B,GAE9B,KAF6CA,IAOjDw3B,GAAYN,IACV,CACNxe,OAAS1Y,GACgB,iBAAVA,EAEfgC,SAAU,IACFk1B,EAAMl3B,MAEdq0B,SAAWr0B,IACVk3B,EAAMl3B,MAAQA,CAAK,EAEpBif,UAAYjf,GACPA,GAEG,OAwBJy3B,GAAa,IAAIC,KAAKC,eAAe,UAAY,CACrDC,KAAM,UACNC,OAAQ,YAsBJC,GAAQ,CAAEpY,KAtGFwX,IACN,CACNxe,OAAS1Y,GACgB,iBAAVA,EAEfgC,SAAU,IACFk1B,EAAMl3B,MAEdq0B,SAAWr0B,GACFk3B,EAAMl3B,MAAQA,EAEvBif,UAAYjf,GACPA,IACHA,EAAQA,EAAMjB,QACDpB,OAAS,EAAIqC,EAGpB,OAqFU,gDA3CNk3B,IACN,CACNxe,OAAS1Y,GACDA,aAAiB+K,KAEzB/I,SAAU,IACFk1B,EAAMa,YAEd1D,SAAWr0B,IACVk3B,EAAMa,YAAc/3B,CAAK,EAE1Bif,UAAYjf,GACPA,GAEG,OA6BU,KAlBNk3B,IACN,CACNxe,OAAS1Y,GACDA,aAAiB+K,KAEzB/I,SAAU,IACFk1B,EAAMl3B,MAAQ,IAAI+K,KAAK,cAAcmsB,EAAMl3B,SAAW,KAE9Dq0B,SAAWr0B,IACVk3B,EAAMl3B,MAAQy3B,GAAWO,OAAOh4B,EAAM,EAEvCif,UAAYjf,GACPA,GAEG,OAIU,UCxGpB,MAAM,GAAS0c,GAAwB,SAIjCub,GAAW,CAACxhB,EAAMyhB,IAChB,IAAIlzB,SAAQ,CAACmW,EAASrE,KAC5B,MAAMqhB,EAAS,IAAIC,WACnBD,EAAO/pB,iBAAiB,WAAW,KAClC+M,EAAQ,CACPrO,KAAM2J,EAAK3J,KACX5D,KAAMuN,EAAKvN,KACX9I,KAAMqW,EAAKrW,KACXV,KAAMy4B,EAAOj4B,QACZ,IACA,GACHi4B,EAAOD,GAAYzhB,EAAK,IAMpB4hB,GAAS,CACd,aAAc9xB,MAAOkQ,IACpBA,EAAKuhB,OAAS,aACPvhB,GAER,kBAAmBlQ,MAAOkQ,IACzB,MAAMvW,QAAe+3B,GAASxhB,EAAM,iBAEpC,OADAvW,EAAO83B,OAAS,kBACT93B,CAAM,EAEd,OAAUqG,MAAOkQ,IAChB,MAAMvW,QAAe+3B,GAASxhB,EAAM,iBAGpC,OAFAvW,EAAOR,KAAOQ,EAAOR,KAAKgS,OAAOxR,EAAOR,KAAKoO,QAAQ,KAAO,GAC5D5N,EAAO83B,OAAS,SACT93B,CAAM,GAITo4B,GAAY/xB,MAAOgyB,EAAOP,EAAQQ,KACvC,IAAIt4B,EAAS,GACb,IAAK,IAAIuW,KAAQ8hB,EAChBr4B,EAAOqB,WAAW82B,GAAOL,GAAQvhB,IAElC,OAAqB,GAAjBvW,EAAOvC,OACH,KAGD66B,EAAWt4B,EAASA,EAAO,EAAE,ECjD9B,MAAMu4B,GAAW,CF2GT,cAAmBzB,GACjC,gBAAOC,CAAU/C,GAChB,OAAOA,EAAMt1B,KA9GO,wIA8GaC,OAClC,CAEA,WAAA0F,CAAY2vB,EAAOgD,GAClBjuB,MAAMirB,EAAOgD,EACd,CAEA,IAAArjB,GACC,MAAM,MAAEqgB,EAAK,MAAEgD,GAAUx5B,KACnBwL,GAAQgrB,EAAMx1B,KAAK,eAAiBw4B,EAAMx4B,KAAK,SAAW04B,IAAar4B,OAAOE,cACpFvB,KAAKwL,MAAQ4uB,GAAM5uB,IAAS4uB,GAAMV,KAAcF,GAChDA,EAAM12B,GACL,QACAg2B,IACC,KACCtC,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKo4B,eAAep4B,KAAKsC,OAAO,IAElE,GACA,EACA0uB,KAIFwF,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKo4B,eAAep4B,KAAKsC,OAC3D,CAEA,WAAA61B,CAAY71B,GACX,OAAa,MAATA,QAAkC,IAAVA,GAErBtC,KAAKwL,KAAKwP,OAAO1Y,EACzB,CAEA,cAAA81B,CAAe91B,GACd,OAAa,MAATA,QAAkC,IAAVA,EAA8B,KAEnDtC,KAAKwL,KAAK+V,UAAUjf,EAC5B,CAEA,kBAAM+1B,CAAa/1B,GAEdA,GADiBtC,KAAKwL,KAAKlH,YACJtE,KAAKwL,KAAKmrB,SAASr0B,EAC/C,CAEA,YAAI00B,CAASA,GACZh3B,KAAKw5B,MAAMx4B,KAAK,WAAYg2B,EAAW,GAAK,KAC7C,CAEA,SAAI10B,GACH,OAAOtC,KAAKwL,KAAKlH,UAClB,CAEA,SAAI0xB,GACH,OAAOh2B,KAAKw5B,MAAMwB,eACnB,GG9Jc,cAAuB1B,GACrC,gBAAOC,CAAU/C,GAChB,MAAMgD,EAAQhD,EAAMt1B,KALA,0BAMpB,OAAoB,GAAhBs4B,EAAMv5B,OACF,KAEe,GAAhBu5B,EAAMv5B,OAAcu5B,EAAMr4B,QAAUq4B,CAC5C,CAEA,WAAA3yB,CAAY2vB,EAAOgD,GAClBjuB,MAAMirB,EAAOgD,EACd,CAEA,IAAArjB,GACC,MAAM,MAAEqgB,EAAK,MAAEgD,GAAUx5B,KACzBA,KAAK86B,SAAWtB,aAAiBtnB,SACjCsnB,EAAM12B,GACL,QACAg2B,IACC,KACCtC,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKo4B,eAAep4B,KAAKsC,OAAO,IAElE,GACA,EACA0uB,KAIFwF,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKo4B,eAAep4B,KAAKsC,OAC3D,CAEA,YAAI00B,CAASA,GACZh3B,KAAKw5B,MAAMx4B,KAAK,WAAYg2B,EAAW,GAAK,KAC7C,CAEA,SAAI10B,GACH,MAAMA,EAAQtC,KAAKw5B,MAAMziB,MACzB,KAAMzU,aAAiBJ,KAAM,OAAOI,EACpC,GAAkB,GAAdA,EAAMI,KAAW,OAAO,KAE5B,MAAMa,EAAS,GAKf,OAJAjB,EAAMT,SAASS,IACdiB,EAAOM,KAAKvB,EAAM,IAGZiB,CACR,CAEA,cAAA60B,CAAe91B,GACd,OAAIA,EACCtC,KAAK86B,SAEe,IADvBx4B,EAAQA,EAAMzB,QAAQiB,KAAWA,KACpB7B,OAAcqC,EAAQ,KAE5BA,EAIF,IACR,CAEA,WAAA61B,CAAY71B,GACX,GAAa,MAATA,QAAkC,IAAVA,EAC3B,OAAO,EACH,GAAItC,KAAK86B,SACb,OAAOx4B,aAAiBqB,MACrB,CACH,MAAM6H,SAAclJ,EACpB,MAAgB,WAATkJ,GAA8B,YAATA,CAC7B,CACD,CAEA,YAAA6sB,CAAa/1B,GACZtC,KAAKw5B,MAAMziB,IAAIzU,GAAgB,KAChC,GCvEc,cAAoBg3B,GAClC,gBAAOC,CAAU/C,GAChB,MAAMgD,EAAQhD,EAAMt1B,KARA,uBASpB,OAAoB,GAAhBs4B,EAAMv5B,OACF,KAEDu5B,CACR,CAEA,WAAA3yB,CAAY2vB,EAAOgD,GAClBjuB,MAAMirB,EAAOgD,EACd,CAEA,IAAArjB,GACC,MAAM,MAAEqgB,EAAK,MAAEgD,GAAUx5B,KACnBoP,EAAOonB,EAAMpnB,KAlBbsY,KAAKuT,MAAMvT,KAAKwT,SAAW7tB,KAAKC,OAmBtC,IAAK,IAAI6tB,KAAS3B,EAAO2B,EAAM/rB,KAAOA,EACtCoqB,EAAM12B,GACL,QACAg2B,IACC,KACCtC,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKo4B,eAAep4B,KAAKsC,OAAO,IAElE,GACA,EACA0uB,KAIFwF,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKo4B,eAAep4B,KAAKsC,OAC3D,CAGA,YAAI00B,CAASA,GACZh3B,KAAKw5B,MAAMx4B,KAAK,WAAYg2B,EAAW,GAAK,KAC7C,CAEA,SAAI10B,GACH,MAAMA,EAAQtC,KAAKw5B,MAAMziB,MACzB,OAAMzU,aAAiBJ,IACL,GAAdI,EAAMI,KAAkB,KACrBJ,EAAMiB,SAAS4P,OAAO7Q,MAFOA,CAGrC,CAEA,cAAA81B,CAAe91B,GACd,OAAIA,GAGG,IACR,CAEA,WAAA61B,CAAY71B,GACX,GAAa,MAATA,QAAkC,IAAVA,EAC3B,OAAO,EACJ,CACH,MAAMkJ,SAAclJ,EACpB,MAAgB,WAATkJ,GAA8B,YAATA,CAC7B,CACD,CAEA,YAAA6sB,CAAa/1B,GACZtC,KAAKw5B,MAAMziB,IAAIzU,GAAgB,KAChC,GHfc,cAAmBg3B,GACjC,gBAAOC,CAAU/C,GAChB,OAAOA,EAAMt1B,KArDO,sBAqDaC,OAClC,CAEA,WAAA0F,CAAY2vB,EAAOgD,GAClBjuB,MAAMirB,EAAOgD,EACd,CAEA,UAAMrjB,GACL,MAAM,MAAEqgB,EAAK,MAAEgD,GAAUx5B,KACzBA,KAAK86B,SAAWtB,EAAMsB,SACtB96B,KAAKs6B,OAAS9D,EAAMx1B,KAAK,gBAAkB,aAC3ChB,KAAKo7B,eAAiB5E,EAAMx1B,KAAK,oBACjChB,KAAKo7B,eAAiBp7B,KAAKo7B,eAAiB5E,EAAMt1B,KAAKlB,KAAKo7B,gBAAgBj6B,QAAU,KACtF,MAAM,OAAEm5B,EAAM,SAAEQ,GAAa96B,KAE7Bw5B,EAAM12B,GACL,QACAg2B,IACCjwB,UACC7I,KAAKq4B,mBAAmBuC,GAAUpB,EAAMqB,MAAOP,EAAQQ,IACvDtE,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKsC,MAAM,IAE7C,GACA,IAIEk3B,EAAMqB,OAA+B,GAAtBrB,EAAMqB,MAAM56B,QAC9BD,KAAKq4B,mBAAmBuC,GAAUpB,EAAMqB,MAAOP,EAAQQ,IAExDtE,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKsC,MACvC,CAEA,YAAI00B,CAASA,GACZh3B,KAAKw5B,MAAMx4B,KAAK,WAAYg2B,EAAW,GAAK,KAC7C,CAEA,WAAAmB,CAAY71B,GACX,OAAa,MAATA,QAAkC,IAAVA,IAEnBtC,KAAK86B,SACNx4B,aAAiBqB,MAEC,iBAAXrB,EAChB,CAEA,cAAA81B,CAAe91B,GACd,OAAa,MAATA,QAAkC,IAAVA,EACpB,KACCtC,KAAK86B,SACU,GAAhBx4B,EAAMrC,OAAcqC,EAAQ,KAE5BA,CACT,CAEA,YAAA+1B,CAAa/1B,GAEZ,GAAIA,GADiB,GAAOtC,MACD,CAC1B,GAAOA,KAAMsC,GACTA,IACHtC,KAAKw5B,MAAMl3B,MAAQ,MAEpB,MAAM+4B,EAAWr7B,KAAKo7B,eACtB,GAAIC,IACHA,EAAS/1B,QACNhD,GACF,GAAItC,KAAK86B,SACR,IAAK,IAAI/hB,KAAQzW,EAChB+4B,EAAS91B,OAAO,SAASwT,EAAK3J,oBAI/BisB,EAAS91B,OAAO,SAASjD,EAAM8M,cAInC,CACD,CAEA,SAAI9M,GACH,OAAO,GAAOtC,KACf,CAEA,SAAIg2B,GACH,OAAOh2B,KAAKw5B,MAAMwB,eACnB,GI1Ic,cAAmB1B,GACjC,gBAAOC,CAAU/C,GAChB,OAAOA,EAAMt1B,KAJO,UAIaC,OAClC,CAEA,WAAA0F,CAAY2vB,EAAOgD,GAClBjuB,MAAMirB,EAAOgD,EACd,CAIA,IAAArjB,GACC,MAAM,MAAEqgB,EAAK,MAAEgD,GAAUx5B,KACzBw5B,EAAM12B,GACL,iBACAg2B,IACC,KACCtC,EAAM5lB,QAAQqiB,GAAmBjzB,KAAKsC,MAAM,IAE7C,GACA,EACA0uB,IAKH,CAEA,YAAIgG,CAASA,GACZh3B,KAAKw5B,MAAMx4B,KAAK,WAAYg2B,EAAW,GAAK,KAC7C,CAEA,SAAI10B,GACH,OAAOtC,KAAKo4B,eAAep4B,KAAKw5B,MAAMsB,SAAW96B,KAAKw5B,MAAMziB,MAAQ/W,KAAKw5B,MAAMl3B,MAChF,CAEA,cAAA81B,CAAe91B,GACd,OAAIA,EACAtC,KAAKw5B,MAAMsB,SAEU,IADvBx4B,EAAQA,EAAMzB,QAAQiB,GAASA,GAAQA,EAAKT,OAAOpB,OAAS,KAC/CA,OAAcqC,EAAQ,KAGZ,IADvBA,EAAQA,EAAMjB,QACDpB,OAAcqC,EAAQ,KAI9B,IACR,CAEA,WAAA61B,CAAY71B,GACX,OAAa,MAATA,QAAkC,IAAVA,IAEnBtC,KAAKw5B,MAAMsB,SACZx4B,aAAiBqB,MAEA,iBAAVrB,EAChB,CAEA,YAAA+1B,CAAa/1B,GACZ,MAAM41B,EAAgBl4B,KAAKw5B,MAAMziB,MAC7B/W,KAAKw2B,MAAMl0B,OAAStC,KAAKsC,OAC5BtC,KAAKw5B,MAAMziB,IAAIzU,GAAgB41B,EACjC,IC/DK,GAAa,CAAC,eAEpB,MAAMoD,WAAc,GACnB,6BAAWlX,GACV,OAAO,GAAWxN,OAAO,GAAUwN,mBACpC,CAEA,mBAAW5H,GACV,OAAO4U,EACR,CAEA,IAAe,EACf,GAEA,WAAAvqB,CAAYsX,GACX5S,MAAM4S,GACNne,KAAK8C,GAAGmwB,IAAoBlwB,IAC3BA,EAAM8hB,iBACN9hB,EAAMC,kBACNhD,KAAK+3B,aAAah1B,EAAMuO,QAAU,KAAK,GAEzC,CAEA,UAAM6E,SACC5K,MAAM4K,OACPnW,MAAK,IACTA,MAAK,GAAe,EACpBA,MAAK,EJ5BmB,CAACw2B,IAC3B,IAAK,IAAI1mB,KAAWirB,GAAU,CAC7B,MAAMvB,EAAQ1pB,EAAQypB,UAAU/C,GAChC,GAAIgD,EAAO,OAAO,IAAI1pB,EAAQ0mB,EAAOgD,EACtC,CAEA,OAAO,IAAI,EIsBO+B,CAAYv7B,MACxBA,MAAK,IACRA,KAAKk3B,eAAcruB,SAAY7I,MAAK,EAASg2B,QAC7Ch2B,KAAK+3B,aAAa/3B,MAAK,EAASsC,QAGnC,CAEA,eAAAk1B,GACKx3B,MAAK,IAAUA,MAAK,EAASg3B,SAAWh3B,KAAKg3B,SAClD,CAEA,iBAAMmB,CAAY71B,GACjB,QAAOtC,MAAK,GAAWA,MAAK,EAASm4B,YAAY71B,EAClD,CAEA,oBAAM81B,CAAe91B,GACpB,OAAItC,MAAK,EAAiBA,MAAK,EAASo4B,eAAe91B,GAEhDA,CACR,CAEA,kBAAM+1B,CAAa/1B,SACZtC,KAAK8H,MACXxF,QAAcA,EACd,MAAMwN,EAAU9P,MAAK,EACrB,GAAI8P,EAAQ,EACKA,EAAQxN,OAAS,OACnBA,SACPwN,EAAQuoB,aAAa/1B,EAC7B,OACMiJ,MAAM8sB,aAAa/1B,EAC1B,CAEA,4BAAMk2B,CAAuBC,EAAiBC,GAC7C,GAAGD,GAAmBz4B,KAAKkL,UAAU,CACpC,MACM5I,EADUtC,MAAK,EACCsC,OAAS,KAE/B60B,GAAOn3B,KAAMsC,EACd,CAEA,OAAOiJ,MAAMitB,uBAAuBC,EAAiBC,EACtD,EAGD,GAAO4C,IACP,MC1EM,GAAa,CAAC7G,GAAkBD,IAGtC,MAAM,WAAmB,GACxB,6BAAWpQ,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOqV,EACR,CAEA,WAAAhrB,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACZnW,KAAKskB,QAAS,EACdtkB,KAAK8H,MAAM0C,MAAK,IAAMxK,KAAK4Q,QAAQ6iB,KACpC,CAEA,aAAMrW,GACLpd,KAAK4Q,QAAQ8iB,UACPnoB,MAAM6R,SACb,CAEA,UAAIkH,GACH,OAAOtkB,KAAK+jB,aAAa0Q,GAC1B,CACA,UAAInQ,CAAOA,GACVA,EAAStkB,KAAKgB,KAAKyzB,GAAkB,IAAMz0B,KAAKgB,KAAKyzB,QAAkB7uB,EACxE,CAEA,aAAIsF,GACH,OAAOlL,KAAKgB,KAAKwzB,GAClB,EAED,GAAO,IACP,MC7CagH,GAAa,EAAGre,OAAMtc,aAClC,IAAI46B,EAAW,GAaf,OAZAte,EAAKpY,SAASlD,SAAS6N,IACtB,MAAM,OAAEsL,EAAM,KAAE8K,GAAO,GAAUjlB,EAAO6O,GAIxC,GAFIsL,GAAQygB,EAAS53B,KAAK6L,IAErBoW,EAAM,CACV,MAAMtjB,EAASg5B,GAAW,CAAEre,KAAMzN,EAAS7O,WACvC2B,aAAkBmB,MAAO83B,EAAWA,EAAS7kB,OAAOpU,GAC/CA,GAAQi5B,EAAS53B,KAAKrB,EAChC,KAGMi5B,CAAQ,ECjBHC,GAAiB7yB,MAAO7G,EAAM25B,WACzBr0B,QAAQwR,IAAI6iB,EAAO73B,KAAI0yB,GAASA,EAAMhB,SAASxzB,OACxD45B,QAAO,CAAC5F,EAAO6F,MAAe7F,GAAQ6F,IAAmB,GCU5D,GAAa,GACnB,MAAMC,WAAkB,GACvB,6BAAW1X,GACV,OAAO,GAAWxN,OAAO,GAAUwN,mBACpC,CAEA,mBAAW5H,GACV,OAAO6U,EACR,CAEA,GAAU,KACV,GAAS,IAAInvB,IAEb,WAAA2E,CAAYsX,GACX5S,MAAM4S,GACN,MAAMhB,EAAOnd,KAAKmd,KAClBA,EAAKra,GAAGuwB,IAA0BtwB,IACjC,MAAMyzB,EAAQzzB,EAAMjC,OAChB01B,GAASx2B,SACRw2B,aAAiB,KAAex2B,MAAK,GAAYA,MAAK,EAAQ8e,IAAI0X,KACrEx2B,MAAK,EAAU,MAChB+C,EAAMC,kBACP,IAGDma,EAAKra,GAAGwwB,IAAsBvwB,IAC7B,MAAMyzB,EAAQzzB,EAAMjC,OAChB01B,GAASx2B,OACRw2B,aAAiB,IAAax2B,MAAK,GAAWA,MAAK,EAAQ8e,IAAI0X,IAClEx2B,MAAK,EAAQqC,OAAOm0B,GAErBzzB,EAAMC,kBACP,IAGDhD,KAAKk3B,eAAcruB,OAAS7G,gBAAiB05B,GAAe15B,EAAMhC,KAAK27B,SACxE,CAEA,UAAIA,GAIH,OAHI37B,MAAK,IACRA,MAAK,EAAU,IAAIib,IF/BdugB,GAAW,CACjBre,KE8BmCnd,KF7BnCa,OAAS6O,GACJA,aAAmB,GAAkB,CAAEsL,QAAQ,EAAM8K,MAAM,GACxD,CAAE9K,QAAQ,OE6BXrX,MAAMC,KAAK5D,MAAK,EACxB,CAEA,eAAAw3B,GACC,MAAM,SAAER,EAAQ,OAAE2E,GAAW37B,KAC7B,GAAI27B,EACH,IAAK,IAAInF,KAASmF,EACjBnF,EAAMQ,SAAWA,CAEpB,CAEA,kBAAMqB,CAAa/1B,SACZtC,KAAK8H,MACX,MAAMhE,EAAM9D,MAAK,EACjB8D,EAAIi4B,QACJ,MAAMJ,EAAS37B,KAAK27B,OAChBA,SACGr0B,QAAQwR,IAAI6iB,EAAO73B,KAAI+E,MAAO2tB,IACnC,MACMwF,EADOxF,EAAMpnB,KACOgnB,GAAY9zB,EAAOk0B,EAAMpnB,MAAQ9M,EACvD,GAAQ05B,IACXl4B,EAAI3B,IAAIq0B,EAAOwF,SACVxF,EAAMl0B,MAAM05B,EAAW,KAI/B,IAAIh6B,QAAas0B,GAAsBt2B,MAAK,EAAQ27B,GAGpD,OAF+C,GAA3C1yB,OAAOC,oBAAoBlH,GAAM/B,SAAa+B,EAAO,MAElDA,CACR,CAEA,uBAAM62B,CAAkBrC,EAAOl0B,GAE9BA,QAAcA,EACd,MAAMwB,EAAM9D,MAAK,EAEjB,GAAIw2B,EAAO,CACV,MAAMyF,EAAWn4B,EAAIgb,IAAI0X,GACnB0B,EAAep0B,EAAI7B,IAAIu0B,GAG7B,GAAGyF,GAAY/D,GAAgB51B,EAC9B,OACG,GAAQA,GAEXwB,EAAIzB,OAAOm0B,GAIX1yB,EAAI3B,IAAIq0B,EAAOl0B,EAEjB,CAEA,IAAIN,QAAas0B,GAAsBxyB,EAAK9D,KAAK27B,QAEF,GAA3C1yB,OAAOC,oBAAoBlH,GAAM/B,SAAa+B,EAAO,YAEnDhC,KAAK+3B,aAAa/1B,EACzB,EAGD,GAAO85B,IACP,YClHM,GAAa,CAACrH,GAAkBC,IAyDtC,SAvDA,cAAyB,GACxB,6BAAWtQ,GACV,OAAO,EACR,CAEA,IAAe,EACf,GAEA,WAAAvd,GACC0E,QAEAvL,KAAK8C,GAAG,SAAUC,IACjBA,EAAM8hB,iBACN9hB,EAAMC,kBAEFhD,KAAKskB,SAAWtkB,KAAKy5B,UAAUz5B,KAAKohB,SAAS,GAEnD,CAEA,UAAMjL,SACC5K,MAAM4K,OACRnW,MAAK,IACRA,KAAKskB,QAAS,EACdtkB,KAAKy5B,UAAW,EAChBz5B,MAAK,GAAe,EAEtB,CAEA,QAAIs3B,GAIH,OAHKt3B,MAAK,IACTA,MAAK,EAAQA,KAAK4S,OAAOqe,KAEnBjxB,MAAK,CACb,CAEA,UAAIskB,GACH,OAAOtkB,KAAK+jB,aAAa0Q,GAC1B,CAEA,UAAInQ,CAAOA,GACVtkB,KAAKgB,KAAKyzB,GAAkBnQ,EAAS,GAAK,KAC3C,CAEA,YAAImV,GACH,OAAOz5B,KAAK+jB,aAAa2Q,GAC1B,CAEA,YAAI+E,CAASA,GACZz5B,KAAKgB,KAAK0zB,GAAoB+E,EAAW,GAAK,KAC/C,CAEA,OAAArY,GACC1W,QAAQkgB,IAAI,UACb,GCnDK,GAAa,GAEnB,MAAMsR,WAAkB,GACvB,6BAAW9X,GACV,OAAO,GAAWxN,OAAO,GAC1B,CAEA,mBAAW4F,GACV,OAAOkV,EACR,CAEA,WAAA7qB,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACZnW,KAAKskB,QAAS,CACf,CAEA,OAAAlD,GACCphB,KAAK4Q,QAAQuiB,GACd,EAGD,GAAO+I,IACP,MC3BM,GAAa,GACnB,MAAMC,WAAgB,GACrB,6BAAW/X,GACV,OAAO,GAAWxN,OAAO,GAAUwN,mBACpC,CAEA,mBAAW5H,GACV,OAAOgV,EACR,CAEA,WAAA3qB,CAAYsX,GACX5S,MAAM4S,EACP,CAEA,UAAImG,GACH,OAAO,CACR,CACA,UAAIA,CAAOA,GAAS,CAEpB,aAAIpZ,GACH,OAAO,CACR,CAEA,QAAIkE,GACH,OAAO,IACR,EAGDgP,eAAeC,OAAO8d,GAAQ3f,SAAU2f,IACxC,MC5BaC,GAAqC,GAAG3K,iBAE/C,GAAa,GACnB,MAAM4K,WAAe,GACpB,6BAAWjY,GACV,OAAO,GAAWxN,OAAO,GAC1B,CAEA,mBAAW4F,GACV,OAAOiV,EACR,CAEA,WAAA5qB,GACC0E,QACAvL,KAAK8H,MAAM0C,MAAK,IAAMxK,KAAK4Q,QAAQwrB,KACpC,CAEA,UAAMjmB,SACC5K,MAAM4K,OACZnW,KAAKskB,QAAS,CACf,CAEA,OAAAlD,GACCphB,KAAK4Q,QAAQsiB,GACd,EAGD,GAAOmJ,IACP,MChCM,GAAa,GACnB,MAAMC,WAAiB,GACtB,6BAAWlY,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAO+U,EACR,CAEA,WAAA1qB,GACC0E,OACD,EAGD,GAAO+wB,IACP,MCRM,GAAa,CAAClH,GAAeC,IAE7BkH,GAAY1zB,MAAO2zB,EAAMj5B,KAC9B,IAAIvB,EAAO,GACX,IAAK,IAAIo1B,KAAOoF,EAAMx6B,EAAK6B,KAAKN,EAAOtB,IAAIm1B,IAI3C,OAFmB,GAAfp1B,EAAK/B,SAAa+B,EAAO,MAEtBA,CAAI,EAGZ,MAAMy6B,WAAa,GAClB,6BAAWrY,GACV,OAAO,GAAWxN,OAAO,GAAUwN,mBACpC,CAEA,mBAAW5H,GACV,OAAO8U,EACR,CAEA,GACA,GACA,GAAU,IAAIpvB,IACd,GACA,IAAe,EAEf,WAAA2E,CAAYsX,GACX5S,MAAM4S,GAEN,MAAMhB,EAAOnd,KAAKmd,KAClBA,EAAKra,GAAGs5B,IAAqCr5B,IAC5C/C,MAAK,EAAgB+C,EAAMjC,OAC3BiC,EAAMC,iBAAiB,IAIxBma,EAAKra,GAAGuwB,IAA0BtwB,IAClBA,EAAMjC,QACRd,OACZ+C,EAAM8hB,iBACN9hB,EAAMC,kBACP,IAGDma,EAAKra,GAAGowB,IAAqBnwB,IAC5BA,EAAM8hB,iBACN9hB,EAAMC,kBAEN,MAAM,SAAEg0B,GAAah3B,KAChBg3B,GAAUh3B,KAAK08B,WAAW,IAGhCvf,EAAKra,GAAGqwB,IAAwBpwB,IAC/BA,EAAM8hB,iBACN9hB,EAAMC,kBAEN,MAAM,KAAEw5B,EAAI,SAAExF,GAAah3B,KAC3B,IAAKg3B,EAAU,CACd,MAAMI,EAAMr0B,EAAMjC,OAAO8R,OAAO4e,IAClBgL,EAAKpsB,QAAQgnB,IACd,GACZA,EAAIvlB,QAEN,KAGD7R,KAAKk3B,eAAcruB,UAClB,MAAM,KAAE2zB,EAAI,IAAE7U,EAAG,IAAEgV,EAAG,SAAE3F,GAAah3B,KAC/BC,EAASu8B,EAAKv8B,OAKpB,OAJID,MAAK,IAAkBg3B,IACtB/2B,GAAU08B,EAAK38B,MAAK,EAAcy5B,UAAW,EACxCx5B,EAAS08B,IAAK38B,MAAK,EAAcy5B,UAAW,IAE/C9R,GAAO1nB,GAAUA,GAAU08B,CAAG,IAGtC38B,KAAKk3B,eAAcruB,MAAO7G,SACZ05B,GAAe15B,EAAMhC,KAAKw8B,OAEzC,CAEA,UAAMrmB,GAEL,SADM5K,MAAM4K,QACPnW,MAAK,EAAc,CACvBA,MAAK,GAAe,EACpB,MAAM48B,EAAc58B,KAAKkB,KAAK,YAAYC,QACvCy7B,IACF58B,MAAK,EAAY48B,EAAYn5B,SAE9BzD,MAAK,EAAaA,KAAKkB,KAAKqwB,IAAoBpwB,OACjD,CACD,CAEA,eAAAq2B,GACC,MAAM,SAAER,GAAah3B,KACrB,IAAK,IAAIo3B,KAAOp3B,KAAKw8B,KACpBpF,EAAIJ,SAAWA,CAEjB,CAEA,QAAIwF,GACH,OAAGx8B,MAAK,EACA2D,MAAMC,KAAK5D,MAAK,EAAW+E,UAC5B,EACR,CAEA,OAAI4iB,GACH,OAAI3nB,KAAK+jB,aAAaqR,IAAuB1N,KAAKiV,IAAI,EAAG9V,SAAS7mB,KAAKgB,KAAKo0B,MACrE,CACR,CAEA,OAAIuH,GACH,OAAI38B,KAAK+jB,aAAasR,IAAuBxO,SAAS7mB,KAAKgB,KAAKq0B,KACzDuE,OAAOiD,gBACf,CAEA,WAAA1E,CAAY71B,GACX,OAAQA,GAASA,aAAiBqB,KACnC,CAEA,cAAAy0B,CAAe91B,GACd,OAAOA,EAAQA,EAAMzB,QAAQiB,KAAWA,IAAQ,IACjD,CAEA,eAAM46B,CAAUp6B,GACf,MAAM80B,EAAM92B,SAASoY,WAAW1Y,MAAK,GAAW,GAAM+E,SAAS,GAK/D,aAJM/E,MAAK,EAAWuF,OAAO6xB,GAEzB90B,SAAa80B,EAAI90B,MAAMA,GAEpB80B,CACR,CAEA,kBAAMiB,CAAa90B,GAKlB,OAJAvD,MAAK,EAAQ+7B,QACb/7B,MAAK,EAAWsF,QACZ/B,SAAc+D,QAAQwR,IAAIvV,EAAOO,KAAIxB,GAAStC,KAAK08B,UAAUp6B,YAEpDi6B,GAAUv8B,KAAKw8B,KAAMx8B,MAAK,EACxC,CAEA,uBAAM64B,CAAkBzB,EAAK90B,GAC5BA,QAAcA,EACd,MAAMiB,EAASvD,MAAK,EAEhB,GAAQsC,GAAQtC,MAAK,EAAQqC,OAAO+0B,GACnCp3B,MAAK,EAAQmC,IAAIi1B,EAAK90B,SAErBiJ,MAAMstB,kBAAkBzB,EAAK90B,GACnC,MAAMN,QAAau6B,GAAUv8B,KAAKw8B,KAAMj5B,SAClCvD,KAAK+3B,aAAa/1B,EACzB,EAGD,GAAOy6B,IACP,MC7JM,GAAa,CAACrI,IAEpB,MAAM0I,WAAa,GAClB,6BAAW1Y,GACV,OAAO,GAAWxN,OAAO,GAAUwN,mBACpC,CAEA,mBAAW5H,GACV,OAAO2U,EACR,CAEA,WAAAtqB,CAAYsX,GACX5S,MAAM4S,GACNne,KAAK8H,MAAM0C,MAAK,IAAMxK,KAAK4Q,QAAQ2iB,KACpC,CAEA,aAAMnW,GACLpd,KAAK4Q,QAAQ4iB,UACPjoB,MAAM6R,SACb,CAEA,QAAIoK,GACH,OAAOxnB,KAAKgB,KAAKozB,GAClB,CAEA,gBAAAuD,GAAmB,EAEpB,GAAOmF,IACP,MC7Ba,GAAmB,SACnB,GAAsB,YAC7B,GAAa,CAAC,GAAkB,IAItC,MAAMC,WAAgB,GACrB,6BAAW3Y,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOsV,EACR,CAEA,WAAAjrB,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACZnW,KAAK4Q,QAAQ+iB,GACd,CAEA,aAAMvW,GACLpd,KAAK4Q,QAAQgjB,UACProB,MAAM6R,SACb,CAEA,UAAIkH,GACH,OAAOtkB,KAAK+jB,aAAa,GAC1B,CACA,UAAIO,CAAOA,GACVA,EAAStkB,KAAKgB,KAAK,GAAkB,IAAMhB,KAAKgB,KAAK,QAAkB4E,EACxE,CAEA,aAAIsF,GACH,OAAOlL,KAAKgB,KAAK,GAClB,CAEA,YAAMm1B,CAAOn0B,SACNhC,KAAK8H,MACX9H,KAAKskB,aAAe9C,GAAmB/D,QAAQzd,KAAKkL,UAAWlJ,GAAM,EACtE,EAED,GAAO+6B,IACP,MClDM,GAAa,GACnB,MAAMC,WAAmB,GACxB,6BAAW5Y,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOwV,EACR,CAEA,WAAAnrB,GACC0E,OACD,CAEA,OAAA6V,GACCphB,KAAKs3B,KAAK2F,YACX,EAGD,GAAOD,ICnBP,MAAM,GAAa,GACnB,MAAME,WAAmB,GACxB,6BAAW9Y,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOyV,EACR,CAEA,WAAAprB,GACC0E,OACD,CAEA,OAAA6V,GACCphB,KAAKs3B,KAAK6F,YACX,EAGD,GAAOD,ICjBP,MAAM,GAAa,GACnB,MAAME,WAAsB,GAC3B,6BAAWhZ,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAO0V,EACR,CAEA,WAAArrB,GACC0E,OACD,CACA,OAAA6V,GACCphB,KAAKs3B,KAAK6F,YACX,EAGD,GAAOC,ICpBP,MAAM,GAAa,GACnB,MAAMC,WAAqB,GAC1B,6BAAWjZ,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAO2V,EACR,CAEA,WAAAtrB,GACC0E,OACD,CACA,OAAA6V,GACCphB,KAAKs3B,KAAKgG,QACX,EAGD,GAAOD,ICFP,MAAME,GAAc,CACnBjZ,QAAQ,EACRmV,UAAU,GAGL,GAAa,GACnB,MAAM+D,WAAgB,GACrB,6BAAWpZ,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOuV,EACR,CAEA,GACA,GACA,GACA,GACA,GACA,IAAe,EAEf,WAAAlrB,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACPnW,MAAK,IACTA,MAAK,EAAQA,KAAK4S,OAAOqe,IACzBjxB,MAAK,EAAQA,KAAKkB,KAAK8wB,IAAuB7wB,SAAWo8B,GACzDv9B,MAAK,EAAQA,KAAKkB,KAAK+wB,IAAuB9wB,SAAWo8B,GACzDv9B,MAAK,EAAWA,KAAKkB,KAAKgxB,IAA0B/wB,SAAWo8B,GAC/Dv9B,MAAK,EAAUA,KAAKkB,KAAKixB,IAAyBhxB,SAAWo8B,GAE7Dv9B,MAAK,EAAM8C,GAAG,CAAC4vB,GAAmBM,GAA0BD,KAAqB,KAChF/yB,KAAKm2B,QAAQ,IAGdn2B,MAAK,GAAe,EAEtB,CAIA,YAAMm2B,GACL,MAAMmB,EAAOt3B,MAAK,EACZy9B,EAAQnG,EAAKmG,MACbC,EAAO19B,MAAK,EACZmT,EAAOnT,MAAK,EACZ29B,EAAU39B,MAAK,EACfs9B,EAASt9B,MAAK,EAYpB,GATA09B,EAAKpZ,QAAS,EACdoZ,EAAKjE,UAAW,EAChBtmB,EAAKmR,QAAS,EACdnR,EAAKsmB,UAAW,EAChBkE,EAAQrZ,QAAS,EACjBqZ,EAAQlE,UAAW,EACnB6D,EAAOhZ,QAAS,EAChBgZ,EAAO7D,UAAW,EAEfgE,GAASpL,GACX,OAED,MAAM,gBAAEuL,EAAe,WAAEC,EAAU,SAAEC,EAAQ,MAAEC,EAAK,eAAEC,GAAmB1G,EACnE2G,EAAkC,YAAbH,EAEvBL,GAASjL,IACZkL,EAAKjE,UAAW,EAChB6D,EAAOhZ,QAAS,GACNmZ,GAASlL,IACnBmL,EAAKjE,UAAW,EAChB6D,EAAOhZ,QAAS,EAChBgZ,EAAO7D,UAAYnC,EAAKtB,OACdyH,GAASnL,KACnBoL,EAAKjE,SAAWmE,GAAmB,EAE/BK,IAAiBJ,EAAW7H,OAAS4H,EAAkB,EAAIG,EAAM99B,QACpEkT,EAAKmR,QAAS,EACdnR,EAAKsmB,UAAYoE,EAAW7H,OAClBgI,GAAkBP,GAASnL,IACrCqL,EAAQrZ,QAAS,EACjBqZ,EAAQlE,UAAYoE,EAAW7H,QAE/BsH,EAAOhZ,QAAS,EAChBgZ,EAAO7D,UAAYnC,EAAKtB,OAG3B,EAED,GAAOwH,IACP,MCxGM,GAAa,CAAC,GAAgB/I,GAAkBI,IAEtD,MAAMqJ,WAAa,GAClB,6BAAW9Z,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOoV,EACR,CAEA,WAAA/qB,GACC0E,OACD,CAEG,QAAI6D,GACA,OAAOpP,KAAKgB,KAAK,GACrB,CAEA,UAAIsjB,GACN,OAAOtkB,KAAK+jB,aAAa0Q,GAC1B,CAEA,UAAInQ,CAAOA,GACMtkB,KAAKskB,QACNA,GACdsS,GAAkB52B,KAAMskB,EAE1B,CAEA,YAAI0S,GACH,OAAOh3B,KAAK+jB,aAAa8Q,GAC1B,CAEA,YAAImC,CAASA,GACZA,EAAWh3B,KAAKgB,KAAK6zB,GAAoB,IAAM70B,KAAKgB,KAAK6zB,GAAoB,KAC9E,EAGD,GAAOqJ,IACP,MCjCM,GAAa,CAAC5I,IAWpB,MAAM6I,WAAoB,GACzB,6BAAW/Z,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOmV,EACR,CAEA,GACA,GACA,IAAe,EACf,WAAA9qB,GACC0E,QACAvL,KAAK8C,GAAG,SAAS,EAAGhC,aACnB,IAAKd,MAAK,EAAO,OACjB,GAAIc,GAAUd,KAAM,OACpB,MAAMwnB,EAAO1mB,EAAOyB,GAAGqvB,IAAiB9wB,EAASA,EAAO8R,OAAOgf,IACzD0F,EAAOt3B,MAAK,EAElB,IAAKwnB,EAAM,OAEX,MAAM,MAACiW,EAAK,MAAEM,EAAK,WAAEF,GAAcvG,EAC7B8G,EAAW5W,EAAKpY,KACtB,GAAIquB,GAASnL,IAAmBmL,GAASlL,GAAmB,CAC3D,MAAM8L,EAlCiB,EAACN,EAAOvW,EAAMqW,KACxC,IAAK,IAAIQ,KAAQN,EAAO,CACvB,GAAIM,EAAK7W,MAAQA,GAAQ6W,EAAKnzB,UAAW,OAAOmzB,EAC3C,GAAIA,GAAQR,EAAY,MAC9B,CAEA,OAAO,IAAI,EA4BKS,CAAmBP,EAAOK,EAAUP,GAC7CQ,IAAM/G,EAAKuG,WAAaQ,EAC7B,IAEF,CAEA,UAAMloB,GAGL,SAFM5K,MAAM4K,OACZnW,KAAKu+B,SAAW,GACXv+B,MAAK,EAAc,CACvB,MAAMs3B,EAAOt3B,MAAK,EAAQA,KAAK4S,OAAOqe,IACtCjxB,MAAK,EAASA,KAAKkB,KAAK0wB,IACxB5xB,MAAK,EAAM8C,GAAG,CAACiwB,GAAmBC,KAA2B,KAC5D,MAAMyK,EAAQnG,EAAKmG,MACnB,GAAGpL,IAAwBoL,EAC1B,OAGD,MAAM,gBAACG,EAAe,WAAEC,EAAU,MAAEE,GAASzG,EAC7C,IAAKuG,EACJ,OAED,MAAMvW,EAAQyW,EAAM99B,OACdu+B,EAAWX,EAAaA,EAAWrW,KAAO4K,GAC1CmM,EAAW7W,KAAKuT,MAAyB,IAAlB2C,EAAyBtW,GAEtD,IAAK,IAAIE,KAAQxnB,KAAKy+B,MAAO,CAC5B,MAAMrvB,EAAOoY,EAAKpY,KACdquB,GAASnL,IACZ9K,EAAKlD,OAASlV,GAAQovB,EACtBhX,EAAKwP,UAAW,GACNyG,GAASlL,IACnB/K,EAAKlD,OAASlV,GAAQmjB,GACtB/K,EAAKwP,UAAW,IAEhBxP,EAAKlD,OAASlV,GAAQojB,GACtBhL,EAAKwP,UAAW,EAElB,CAEAh3B,KAAKu+B,SAAWd,GAASlL,IAAqBkL,GAASjL,GAAqB,IAAM+L,EAElFv+B,KAAK4Q,QAAQwiB,GAA0B,IAGxCpzB,MAAK,GAAe,CACrB,CACD,CAEA,SAAIy+B,GACH,OAAO96B,MAAMC,KAAK5D,MAAK,EACxB,CAEA,YAAIu+B,GACH,OAAOv+B,KAAKgB,KAAKs0B,GAClB,CAEA,YAAIiJ,CAASA,GACRv+B,KAAKiW,MAAMqK,aAAatgB,KAAKiW,MAAMqK,YAAY,aAAcie,EAAW,KAC5Ev+B,KAAKgB,KAAKs0B,GAAoB5N,KAAKiV,IAAI,EAAGjV,KAAKC,IAAI4W,EAAU,MAC9D,EAGD,GAAOJ,IACP,MCpHaO,GAAgB,UAChBC,GAAa,OAe1B,SAbA,MAEI,wBAAWD,GAAgB,OAAOA,EAAc,CAChD,qBAAWC,GAAa,OAAOA,EAAW,CAE1C,WAAA93B,CAAY+3B,EAAQnB,EAAOvH,EAASl0B,GACtChC,KAAK4+B,OAASA,EACR5+B,KAAKy9B,MAAQA,EACbz9B,KAAKk2B,QAAUA,EACfl2B,KAAKgC,KAAOA,CAChB,GCNE,GAAQgd,GAAwB,QAkCtC,SA/BA,cAA+B,GAC9B,WAAAnY,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACZ,MAAMmhB,EAAOt3B,KAAK4S,OAAOqe,IACzB,GAAMjxB,KAAMs3B,GACRA,GAAMt3B,KAAK4Q,QAAQ+hB,GACxB,CAEA,QAAI2E,GACH,OAAO,GAAMt3B,KACd,CAEA,YAAMgb,CAAOhZ,EAAO,CAAC,GACpB,MAAMkJ,EAAYlL,KAAKgB,KAAKwzB,IACtB,OAAGtpB,SACcsW,GAAmB/D,QAAQvS,EAAWlJ,GAAM,EAGpE,CAKA,aAAMof,CAAQpf,EAAO,CAAC,GACrB,OAAO,IAAI,GAAmB28B,GAAY,kBAC3C,GCjCK,GAAW,GAAGzN,aAEpB,MAAM2N,WAAgC,GAElC,mBAAWriB,GAAa,OAAO,EAAS,CAG3C,WAAA3V,CAAYi4B,EAAUl2B,GACrB2C,QACAvL,KAAK8+B,SAAWA,EAChB9+B,KAAK4I,OAASA,CACf,CAEA,aAAMwY,CAAQpf,GACb,IAAI88B,EAAW9+B,KAAK8+B,SACpBA,QAAiBtd,GAAmBM,YAAYgd,EAAU98B,EAAM88B,GAChE,MAAM13B,EAAM,IAAI4C,IAAI80B,EAAUp4B,UAExBoF,QAAiBtF,MAAMY,EAAK,CACjCwB,OAAQ5I,KAAK4I,OACbm2B,YAAa,UACb7hB,KAAM,OACNlU,QAAS,CACR,eAAgB,oBAEjBzI,KAAMoN,KAAKC,UAAU5L,KAGtB,OAAO,IAAI,GAAmBhC,KAAM8L,EAAS+jB,GAAK6O,GAAgBC,GAAY7yB,EAC/E,EAGD,GAAO+yB,IACP,YCxBMG,GAAiBhgB,GAAwB,gBAEzC,GAAa,CAAC,GAAgBqV,GAA4BJ,GAAoBC,GAAkBC,GAAiBG,IAEjH0C,GAAW,CAACM,EAAMN,KACvB,IAAK,IAAIqH,KAAQ/G,EAAKyG,MACrBM,EAAKrH,SAAWA,EAChBqH,EAAK/Z,OAAS0S,CACf,EAqBD,MAAMiI,WAAa,GAClB,6BAAW7a,GACV,OAAO,EACR,CAEA,mBAAW5H,GACV,OAAOyU,EACR,CAEA,IAAe,EACf,IAASmB,GACT,IACA,GAAS,IAAIlwB,IACb,IAAQ,CAAC,EACT,IAAc,KACd,KAAqB,EAErB,WAAA2E,GACC0E,QACA,MAAM4R,EAAOnd,KAAKmd,KAClBA,EAAKra,GAAGywB,IAAyBxwB,IAChCA,EAAM8hB,iBACN9hB,EAAMC,iBAAiB,IAGxBma,EAAKra,GAAG0wB,IAAqBzwB,IAC5B,MAAMs7B,EAAOt7B,EAAMjC,OACnBd,MAAK,GAAS,KACdA,KAAK64B,kBAAkBwF,EAAM,MAE7Bt7B,EAAM8hB,iBACN9hB,EAAMC,iBAAiB,IAGxBhD,KAAK8H,MAAM0C,MAAK,IAAMxK,KAAK4Q,QAAQ8hB,KACpC,CAEA,UAAMvc,SACC5K,MAAM4K,OACPnW,MAAK,IACTA,MAAK,GAAe,EACpBA,KAAK49B,iBAAmB,EAExB59B,KAAKy9B,MAAQrL,GAEbpyB,KAAKg+B,eAAiBh+B,KAAK+jB,aAAasQ,IAExCr0B,KAAK49B,iBAAmB,EACpB59B,KAAK+9B,MAAM99B,OAAS,GAAGD,KAAKm9B,aAElC,CAEA,SAAIY,GAGH,OAFK/9B,MAAK,KAAQA,MAAK,GAAS2D,MAAMC,KAAK5D,KAAKmd,KAAKjc,KAAKiwB,MAEnDnxB,MAAK,EACb,CAEA,SAAIy9B,GACH,OAAOz9B,MAAK,EACb,CAEA,SAAIy9B,CAAMA,GACT,MAAMyB,EAASl/B,MAAK,GAChBy9B,GAASpL,KACR6M,GAAU5M,IAAmBmL,GAASnL,GAAiB0E,GAASh3B,MAAM,GACjEk/B,GAAU5M,IAAmBmL,GAASnL,KAC9C0E,GAASh3B,MAAM,GACXA,KAAK69B,aAAY79B,KAAK69B,WAAWvZ,QAAS,KAGhDtkB,MAAK,GAASy9B,EAEVyB,GAAUzB,GAAOz9B,KAAK4Q,QAAQoiB,IAClChzB,KAAKgB,KAAKmzB,GAAiBsJ,EAC5B,CAEA,SAAIzH,GACH,IAAK,IAAIqI,KAAQr+B,KAAK+9B,MAAO,GAAIM,EAAKnzB,YAAcmzB,EAAKrI,MAAO,OAAO,EAEvE,OAAO,CACR,CAEA,WAAM1zB,CAAMN,GAGX,aAFMhC,KAAK8H,MACP9H,MAAK,UAAmBA,MAAK,GACT,GAApBwJ,UAAUvJ,OAAoBD,MAAK,GAEnCA,KAAKy9B,OAASnL,GAQV,IAAIhrB,SAASmW,IACnB,MAAMxN,EAAUlN,IACfA,EAAMC,kBACNhD,KAAK2Q,SAASV,EAAQ+iB,IACtBvV,EAAQzd,KAAKsC,MAAMN,GAAM,EAE1BhC,KAAK8C,GAAGkwB,GAA0B/iB,EAAM,WAbnC3I,QAAQwR,IAAI9Y,KAAK+9B,MAAMj6B,KAAIu6B,IAChC,MAAMjvB,EAAOivB,EAAKjvB,KAClB,OAAOA,EAAOivB,EAAK/7B,MAAM8zB,GAAYp0B,EAAMoN,IAASivB,EAAK/7B,MAAMN,EAAK,gBAG/DhC,MAAK,KAWb,CAEA,cAAI69B,GACH,OAAI,GAAK79B,KAAK49B,iBAAmB59B,KAAK49B,gBAAkB59B,KAAK+9B,MAAM99B,OAAeD,KAAK+9B,MAAM/9B,KAAK49B,iBAE3F,IACR,CAEA,cAAIC,CAAWQ,GACd,MAAM5I,EAAUz1B,KAAK69B,WACjBQ,GAAQ5I,GAAWz1B,KAAKy9B,OAASnL,KAChCmD,IAASA,EAAQnR,QAAS,GAC9BtkB,KAAK49B,gBAAkB59B,KAAK+9B,MAAM3tB,QAAQiuB,GAC1CA,EAAK/Z,QAAS,EACVtkB,KAAKy9B,OAASnL,KAAiBtyB,KAAKy9B,MAAQnL,IAEhDtyB,KAAKm/B,iBACLn/B,KAAK4Q,QAAQmiB,IAEf,CAEA,YAAIqM,GACH,MAAO,WACN,MAAMrB,EAAQ/9B,KAAK+9B,MACbxW,EAAQvnB,KAAK49B,gBAAkB,EAC/B57B,QAAahC,KAAKsC,QACxB,IAAK,IAAInC,EAAIonB,EAAOpnB,GAAK,EAAGA,IAAK,CAChC,MAAMk+B,EAAON,EAAM59B,GAEnB,SADMk+B,EAAK7I,SAASxzB,GAChBq8B,EAAKnzB,UAAW,OAAOmzB,CAC5B,CAEA,OAAO,IACP,EAXM,EAYR,CAEA,YAAIP,GACH,MAAO,WACN,MAAMC,EAAQ/9B,KAAK+9B,MACbxW,EAAQvnB,KAAK49B,gBAAkB,EAC/B57B,QAAahC,KAAKsC,QACxB,GAAIy7B,EACH,IAAK,IAAI59B,EAAIonB,EAAOpnB,EAAI49B,EAAM99B,OAAQE,IAAK,CAC1C,MAAMk+B,EAAON,EAAM59B,GAEnB,SADMk+B,EAAK7I,SAASxzB,GAChBq8B,EAAKnzB,UAAW,OAAOmzB,CAC5B,CAED,OAAO,IACP,EAZM,EAaR,CAEA,gBAAMpB,GACL,GAAIj9B,KAAKy9B,OAASnL,GACjBtyB,KAAKy9B,MAAQnL,OACP,CACN,MAAM+M,QAAar/B,KAAKo/B,SACpBC,IAAMr/B,KAAK69B,WAAawB,EAC7B,CACD,CAEA,gBAAMlC,GACL,MAAMhqB,QAAanT,KAAK89B,SACpB3qB,GACHnT,KAAK69B,WAAa1qB,EAClBnT,KAAKy9B,MAAQnL,IACHtyB,KAAKg+B,eACfh+B,KAAK29B,UAEL39B,KAAKs9B,QAEP,CAEA,aAAMK,GACL39B,KAAKy9B,MAAQlL,EACd,CAEA,iBAAI+M,GACH,IAAIC,EAAUP,GAAeh/B,MAC7B,IAAKu/B,EAAS,CACbA,EAAU,GACV,IAAIT,EAAW9+B,KAAKgB,KAAKizB,IACzB,GAAI6K,EAAU,CACb,MAAMl2B,EAAS5I,KAAKgB,KAAKkzB,KAAqB,OAC9Cl0B,KAAKuF,OAAO,IAAI,GAAwBu5B,EAAUl2B,GACnD,CAEA,MAAM42B,EAASx/B,KAAK+E,SACpB,IAAK,IAAI0Z,KAAS+gB,EACb/gB,aAAiB,IAAkB8gB,EAAQ17B,KAAK4a,GAErDugB,GAAeh/B,KAAMu/B,EACtB,CAEA,OAAOA,CACR,CAEA,YAAMjC,GACL,MAAMt7B,QAAahC,KAAKsC,QAExB,UADoBo5B,GAAe15B,EAAMhC,KAAK+9B,OAClC,OAEP/9B,KAAK+jB,aAAauQ,MAAoCt0B,KAAKy9B,MAAQjL,IAExE,MAAM+M,EAAUv/B,KAAKs/B,cACrB,GAAIC,EAAS,CACZ,MAAMznB,OArOcjP,OAAO02B,EAASv9B,KACtC,MAAM8V,EAAU,GAChB,IAAK,IAAI8mB,KAAUW,EAElB,SADqBX,EAAO5jB,OAAOhZ,GAElC,IACC,MAAMQ,QAAgBo8B,EAAOxd,QAAQpf,IAAU,IAAI,GAAmB48B,EAAQ,IAE9E,GADA9mB,EAAQjU,KAAKrB,GACTA,EAAOi7B,OAAS,GAA0B,OAAO3lB,CACtD,CAAE,MAAO3R,GAER,OADA2R,EAAQjU,KAAK,IAAI,GAAmB+6B,EAAQ,GAA0Bz4B,IAC/D2R,CACR,CAGF,OAAOA,CAAO,EAsNU2nB,CAAeF,EAASv9B,GAC9ChC,KAAK4Q,QAAQiiB,GAAsB/a,EACpC,CAEA9X,KAAK4Q,QAAQgiB,GAAc5wB,EAC5B,CAEA,IAAUq8B,GACT,GAAIr+B,KAAKy9B,OAASnL,GAEjB,OADAtyB,KAAKy9B,MAAQpL,GACLryB,MAAK,GAAc,IAAIsH,SAAS6U,IACvC/X,YAAWyE,UACV,MAAM7G,EAAOhC,MAAK,GAEZg2B,EAAQqI,EAAOA,EAAK7I,SAASxzB,SAAc05B,GAAe15B,EAAMhC,KAAK+9B,OAEtE/9B,MAAK,KAAoBA,KAAKy9B,MAAQnL,IAE3CtyB,KAAK41B,WAAa,KAClBzZ,EAAS6Z,EAAM,GACb,GAAG,IAEGh2B,KAAKy9B,OAASpL,IACxBryB,MAAK,GAAYwK,MAAK3B,UACrB7I,MAAK,IAAqB,QACpBA,MAAK,GAAUq+B,EAAK,GAG7B,CAEA,uBAAMxF,CAAkBrC,EAAOl0B,SACxBtC,KAAK8H,MACXxF,QAAcA,EACd,MAAMwB,EAAM9D,MAAK,EAEbw2B,IACC,GAAQl0B,GAAQwB,EAAIzB,OAAOm0B,GAC1B1yB,EAAI3B,IAAIq0B,EAAOl0B,IAGrBtC,MAAK,SAAcs2B,GAAsBt2B,MAAK,EAAQA,KAAK+9B,OAE3D,MAAMF,EAAa79B,KAAK69B,WACpBA,QAAkB79B,MAAK,GAAU69B,SAC1B79B,MAAK,IACjB,EAED,GAAOi/B,IACP,MCxSM,GAAiB,GAAG5yB,2BAGpB,GAAqB,IAAIrC,IAAI,GAAG,mBAAgCtD,UAChEg5B,GAA6B,IAAI11B,IAAI,GAAG,8BAA2CtD,UAEzF,MAAMi5B,WAA6B,GAClC,mBAAWnjB,GACV,MAPsB,aAQvB,CAEA,IAAe,EACZ,IAEH,WAAA3V,GACC0E,QACM,MAAM4R,EAAOnd,KAAKmd,KAClBA,EAAKra,GAAGwJ,GAAoCvJ,IACxCA,EAAMC,kBACNhD,KAAK4mB,QAAQ,IAEjBzJ,EAAKra,GAAG,0BAA2BC,IAC/BA,EAAMC,kBACNhD,KAAK4/B,kBAAkB,IAE3BziB,EAAKra,GAAG,gCAAiCC,IACrCA,EAAMC,kBACHhD,MAAK,IACRA,MAAK,GAAckvB,OAAO,GAErC,CAEA,UAAM/Y,SACO5K,MAAM4K,OACbnW,MAAK,UACHA,KAAK4mB,SACF5mB,MAAK,GAAe,EAE/B,CAEG,YAAM4mB,GACF,MAAMpO,QAAiBiK,GAAShJ,KAAK,UACrCkS,GAAS/E,OAAO,CAAE3lB,UAAWjB,KAAKmd,KAAM3E,WAAUxW,KAAM,CAAC+L,aAAcA,IAAgB6iB,gBAAiBD,OAC5G,CAEA,sBAAMiP,GACF,MAAMziB,EAAOnd,KAAKmd,KAClB,IAAInd,MAAK,GAAc,CACnB,MAAMwY,QAAiBiK,GAAShJ,KAAKimB,IAC/Bl9B,QAAempB,GAAS/E,OAAO,CAACpO,WAAUvX,UAAWkc,EAAMnb,KAAM,CAAC+L,aAAcA,KAAiBmP,KAAK,WAC5Gld,MAAK,GAAgBwC,EAAOiB,QAAQ,GACpCzD,MAAK,GAAc8C,GAAG,iBAAkBC,IACpCA,EAAM8hB,iBACN9hB,EAAMC,kBACN,MAAMs0B,EAAOv0B,EAAMjC,OACnB,WACI,MAAM+vB,QAAiByG,EAAKh1B,a5ChCnBuG,OAAOgoB,IAChCA,QAAkBd,GAAS,GAAG,KAAYc,GAC1C,GAAM1uB,IAAI0uB,EAASriB,GAAIqiB,GAEhBA,G4C6BegP,CAAchP,GAEpB7wB,MAAK,GAAckvB,cAEblvB,KAAK4mB,QACd,EAPD,EAOI,GAEZ,CAEA5mB,MAAK,GAAc8/B,WACvB,EAIJ,GAAOH,IC3EP,MAAMI,GAEL,IACA,IAAQ,KACR,IACA,IAEA,WAAAl5B,CAAY4G,EAAKzL,EAAMg+B,EAAcpG,OAAOiD,kBAC3C78B,MAAK,GAAOyN,EACZzN,MAAK,GAAQgC,EACbhC,MAAK,GAAeggC,EACpBhgC,MAAK,GAAYqN,KAAKC,MAAQ0yB,CAC/B,CAEA,OAAIvyB,GACH,OAAOzN,MAAK,EACb,CAEA,QAAIgC,GACH,OAAOhC,MAAK,EACb,CAEA,QAAIgC,CAAKA,GACRhC,MAAK,GAAQgC,EACbhC,MAAK,GAAYqN,KAAKC,MAAQtN,MAAK,EACpC,CAEA,YAAIoN,GACH,OAAOpN,MAAK,EACb,EA+ED,MC1GM,GAAYigC,GAAe,kBAAkBA,kBAI7C,GAAQ,ID4Bd,MACC,IAAerG,OAAOiD,iBACtB,IAAW,IAAI36B,IAEf,WAAA2E,CAAYm5B,GACXhgC,MAAK,GAAeggC,CACrB,CAEA,IAAWE,GACV,OAAOA,EAAM9yB,SAAYC,KAAKC,MA9CR,GA+CvB,CAEA,IAAUG,GACT,MAAMyyB,EAAQlgC,MAAK,GAASiC,IAAIwL,GAChC,OAAIyyB,GAASlgC,MAAK,GAAWkgC,IAC5BlgC,KAAKqC,OAAOoL,GACL,MAEDyyB,CACR,CAEA,MACC,MAAMC,EAAUx8B,MAAMC,KAAK5D,MAAK,GAASuD,QACnCf,EAAS,IAAImB,MACnB,IAAI,MAAMu8B,KAASC,EACdngC,MAAK,GAAWkgC,IACnB19B,EAAOqB,KAAKq8B,GAEd,OAAO19B,CACR,CAEA,IAAAkX,GACC,OAAO1Z,MAAK,KAAc8D,KAAIo8B,GAASA,EAAMzyB,KAC9C,CAEA,MAAAlK,GACC,OAAOvD,MAAK,KAAc8D,KAAIo8B,GAASA,EAAMl+B,MAC9C,CAEA,QAAIU,GACH,OAAO1C,MAAK,GAAS0C,IACtB,CAEA,SAAIJ,GACH,OAAOtC,MAAK,GAASuD,MACtB,CAEA,GAAAub,CAAIrR,GACH,OAA8B,MAAvBzN,MAAK,GAAUyN,EACvB,CAEA,GAAAxL,CAAIwL,GACH,MAAMyyB,EAAQlgC,MAAK,GAAUyN,GAC7B,OAAOyyB,EAAQA,EAAMl+B,KAAO,IAC7B,CAEA,GAAAG,CAAIsL,EAAKnL,GACR,MAAM49B,EAAQlgC,MAAK,GAAUyN,GACjB,MAATyyB,EACFA,EAAMl+B,KAAOM,EAEbtC,MAAK,GAASmC,IAAIsL,EAAK,IAAIsyB,GAAMtyB,EAAKnL,EAAOtC,MAAK,IACpD,CAEA,OAAOyN,GACNzN,MAAK,GAASqC,OAAOoL,EACtB,CAEA,KAAAsuB,GACC/7B,MAAK,GAAS+7B,OACf,GClGuB,KAalBqE,GAAoBv3B,MAAOw3B,EAAezS,KAC/C,MAAM,SAAEyC,GAAazC,EACf/f,QAAeuiB,GAAUC,GAC3BxiB,IACH+f,EAAa/f,OAASA,EACtBwyB,EAAcl+B,IAAI,GAAGkuB,IAAYzC,GAClC,EAGK0S,GAA0BL,IAC/B,MAAMxyB,EAAM,GAAGwyB,IACf,IAAII,EAAgB,GAAMp+B,IAAIwL,IAAQ,KAMtC,OALK4yB,IACJA,EAvBsBx3B,OAAOo3B,IAC9B,MAAMI,EAAgB,IAAIn+B,IACpB4J,SAAkBgkB,GAAQ,GAASmQ,KAAcj+B,MAAQ,GAK/D,aAJMsF,QAAQwR,IAAIhN,EAAShI,KAAI+E,MAAO+kB,GAC9BwS,GAAkBC,EAAezS,MAGlCyS,CAAa,EAgBHE,CAAgBN,GAChC,GAAM99B,IAAIsL,EAAK4yB,IAGTA,CAAa,EAURG,GAAmB33B,MAAOgoB,IACtC,MAAMwP,QAAsBC,GAAuBzP,GAGnD,OAFeltB,MAAMC,KAAKy8B,EAAc98B,UAE1ByB,MAAK,CAACC,EAAGC,IAClBD,EAAE4I,OAAOuB,KAAK7N,cAAgB2D,EAAE2I,OAAOuB,KAAK7N,eACvC,EACL0D,EAAE4I,OAAOuB,KAAK7N,cAAgB2D,EAAE2I,OAAOuB,KAAK7N,cACxC,EACD,GACN,EAGUk/B,GAAoB53B,MAAOgoB,EAAUjD,KACjDA,QAAqBmC,GAAS,GAASc,GAAWjD,QArBzB/kB,OAAO+kB,IAChC,IAAKA,EAAc,OACnB,MAAM,WAAEqS,GAAerS,EACjByS,QAAsBC,GAAuBL,GACnDG,GAAkBC,EAAezS,EAAa,EAkBxC8S,CAAkB9S,GACjBA,GAGK+S,GAAoB93B,MAAOgoB,GAChC+P,GAAwB/P,E7HsCxB/jB,E6HtC2C0B,IAGtCoyB,GAA0B/3B,MAAOgoB,EAAUhjB,WAC7ByyB,GAAuBzP,IAC5B5uB,IAAI,GAAG4L,KClEvB,GAAiB,GAAGxB,0BAIpB,GAAgBoW,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,mBAAgCtD,WACzEm6B,GAAwBpe,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,2BAAwCtD,WACzFo6B,GAAyBre,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,4BAAyCtD,WAE3Fq6B,GAA0B,CAAC97B,EAAGC,KACnCD,EAAIA,aAAaoI,KAAOpI,EAAI,IAAIoI,KAAKpI,GACrCC,EAAIA,aAAamI,KAAOnI,EAAI,IAAImI,KAAKnI,GAErC,MAAMkpB,EAAO1G,KAAKsZ,KAAKtZ,KAAKuZ,IAAIh8B,EAAIC,GAAK,OACnCg8B,EAAQ,GACd,IAAK,IAAI/gC,EAAI,EAAGA,EAAIiuB,EAAMjuB,IAAK+gC,EAAMr9B,KAAKoB,EAAEkpB,QAAQhuB,IAEpD,OAAO+gC,CAAK,EAGb,MAAMC,WAA4B,GACjC,mBAAW3kB,GACV,MApBsB,YAqBvB,CAEA,IAAe,EACf,KAAQ,EACR,WAAA3V,GACC0E,QACA,MAAM4R,EAAOnd,KAAKmd,KAClBA,EAAKra,GAAGwJ,GAAoCvJ,IAC3CA,EAAMC,kBACNhD,KAAK4mB,QAAQ,IAEdzJ,EAAKra,GAAG,yBAA0BC,IACjCA,EAAMC,kBACN,MAAM,OAAClC,GAAUiC,EACbjC,aAAkBsgC,qBACrBphC,MAAK,GAAQc,EAAO4H,KAAI,IAE1ByU,EAAKra,GAAG,6BAA8BC,IACrCA,EAAMC,kBACNhD,KAAKqhC,mBAAmB,IAEzBlkB,EAAKra,GAAG,0BAA2BC,IAClCA,EAAMC,kBACN,WACIs+B,QAAQ,sD/ChBez4B,OAAO2F,UAC3BwhB,GAAW,GAAG,MAAYxhB,KAChC,GAAMnM,OAAOmM,EAAG,E+CeT+yB,CAAevhC,KAAKwhC,YAC1BxhC,KAAK6R,SAEN,EALD,EAKI,IAELsL,EAAKra,GAAG,4BAA6BC,IACpCA,EAAMC,kBACNhD,KAAKyhC,wBAAwB,GAI/B,CAEA,UAAMtrB,SACC5K,MAAM4K,OACPnW,MAAK,UACHA,KAAK4mB,SACX5mB,MAAK,GAAe,EAEtB,CAEA,cAAIwhC,GACH,OAAO3a,SAAS7mB,KAAKgB,KAnEE,eAoExB,CAEA,YAAM4lB,GACL,MAAMpO,QAAiB,GACjBoV,QAAqB+S,GAAkB3gC,KAAKwhC,YACtCE,EAAgC,MAAhB9T,QAAgD,IAAjBA,QACrDjC,GAAS/E,OAAO,CAAE3lB,UAAWjB,KAAKmd,KAAM3E,WAAUxW,KAAM,CAAC+L,aAAcA,IAAgBrF,KAAK1I,MAAK,GAAO6wB,eAAgBC,GAAY9wB,KAAKwhC,YAAaE,kBAC7J,CAEA,4BAAMD,GACL,MAAMjpB,QAAiBqoB,GACjBhQ,QAAiBC,GAAY9wB,KAAKwhC,YAElCx/B,EAAO,CACZ6uB,WACAzC,KAAM2S,GAAwBlQ,EAAS8Q,UAAW9Q,EAAS+Q,UAUtDC,SAPelW,GAAS/E,OAAO,CACpCpO,WACAvX,UAAWjB,KAAKmd,KAChBnb,OACAkb,KAAM,YAGezZ,QAAQ,GACxB6zB,EAAOuK,EAAO3gC,KAAK,UAAUC,QAEnCm2B,EAAKx0B,GAAG,iBAAkBC,IACzB2H,QAAQkgB,IAAI7nB,GACZA,EAAMC,kBACN,WACC,MAAM4qB,QAAqB0J,EAAKh1B,QAC1BurB,EAAe,GACrB,IAAIC,GAAiB,EACrB,IAAK,MAAME,KAAOJ,EACbE,GAAiD,QAA/BF,EAAaI,GAAKC,YAAqBH,GAAiB,GAC9ED,EAAahqB,KAAK+pB,EAAaI,UAG1ByS,GAAkBzgC,KAAKwhC,WAAY,CAAE1T,iBAAgBD,iBAC3DgU,EAAOxrB,OACPwrB,EAAOhwB,eAED7R,KAAK4mB,QACX,EAdD,EAcI,IAEL0Q,EAAKx0B,GAAG,oCAAqCC,IAC5CA,EAAMC,kBACN6+B,EAAOxrB,OACPwrB,EAAOhwB,SACP7R,KAAK4mB,QAAQ,IAGd,MAAMgH,QAAqB+S,GAAkB3gC,KAAKwhC,YAClD,GAAG5T,EAAa,CACf,MAAMQ,EAAOR,EAAaC,cAAgB,GACpC7rB,EAAO,CAAC,EACd,IAAK,IAAI7B,EAAI,EAAGA,EAAIiuB,EAAKnuB,OAAQE,IAChC6B,EAAK,MAAM7B,EAAE,KAAOiuB,EAAKjuB,SAEpBm3B,EAAKh1B,MAAMN,EAClB,CAGA6/B,EAAO/B,WACR,CAEA,uBAAMuB,GACL,MAAM7oB,QAAiBsoB,GACjBT,QAAsBG,GAAiBxgC,KAAKwhC,YAE5CK,SADelW,GAAS/E,OAAO,CAAE3lB,UAAWjB,KAAMwY,WAAUxW,KAAM,CAAEq+B,iBAAiBnjB,KAAM,YAC3EzZ,QAAQ,GAC9Bo+B,EAAO/+B,GAAG,SAAS,KAClB++B,EAAOhwB,QAAQ,IAGhBgwB,EAAO/B,WACR,EAGD,GAAOqB,IACP,MC1JM,GAAiB,GAAG90B,iCAKpB,GAAgBoW,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,mBAAgCtD,WAE/E,MAAMo7B,WAAkC,GACvC,mBAAWtlB,GACV,MARsB,mBASvB,CAEA,IAAe,EAEf,WAAA3V,GACC0E,OACD,CAEA,UAAM4K,SACC5K,MAAM4K,OACPnW,MAAK,IACTA,MAAK,GAAe,EACpBA,KAAK4mB,SAEP,CAEA,YAAMA,GACL,MAAMpO,QAAiB,GACjBoV,QAAqB5tB,KAAK+hC,wBAC1BpW,GAAS/E,OAAO,CAAE3lB,UAAWjB,KAAKmd,KAAM3E,WAAUxW,KAAM,CAAE4rB,iBACjE,CAEA,cAAIqS,GACH,OAAOjgC,KAAKgB,KA/BW,cAgCxB,CAEA,YAAIqvB,GACH,OAAOrwB,KAAKgB,KAlCS,YAmCtB,CAEA,qBAAM+gC,GACL,MAAM,WAAE9B,EAAU,SAAE5P,GAAarwB,KACjC,aAAa4gC,GAAwBX,EAAY5P,EAClD,EAGD,GAAOyR,IACP,MCnDM,GAAW,aAEX,GAAQ,IAAI5/B,IACZ8/B,GAAsB,IAAI9/B,IAE1B+/B,GAAkB,CAAChC,EAAa,KAAM3tB,GAAO,KAClD,MAAM4vB,EAAW,GAAGjC,IAA2B,IAC/C,GAAG+B,GAAoBljB,IAAIojB,GAC1B,OAAOF,GAAoB//B,IAAIigC,GAEhC,IAAI5vB,EACH,OAAO,KAER,MAAM6vB,EAAgB,IAAIjgC,IAG1B,OAFA8/B,GAAoB7/B,IAAI+/B,EAAUC,GAE3BA,CAAa,EAuBRC,GAAUv5B,MAAO2F,IAC1B,GAAG,GAAMsQ,IAAItQ,GACT,OAAO,GAAMvM,IAAIuM,GAErB,MAAM6zB,QAAavS,GAAQ,GAAG,MAAYthB,KAC1C,GAAMrM,IAAIkgC,EAAK7zB,GAAI6zB,GAInB,OAHsBJ,GAAgBI,EAAKpC,YAAY,GAC5C99B,IAAIkgC,EAAK7zB,GAAI6zB,GAEjBA,CAAI,EAGFC,GAAYz5B,MAAOw5B,IAC5BA,QAAatS,GAAS,GAAG,KAAYsS,GACrC,GAAMlgC,IAAIkgC,EAAK7zB,GAAI6zB,GAInB,OAHsBJ,GAAgBI,EAAKpC,YAAY,GAC5C99B,IAAIkgC,EAAK7zB,GAAI6zB,GAEjBA,CAAI,ECpDT,GAAiB,GAAGh2B,sBAMpBk2B,GAAiB9f,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,mBAAgCtD,WAC1E87B,GAAmB/f,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,qBAAkCtD,WAEpF,MAAM+7B,WAAwB,GAC7B,mBAAWjmB,GACV,MATe,QAUhB,CAEA,IAAe,EACf,KAAQ,EAER,WAAA3V,GACC0E,QACA,MAAM4R,EAAOnd,KAAKmd,KAClBA,EAAKra,GAAG,yBAA0BC,IACjCA,EAAMC,kBACN,MAAM,OAAElC,GAAWiC,EACfjC,aAAkBsgC,qBACrBphC,MAAK,GAAQc,EAAO4H,KAAI,IAE1ByU,EAAKra,GAAG,sBAAuBC,IAC9BA,EAAMC,kBACN,WACC,GAAIs+B,QAAQ,2CAA4C,CACvD,MAAMoB,EAAS1iC,KAAK0iC,YDyBC75B,OAAO2F,UACvBwhB,GAAW,GAAG,MAAYxhB,KAChC,MAAM6zB,EAAO,GAAMpgC,IAAIuM,GACjB2zB,EAAgBF,GAAgBI,EAAKpC,YAAY,GACpDkC,GACLA,EAAc9/B,OAAOmM,GAEtB,GAAMnM,OAAOmM,EAAG,EC/BNm0B,CAAWD,GACjB1iC,KAAK4Q,QAAQ,oBAAqB8xB,GAClC1iC,KAAK6R,QACN,CACA,EAPD,EAOI,IAGLsL,EAAKra,GAAG,oBAAqBC,IAC5BA,EAAMC,kBACNhD,KAAK4iC,cAAc,GAErB,CAEA,UAAMzsB,SACC5K,MAAM4K,OACPnW,MAAK,IACTA,KAAK4mB,SACL5mB,MAAK,GAAe,EAEtB,CAEA,UAAI0iC,GACH,OAAO7b,SAAS7mB,KAAKgB,KAlDF,WAmDpB,CAEA,cAAIwgC,GACH,OAAO3a,SAAS7mB,KAAKgB,KArDE,eAsDxB,CAEA,YAAM4lB,GACL,MAAMpO,QAAiB+pB,GACjBF,QAAaD,GAAQpiC,KAAK0iC,cAC1B/W,GAAS/E,OAAO,CAAEpO,WAAUvX,UAAWjB,KAAKmd,KAAMnb,KAAM,CAAE+L,aAAcA,IAAgBrF,KAAM1I,MAAK,GAAOqiC,SACjH,CAEA,kBAAMO,GACL,MAAM,KAAEzlB,EAAI,OAAEulB,GAAW1iC,KACnBqiC,QAAaD,GAAQM,GACrBlqB,QAAiBgqB,GACjBvhC,EAAYX,SAASmY,cAAc,aACnCkT,GAAS/E,OAAO,CAAE3lB,YAAWuX,WAAUxW,KAAM,CAAEqgC,UACrDllB,EAAK5X,OAAOtE,EAAU8Q,WACtB,MAAM8vB,EAAS1kB,EAAKjc,KAAK,mBAAmBuW,OAC5CoqB,EAAO/+B,GAAG,iBAAkBC,IAC3BA,EAAMC,kBACN,MAAMs0B,EAAOv0B,EAAMjC,OACnB,WACC,MAAMuhC,QAAa/K,EAAKh1B,cAClBggC,GAAUD,GAChBR,EAAO3S,QACP2S,EAAOhwB,SACP7R,KAAK4mB,QACL,EAND,EAMI,IAELib,EAAO/+B,GAAG,SAAUC,IACnBA,EAAMC,kBACN6+B,EAAOhwB,QAAQ,IAGhB,MAAMylB,EAAOuK,EAAO3gC,KAAK,UAAUC,cAC7Bm2B,EAAKxvB,YACLwvB,EAAKh1B,MAAM+/B,GACjBR,EAAO/B,WACR,EAGD,GAAO2C,IACP,MCjGM,GAAiB,GAAGp2B,uBACpB,GAAiBoW,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,mBAAgCtD,WAKhF,MAAMm8B,WAAyB,GAC9B,mBAAWrmB,GACV,MALe,SAMhB,CAEA,IAAe,EAEf,WAAA3V,GACC0E,QACavL,KAAKmd,KACbra,GAAG,sBAAuBC,IAC9BA,EAAMC,kBACN,WACC,MAAMi9B,EAAajgC,KAAKwhC,WAAa3a,SAAS7mB,KAAKwhC,YAAc,WAC3Dc,GAAU,CAAElzB,KAAM,aAAc6wB,eAEtCjgC,KAAK4mB,QACL,EALD,EAKI,GAEN,CAEA,UAAMzQ,SACC5K,MAAM4K,OACPnW,MAAK,UACHA,KAAK4mB,SACX5mB,MAAK,GAAe,EAEtB,CAEA,cAAIwhC,GACH,OAAOxhC,KAAKgB,KAhCW,cAiCxB,CAEA,YAAM4lB,GACL,MAAMpO,QAAiB,GACjBsqB,OF5BgBj6B,OAAOo3B,EAAa,QAC3C,IAAIkC,EAAgBF,GAAgBhC,GACpC,GAAGkC,EACF,OAAOx+B,MAAMC,KAAKu+B,EAAc5+B,UAEjC4+B,EAAgBF,GAAgBhC,GAAY,GACzC,MAAM6C,QAAe,UAEfhT,GADLmQ,EACa,GAAG,eAAqBA,IACzB,IAHQ,IAIlBj+B,KAEH,IAAI,IAAIqgC,KAAQS,EAClBX,EAAchgC,IAAIkgC,EAAK7zB,GAAI6zB,GACrB,GAAMlgC,IAAIkgC,EAAK7zB,GAAI6zB,GAGvB,OAAOS,CAAK,EEWMC,CAAS/iC,KAAKwhC,kBAC5B7V,GAAS/E,OAAO,CAAEpO,WAAUvX,UAAWjB,KAAKmd,KAAMnb,KAAM,CAAC+L,aAAcA,IAAgB+0B,UAC9F,EAGD,GAAOD,IACP,MC9CM,GAAiB,GAAGx2B,0CACpB,GAAgBoW,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,mBAAgCtD,WACzEs8B,GAAkBvgB,GAAShJ,KAAK,IAAIzP,IAAI,GAAG,qBAAkCtD,WAEnF,MAAMu8B,WAAyC,GAC9C,mBAAWzmB,GACV,MAPe,4BAQhB,CAEA,IAAe,EACf,IAAmB,KAEnB,WAAA3V,GACC0E,QAEA,MAAM4R,EAAOnd,KAAKmd,KAClBA,EAAKra,GAAG,gCAAiCC,IACxCA,EAAMC,kBACFhD,KAAKg3B,UACRh3B,KAAKkjC,qBAAqB,IAE5B/lB,EAAKra,GAAG,yBAA0BC,IACjCA,EAAMC,kBACFhD,KAAKg3B,UACR,WACC,MAAMmM,EAAanjC,MAAK,GAAiBkB,KAAK,2BACxCkiC,QAAkB97B,QAAQwR,IAAIqqB,EAAWr/B,KAAK4S,GAAaA,EAAS1V,KAAK,sBACzEhB,KAAK+3B,aAAaqL,GAAa,YAC/BpjC,KAAK4mB,SACX5mB,MAAK,GAAiBkvB,QACtBlvB,MAAK,GAAiB6R,SACtB7R,MAAK,GAAmB,IACxB,EARD,EASD,IAEDmd,EAAKra,GAAG,iBAAkBC,IACzBA,EAAMC,kBACN,MAAMlC,EAASiC,EAAMjC,OACfwB,EAAQxB,EAAOwB,MACf+gC,EAAkBviC,EAAOI,KAAKJ,EAAOE,KAAK,qBAAqBG,QACrEkiC,EAAgBniC,KAAK,gBAAgB0B,YAAY,UAC9CN,EAAMrC,OAAS,GACjBojC,EAAgBniC,KAAK,gBAAgBW,SAAS6N,IAC7BA,EAAQxO,KAAK,gCAAgCC,QAAQH,KAAK,sBAC/DsC,OAAOhB,GAAS,GAC1BoN,EAAQ/M,SAAS,SAAS,GAC1B,GAEL,CAEA,UAAMwT,SACC5K,MAAM4K,OACPnW,MAAK,GACTA,KAAK4mB,QAEP,CAEA,yBAAMsc,GACL,IAAIljC,MAAK,GAAiB,CACzB,MAAM,KAACmd,GAAQnd,KACTwY,QAAiBwqB,GACjBI,OAAkB,WACvB,MAAM5gC,EAAS,IAAIyY,IACbmoB,QAAkBpjC,KAAKsC,QAC7B,GAAI8gC,EACH,IAAK,MAAM/S,KAAY+S,EACtB5gC,EAAOoT,IAAIya,GAEb,OAAO7tB,CACP,EARuB,GAUlBy9B,EAAajgC,KAAKigC,WAClBvQ,OAAgB,UAClBuQ,SACYO,GAAiBP,IAAan8B,KAAI8pB,IAAwB,CAAEpf,GAAIof,EAAayC,atDnDtExnB,WACzB,MAAM6W,QAAcwQ,KAEpB,OADgBvsB,MAAMC,KAAK8b,EAAMnc,UAClByB,MAAK,CAACC,EAAGC,IACnBD,EAAEmK,KAAK7N,cAAgB2D,EAAEkK,KAAK7N,eACzB,EACL0D,EAAEmK,KAAK7N,cAAgB2D,EAAEkK,KAAK7N,cAC1B,EACD,GACN,EsD4CQ+hC,GAJc,SAOhB3X,GAAS/E,OAAO,CAAEpO,WAAUvX,UAAWkc,EAAMnb,KAAM,CAAE0tB,UAAS0T,YAAWnD,cAAc/iB,KAAK,WAClGld,MAAK,GAAmBmd,EAAKjc,KAAK,mBAAmBC,OAEtD,CACAnB,MAAK,GAAiB8/B,WACvB,CAEA,YAAMlZ,CAAOtkB,GACZA,EAAQA,SAAetC,KAAKsC,QAC5B,MAAMkW,QAAiB,GACvBmT,GAAS/E,OAAO,CAAEpO,WAAUvX,UAAWjB,KAAKmd,KAAMnb,KAAM,CAAEohC,UAAW9gC,GAAS,GAAI29B,WAAYjgC,KAAKigC,aACpG,CAEA,cAAIA,GACH,OAAOjgC,KAAKgB,KA/FU,cAgGvB,CAEA,iBAAMm3B,CAAY71B,GACjB,OAAOA,aAAiBqB,OAAkB,MAATrB,CAClC,CAEA,qBAAMk1B,GAAmB,CAEzB,kBAAMa,CAAa/1B,GACftC,MAAK,IACPA,MAAK,GAAiB6R,eAEjB7R,KAAK4mB,OAAOtkB,EACnB,EAGD,GAAO2gC,ICvHP,CAAEp0B,IACD,MAAM00B,EAAS,CAAClV,EAAO,IAAIhhB,QAC1B,MAAMm2B,EAAOnV,EAAKoV,cACZC,EAAQrV,EAAKsV,WAEnB,MAAO,CACNtV,KAFDA,EAAOA,EAAKE,UAELmV,QAAOF,OACb9Y,KAAa,IAAP8Y,EAAuB,IAARE,EAAcrV,EACnC,EAGIuV,EAAmB,CAAC3+B,EAAGC,KAC5BD,EAAIs+B,EAAOt+B,aAAaoI,KAAOpI,EAAIoI,KAAKa,MAAMjJ,IAC9CC,EAAIq+B,EAAOr+B,aAAamI,KAAOnI,EAAImI,KAAKa,MAAMhJ,IAEvCD,EAAEylB,MAAQxlB,EAAEwlB,MAUpB7b,EAAOg1B,UAAYh1B,EAAOg1B,WAAa,CACtCxV,KAAM,CACLyV,aAAcF,EACdG,gBAAkB1V,GAASuV,EAAiBvV,EAAM,IAAIhhB,MAC7C22B,QAXS,CAAC/+B,EAAGC,KACvBD,EAAIs+B,EAAOt+B,aAAaoI,KAAOpI,EAAIoI,KAAKa,MAAMjJ,IAC9CC,EAAIq+B,EAAOr+B,aAAamI,KAAOnI,EAAImI,KAAKa,MAAMhJ,IAEvCD,EAAEylB,KAAOxlB,EAAEwlB,OAUnB,EAhCD,CAgCGtkB,QChCH,CAAEyI,IACE,MAAMo1B,EAAa,IAAIjK,KAAKC,eAAe,UAAW,CAACiK,QAAS,OAAOR,MAAO,OAAQ1V,IAAI,YAK1Fnf,EAAOs1B,YAAct1B,EAAOs1B,aAAe,CAC7CZ,OALc,CAAClV,EAAO,IAAIhhB,OACnB42B,EAAW3J,OAAOjM,GAM1B,EATD,CASGjoB,QCTU9F,SAASC,KAGjBuC,GAAG,mCAAmC+F,MAAO9F,IAC9C2H,QAAQkgB,IAAI,CAAC7nB,gBACPyD,MAAM,4BAA6BE,SAAS,G","sources":["webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/javascript/String.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-mixins/src/Filterable.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-mixins/src/Searchable.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-mixins/src/Sortable.js","webpack://wot-campa-manager-backend/webpack/bootstrap","webpack://wot-campa-manager-backend/webpack/runtime/global","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Utils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Constants.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Manager.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/XMLHttpRequest.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Fetch.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Interceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/interceptors/TokenInterceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/interceptors/OAuthInterceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/interceptors/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/index.js","webpack://wot-campa-manager-backend/./client/js/Constants.js","webpack://wot-campa-manager-backend/./client/js/services/LocalStorageService.js","webpack://wot-campa-manager-backend/./client/js/services/LoginService.js","webpack://wot-campa-manager-backend/./client/js/HttpInterceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/ExtendPrototype.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/Utils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/Extender.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/EventSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/EventTarget.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/DataSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ManipulationSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/Node.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/QuerySupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/AttributeSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/Element.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ReadyEventSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/Document.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/DocumentFragment.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/HtmlClassSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ShowHideSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ValueSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLInputElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLTextAreaElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLSelectElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/DelegaterBuilder.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ListSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/NodeList.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HtmlCollection.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/Global.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/ObjectProperty.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/ObjectUtils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/PromiseUtils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/EventHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/Component.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/Constants.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/DefineComponentHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/NodeHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/PrivateProperty.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/Nodename.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/Events.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/Nodename.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/Events.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/Global.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-expression-language/src/DefaultValue.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-expression-language/src/Context.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-expression-language/src/ExpressionResolver.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Template.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/Attributes.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/Attributes.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/View/Nodename.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Directive.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Context.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Element.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/elements/Replace.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Initial.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Data.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/If.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Choose.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Include.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Foreach.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Repeat.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Text.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Attributes.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/AttachElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/OnFinished.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Renderer.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/View/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/WeakData.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Application.js","webpack://wot-campa-manager-backend/./client/js/GlobalFunctions.js","webpack://wot-campa-manager-backend/./client/js/javascript-extentions/Date.js","webpack://wot-campa-manager-backend/./client/js/RegistrateServiceWorker.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLDialogExtentionElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLLoginElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLClanElement.js","webpack://wot-campa-manager-backend/./client/js/services/ServiceUtils.js","webpack://wot-campa-manager-backend/./client/js/services/MemberService.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLMemberElement.js","webpack://wot-campa-manager-backend/./client/js/services/CampaignService.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Constants.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/ConditionHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/EditableHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/ValidationHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/MessageHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/ValueHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/DataHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/StateHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Base.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/BaseField.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/ValueHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/EventHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Wrapper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Text.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/File.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Checkbox.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Radio.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Select.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Field.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Validation.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/NodeHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/ValidationHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Container.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/FormButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/DeleteRow.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/Row.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/AddRow.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/Rows.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/List.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Page.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Message.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/BackButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/NextButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/SummaryButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/SubmitButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Control.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Step.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/ProgressBar.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/submitActions/SubmitActionResult.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/submitActions/BaseSubmitAction.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/submitActions/DefaultFormSubmitAction.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Form.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLCampaignsElement.js","webpack://wot-campa-manager-backend/./client/js/services/Cache.js","webpack://wot-campa-manager-backend/./client/js/services/CampaignRegistrationService.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLCampaignElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLCampaignMemberElement.js","webpack://wot-campa-manager-backend/./client/js/services/TeamService.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLTeamElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLTeamsElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLTeamMemberSearchField.js","webpack://wot-campa-manager-backend/./client/pages/index/js/FormUtils.js","webpack://wot-campa-manager-backend/./client/pages/index/js/DateFormat.js","webpack://wot-campa-manager-backend/./client/pages/index/js/Management.js"],"sourcesContent":["if (!String.prototype.hashcode)\r\n\tString.prototype.hashcode = function() {\r\n\t\tif (this.length === 0)\r\n\t\t\treturn 0;\r\n\t\t\r\n\t\tlet hash = 0;\r\n\t\tconst length = this.length;\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tconst c = this.charCodeAt(i);\r\n\t\t\thash = ((hash << 5) - hash) + c;\r\n\t\t\thash |= 0; // Convert to 32bit integer\r\n\t\t}\r\n\t\treturn hash;\r\n\t};","const BODY = document.body;\nconst TIMEOUT = 250;\n\nconst EVENTTYPE =\"mixin-filterable:action:filter-by\";\n\nconst DENIED_CHARACHER_FILTER = /[^a-z0-9-_]/i;\n\nconst ATTR__FILTERABLE_ITEM_CONTAINER_SELECTOR = \"filterable-item-container-selector\";\nconst ATTR__FILTERABLE_ITEM_SELECTOR = \"filter-content-selector\";\nconst ATTR__FILTERABLE_ITEM = \"filterable-item\";\nconst ATTR__FILTERABLE_BY = \"filterable-by\";\nconst ATTR__FILTERABLE_BY_VALUE = \"filterable-by-value\";\nconst ATTR__FILTER_ACTIVE_MARKER = \"active\";\nconst ATTR__FILTER_ACTIVE = \"active\";\n\nconst SELECTOR_FILTERABLE_ITEM = `[${ATTR__FILTERABLE_ITEM}]`;\n\nconst CLASS__FILTER_MISMATCHED = \"filterable-item-filter-mismatched\";\n\nconst filterValue = (item, filterValueSelector, filterValueAttribute) => {\n\tif(item.is(filterValueSelector))\n\t\treturn item.attr(filterValueAttribute);\n\t\n\tconst result = item.find(filterValueSelector).first()\n\tif(result)\n\t\treturn result.attr(filterValueAttribute);\n\t\n\treturn null;\n}\n\n\nconst MISMACHTEDFILTERFORITEM = new WeakMap();\nconst mismachtedFilterForItem = (item) => {\n\tlet data = MISMACHTEDFILTERFORITEM.get(item);\n\tif(data == null || typeof data === \"undefined\"){\n\t\tdata = new Map();\n\t\tMISMACHTEDFILTERFORITEM.set(item, data);\n\t}\n\t\n\treturn data;\t\n}\n\nconst filter = (target) => {\n\tconst filterActive = target.attr(ATTR__FILTER_ACTIVE_MARKER) != null;\n\t\n\tconst container = target.find(target.attr(ATTR__FILTERABLE_ITEM_CONTAINER_SELECTOR)).first();\t\n\tconst itemSelector = (target.attr(ATTR__FILTERABLE_ITEM_SELECTOR) || SELECTOR_FILTERABLE_ITEM).trim();\n\tconst filterBy = (target.attr(ATTR__FILTERABLE_BY) || \"\").trim().toLowerCase().replace(DENIED_CHARACHER_FILTER, \"_\");\n\tconst filterByValue = (target.attr(ATTR__FILTERABLE_BY_VALUE) || \"\").trim().toLowerCase();\n\tconst filterValueAttribute = `${ATTR__FILTERABLE_BY}--${filterBy}`;\n\tconst filterValueSelector = `[${filterValueAttribute}]`;\n\tconst filterKey = `${filterBy}::${filterByValue}`;\n\tcontainer.find(itemSelector).forEach((item) => {\n\t\tconst mismachtedFilter = mismachtedFilterForItem(item) ;\n\t\tif(filterActive)\t\t\t\n\t\t\tmismachtedFilter.delete(filterKey);\n\t\telse{\n\t\t\tconst value = filterValue(item, filterValueSelector, filterValueAttribute);\n\t\t\tif(value == null || value.trim().toLowerCase() != filterByValue)\t\t\t\t\t\n\t\t\t\tmismachtedFilter.set(filterKey, true );\n\t\t}\n\t\t\n\t\tif(mismachtedFilter.size != 0)\n\t\t\titem.addClass(CLASS__FILTER_MISMATCHED);\n\t\telse\n\t\t\titem.removeClass(CLASS__FILTER_MISMATCHED);\t\t\n\t});\t\n\ttarget.toggleAttribute(ATTR__FILTER_ACTIVE);\n}\n\n\nBODY.on(EVENTTYPE, (event) => {\n\tevent.stopPropagation();\n\tfilter(event.target);\n});","const BODY = document.body;\nconst TIMEOUT = 250;\n\nconst EVENTTYPE = \"mixin-searchable:action:search\";\n\n// attribute with a selector of an container with all searchable items \nconst ATTR__SEARCHABLE_ITEM_CONTAINER_SELECTOR = \"searchable-item-container-selector\";\n// attribute with a selector for the searchable items\nconst ATTR__SEARCHABLE_ITEM_SELECTOR = \"searchable-item-selector\";\n// default attribute as marker for a searchable marker. At this element would be add the class name, if it's sorted out.\nconst ATTR__SEARCHABLE_ITEM = \"searchable-item\";\n// default attribute that defines the text content, which is used for search\nconst ATTR__SEARCHABLE_CONTENT = \"searchable-content\";\n\nconst SELECTOR_SEARCHABLE_ITEM = `:not([${ATTR__SEARCHABLE_ITEM}]) [${ATTR__SEARCHABLE_ITEM}]`;\nconst SELECTOR_SEARCHABLE_CONTENT = `[${ATTR__SEARCHABLE_CONTENT}]`;\n\n// class name for an item which is sorted out\nconst CLASS__SEARCH_MISMATCHED = \"searchable-item-mismatched\";\n\nconst searchableContent = (target) => {\n\tconst items = Array.from(target.find(SELECTOR_SEARCHABLE_CONTENT) || []);\n\tif(target.is(SELECTOR_SEARCHABLE_CONTENT))\n\t\titems.push(target);\n\t\t\n\treturn items.map((item) => item.attr(ATTR__SEARCHABLE_CONTENT) || \"\").join(\" \").toLowerCase();\n}\n\nconst search = (target) => {\n\tconst values = (target.value || \"\").trim().toLowerCase();\n\tconst container = target.find(target.attr(ATTR__SEARCHABLE_ITEM_CONTAINER_SELECTOR)).first();\n\tconst itemSelector = (target.attr(ATTR__SEARCHABLE_ITEM_SELECTOR) || SELECTOR_SEARCHABLE_ITEM).trim();\n\tcontainer.find(itemSelector).removeClass(CLASS__SEARCH_MISMATCHED);\n\tif (values.length > 0) {\n\t\tconst filter = values.split(/\\s+/)\n\t\tcontainer.find(itemSelector).forEach((item) => {\n\t\t\tconst content =  searchableContent(item);\n\t\t\tif (filter.some((filter) => content.search(filter) < 0))\n\t\t\t\titem.addClass(CLASS__SEARCH_MISMATCHED);\n\t\t});\n\t}\n}\n\n\nlet SEARCHTIMOUTID = null;\nBODY.on(EVENTTYPE, (event) => {\n\tevent.stopPropagation();\n\tconst target = event.target;\n\tif (SEARCHTIMOUTID)\n\t\tclearTimeout(SEARCHTIMOUTID);\n\n\tSEARCHTIMOUTID = setTimeout(() => search(target), TIMEOUT);\n});","const BODY = document.body;\n\nconst EVENTTYPE = \"mixin-sortable:action:sort-by\";\n\nconst ATTR__SORTABLE_ITEM_CONTAINER_SELECTOR = \"sortable-item-container-selector\";\nconst ATTR__SORTABLE_BY = \"sortable-by\";\nconst ATTR__SORTABLE_DIRECTON = \"sortable-direction\";\n\nconst getItemByAttribute = (item, attributeSelector) => {\n\tif(!item) \n\t\treturn null;\n\n\tif(item.is(attributeSelector))\n\t\treturn item;\n\t\n\treturn item.find(attributeSelector).first() || null;\n}\n\nconst getValue = (item, attribute, attributeSelector) => {\n\titem = getItemByAttribute(item, attributeSelector);\n\tif(item != null)\n\t\treturn item.attr(attribute);\n\n\treturn null;\n} \n\nBODY.on(EVENTTYPE, (event) => {\n\tevent.stopPropagation();\n\tconst target = event.target;\n\tconst sortContainer = target.find(target.attr(ATTR__SORTABLE_ITEM_CONTAINER_SELECTOR)).first();\t\n\tconst valueAttribute = `${ATTR__SORTABLE_BY}--${target.attr(ATTR__SORTABLE_BY)}`;\n\tconst valueSelector = `[${valueAttribute}]`;\n\tconst direction = (target.attr(ATTR__SORTABLE_DIRECTON) || \"\").trim().toLowerCase();\n\tif(!sortContainer)\n\t\treturn;\n\t\t\n\tconst sorted = Array.from(sortContainer.children).sort((a, b) => {\t\t\t\t\n\t\tconst valueA = (getValue(a, valueAttribute, valueSelector) || \"\").toLowerCase();\n\t\tconst valueB = (getValue(b, valueAttribute, valueSelector) || \"\").toLowerCase()\t\t\n\t\tif (valueA < valueB)\n\t\t\treturn -1;\n\t\tif (valueA > valueB)\n\t\t\treturn 1;\n\t\treturn 0;\t\t\n\t});\t\n\t\n\tif(direction && direction === \"desc\")\n\t\tsorted.reverse();\n\t\n\tsortContainer.empty().append(sorted);\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const GLOBAL = (() => {\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\treturn {};\n})();\n\nexport {GLOBAL};\nconst Utils = {\n\tGLOBAL : GLOBAL\n};\n\nexport default Utils; ","import {GLOBAL} from \"./Utils\";\r\nexport const ORGFETCH = GLOBAL.fetch;","import { GLOBAL } from \"./Utils\";\r\nimport { ORGFETCH } from \"./Constants\";\r\nconst CURRENTORIGIN = GLOBAL.location.origin;\r\n\r\nclass Manager {\r\n\t#cache = {};\r\n\t#ignoredUrls = {};\r\n\t#ignoredOrigins = {};\r\n\t#ignoreDocumentOrigin = false;\r\n\t#interceptors = [];\r\n\t#setup = [];\r\n\t#readyCheck;\r\n\r\n\tconstructor() { }\r\n\r\n\tset ignoreDocumentOrigin(value) {\r\n\t\tthis.#ignoreDocumentOrigin = value;\r\n\t}\r\n\r\n\taddOriginToIgnore(origins) {\r\n\t\tif (origins instanceof Array)\r\n\t\t\tfor (let origin of origins)\r\n\t\t\t\tthis.#ignoredOrigins[origin.toString()] = true;\r\n\t\telse\r\n\t\t\tthis.#ignoredOrigins[origins.toString()] = true;\r\n\t}\r\n\r\n\taddUrlToIgnore(urls) {\r\n\t\tif (urls instanceof Array)\r\n\t\t\tfor (let url of urls)\r\n\t\t\t\tthis.#ignoredUrls[url.toString()] = true;\r\n\t\telse\r\n\t\t\tthis.#ignoredUrls[urls.toString()] = true;\r\n\t}\r\n\r\n\tsetup(setup) {\r\n\t\tif (typeof setup === \"function\" || setup instanceof Promise)\r\n\t\t\tthis.#setup.push(setup);\r\n\t}\r\n\r\n\taddInterceptor(aInterceptor) {\r\n\t\tif(aInterceptor instanceof Array)\r\n\t\t\treturn aInterceptor.forEach(interceptor => this.addInterceptor(interceptor));\r\n\t\tif (typeof aInterceptor !== \"object\")\r\n\t\t\tthrow new Error(\"function required an interceptor\");\r\n\t\tif (typeof aInterceptor.doAccept !== \"function\")\r\n\t\t\tthrow new Error(\"The interceptor required a \\\"doAccept\\\" function!\");\r\n\t\tif (typeof aInterceptor.doHandle !== \"function\")\r\n\t\t\tthrow new Error(\"The interceptor required a \\\"doHandle\\\" function!\");\r\n\r\n\t\tthis.#interceptors.push(aInterceptor);\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\tget ready() {\r\n\t\treturn (async () => {\t\t\t\r\n\t\t\tif (this.#setup.length == 0)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif(this.#readyCheck)\r\n\t\t\t\treturn this.#readyCheck;\r\n\r\n\t\t\tthis.#readyCheck = (async () => {\r\n\t\t\t\twhile(this.#setup.length != 0){\r\n\t\t\t\t\tconst setup = this.#setup[0];\r\n\t\t\t\t\tif (setup){\r\n\t\t\t\t\t\tconst interceptors = setup instanceof Promise ? await setup : await setup();\r\n\t\t\t\t\t\tif(interceptors)\r\n\t\t\t\t\t\t\tinterceptors instanceof Array ? interceptors.forEach(interceptor => this.addInterceptor(interceptor)) : this.addInterceptor(interceptors);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.#setup.shift();\r\n\t\t\t\t}\r\n\t\t\t\tthis.#readyCheck = null;\r\n\t\t\t\treturn this.ready;\r\n\t\t\t})();\r\n\r\n\t\t\treturn this.#readyCheck;\r\n\t\t})();\r\n\t}\r\n\r\n\tasync doIntercept(aData) {\r\n\t\tawait this.ready;\r\n\r\n\t\tconst origin = aData.metadata.origin;\r\n\r\n\t\tif (this.#isIgnored(origin, aData.url.toString()))\r\n\t\t\treturn aData;\r\n\r\n\t\tconst { url, metadata } = aData;\r\n\t\tconst chain = await this.#getChain(origin, { url, metadata });\r\n\t\tif (!chain)\r\n\t\t\treturn aData;\r\n\r\n\t\tfor (let interceptor of chain)\r\n\t\t\taData = await interceptor.doHandle(aData);\r\n\r\n\t\treturn aData;\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.#cache = {};\r\n\t}\r\n\r\n\tasync uncheckedFetch(url, request) {\r\n\t\treturn ORGFETCH(url, request);\r\n\t}\r\n\r\n\t#isIgnored(origin, url) {\r\n\t\tif (this.#ignoredUrls[url])\r\n\t\t\treturn true\r\n\t\tif (this.#ignoreDocumentOrigin && origin == CURRENTORIGIN)\r\n\t\t\treturn true;\r\n\t\tif (this.#ignoredOrigins[origin])\r\n\t\t\treturn true;\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tasync #getChain(origin, data) {\r\n\t\tlet chain = this.#cache[origin];\r\n\t\tif (!chain) {\r\n\t\t\tchain = this.#interceptorForOrigin(origin, data);\r\n\t\t\tthis.#cache[origin] = chain;\r\n\t\t}\r\n\r\n\t\treturn chain;\r\n\t}\r\n\r\n\tasync #interceptorForOrigin(origin, data) {\r\n\t\tconst result = [];\r\n\t\tfor (let interceptor of this.#interceptors) {\r\n\t\t\tif (await interceptor.doAccept(data))\r\n\t\t\t\tresult.push(interceptor)\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n};\r\n\r\nconst INSTANCE = new Manager();\r\nsetTimeout(() => INSTANCE.ready, 10);\r\n\r\n\r\nexport default INSTANCE;\r\nexport {Manager};","import Manager from \"./Manager\";\r\nimport {GLOBAL} from \"./Utils\";\r\n\r\nif(typeof GLOBAL.XMLHttpRequest !== \"undefined\"){\r\n\tconst ORGXHR = GLOBAL.XMLHttpRequest;\r\n\tconst executeRequest = function(aData){\r\n\t\tORGXHR.prototype.open.call(this, aData.request.method, aData.url, aData.metadata.async, aData.metadata.username, aData.metadata.password);\r\n\t\tif(typeof aData.request.headers !== \"undefined\")\r\n\t\t\tObject.getOwnPropertyNames(aData.request.headers)\r\n\t\t\t.forEach(aHeader =>{\r\n\t\t\t\tORGXHR.prototype.setRequestHeader.call(this, aHeader, aData.request.headers[aHeader]);\r\n\t\t\t});\r\n\t\tORGXHR.prototype.send.call(this, aData.request.body);\r\n\t}\r\n\tconst XHR = function (){\r\n\t\tconst xhr = new ORGXHR(arguments);\r\n\t\tlet data = undefined;\r\n\t\t\r\n\t\txhr.setRequestHeader = function(aName, aValue){\r\n\t\t\tdata.request.headers = data.request.headers || {};\r\n\t\t\tdata.request.headers[aName] = aValue;\r\n\t\t};\r\n\t\t\r\n\t\txhr.open = function(aMethod, aUrl, isAsync, aUsername, aPassword){\r\n\t\t\tconst url = new URL(aUrl, GLOBAL.location.origin);\r\n\t\t\tdata = {\r\n\t\t\t\turl : new URL(aUrl, location),\r\n\t\t\t\trequest : {\r\n\t\t\t\t\tmethod : aMethod\r\n\t\t\t\t},\r\n\t\t\t\tmetadata : {\r\n\t\t\t\t\tmethod : aMethod,\r\n\t\t\t\t\torigin: url.origin,\r\n\t\t\t\t\tprotocol : url.protocol,\r\n\t\t\t\t\thostname: url.hostname,\r\n\t\t\t\t\tport: url.port,\r\n\t\t\t\t\tpath : url.pathname,\r\n\t\t\t\t\tquery: url.search,\r\n\t\t\t\t\thash : url.hash,\r\n\t\t\t\t\tasync : typeof isAsync === \"boolean\" ? isAsync : true,\r\n\t\t\t\t\tusername : aUsername,\r\n\t\t\t\t\tpassword : aPassword\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\t\t\r\n\t\txhr.send = function(aBody){\r\n\t\t\tif(data.metadata.async){\r\n\t\t\t\tdata.request.body = aBody; \r\n\t    \t\tManager.doIntercept(data)\r\n\t    \t\t.then(executeRequest.bind(xhr))\r\n\t    \t\t[\"catch\"](console.error);\r\n\t\t    }\r\n\t\t\telse\r\n\t\t\t\texecuteRequest.call(xhr, data);\r\n\t\t};\r\n\t\t\r\n\t\treturn xhr;\r\n\t};\r\n\t\r\n\tGLOBAL.XMLHttpRequest = XHR;\r\n\tGLOBAL.XMLHttpRequest.prototype = ORGXHR.prototype;\r\n\tGLOBAL.XMLHttpRequest.prototype.constructor = XHR;\r\n}","import Manager from \"./Manager\";\r\nimport {GLOBAL} from \"./Utils\";\r\nimport {ORGFETCH} from \"./Constants\";\r\n\t\r\nGLOBAL.fetch = async function(aUrl, aRequest){\r\n\tconst url = new URL(aUrl, GLOBAL.location);\r\n\tconst data = await Manager.doIntercept({\r\n\t\t\turl : new URL(aUrl, location),\r\n\t\t\trequest : aRequest || {},\r\n\t\t\tmetadata : {\r\n\t\t\t\tmethod : typeof aRequest === \"undefined\" ? \"GET\" : (aRequest.method || \"GET\"),\r\n\t\t\t\torigin: url.origin,\r\n\t\t\t\tprotocol : url.protocol,\r\n\t\t\t\thostname: url.hostname,\r\n\t\t\t\tport: url.port,\r\n\t\t\t\tpath : url.pathname,\r\n\t\t\t\thash : url.hash,\r\n\t\t\t\tquery: url.search,\r\n\t\t\t\tasync : true\r\n\t\t\t}\r\n\t\t});\r\n\t\t\t\r\n\treturn ORGFETCH(data.url, data.request);\r\n};","import {ORGFETCH} from \"./Constants\";\r\n\r\nexport default class Interceptor{\r\n    async doAccept(data){}\r\n    async doHandle(data){}\r\n    async unceckedFetch(url, request){\r\n\t\treturn ORGFETCH(url, request);\r\n\t}\r\n\r\n};","/**\r\n * aSetup  =>\r\n * {\r\n * \tcondition : [string | string[] | function(aData}],\r\n * \tfetchToken : function(),\r\n *  appendToken : function(aToken, aData),\r\n *  (optional) refreshInterval,\r\n *  (optional) refreshToken : function()\r\n * }\r\n */\r\n\r\nconst defaultTokenAppender = async (token, data) => {\r\n\tdata.request.headers = data.request.headers || {};\r\n\tdata.request.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\treturn data;\r\n}\r\n\r\nimport Interceptor from \"../Interceptor\";\r\nexport default class TokenInterceptor extends Interceptor {\r\n\r\n\t#token = null;\r\n\t#lastData = {};\r\n\t#condition;\r\n\t#fetchToken;\r\n\t#appendToken;\r\n\t#refreshInterval;\r\n\t#refreshToken;\r\n\r\n\tconstructor({ condition, fetchToken, appendToken, refreshInterval = 60 * 1000, refreshToken }) {\r\n\t\tsuper();\r\n\t\tif(typeof condition !== \"string\" && !(condition instanceof Array) && typeof condition !== \"function\")\r\n\t\t\tthrow new Error(`Parameter \"condition\" must be a \"string\", \"array\" or \"function\"!`);\r\n\t\tthis.#condition = condition;\r\n\t\t\r\n\t\tif(typeof fetchToken !== \"function\")\r\n\t\t\tthrow new Error(`Parameter \"fetchToken\" must be a \"function\"!`);\r\n\t\tthis.#fetchToken = fetchToken;\r\n\r\n\t\tif(appendToken && typeof appendToken !== \"function\")\r\n\t\t\tthrow new Error(`Parameter \"appendToken\" must be a \"function\"!`);\r\n\t\tthis.#appendToken = appendToken || defaultTokenAppender;\r\n\r\n\t\tthis.#refreshInterval = refreshInterval;\r\n\t\tthis.#refreshToken = refreshToken;\r\n\t}\r\n\r\n\tasync doAccept(data) {\r\n\t\tconst type = typeof this.#condition;\r\n\t\tconst condition = this.#condition;\r\n\t\tconst origin = data.metadata.origin;\r\n\t\tif (type === \"function\") return await condition(data);\r\n\t\telse if (type === \"string\") return condition == origin;\r\n\t\telse if (condition instanceof Array)\r\n\t\t\treturn condition.includes(origin);\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tasync doHandle(data) {\r\n\t\tif (!this.#token) {\r\n\t\t\tconst { url, metadata } = data;\r\n\t\t\tthis.#lastData = { url, metadata };\r\n\t\t\tthis.#token = this.#fetchToken({ url, metadata });\r\n\t\t\tthis.#startRefresh();\r\n\t\t}\r\n\r\n\t\treturn this.#callAppendToken(data);\r\n\t}\r\n\r\n\tasync #callAppendToken(data) {\r\n\t\tconst appender = this.#appendToken;\r\n\t\tconst token = await this.#token;\r\n\t\tconst result = await appender(token, data);\r\n\r\n\t\treturn result ? result : data;\r\n\t}\r\n\r\n\t#startRefresh() {\r\n\t\tif (this.#refreshInterval > 0) {\r\n\t\t\tconst refreshToken = this.#refreshToken || (() => this.#fetchToken(this.#lastData));\r\n\t\t\tconst timeout = async () => {\r\n\t\t\t\tif (this.#refreshToken)\r\n\t\t\t\t\tawait this.#refreshToken(this.#lastData);\r\n\t\t\t\telse\r\n\t\t\t\t\tawait this.#fetchToken(this.#lastData);\r\n\r\n\t\t\t\tsetTimeout(timeout,this.#refreshInterval );\r\n\t\t\t};\r\n\r\n\r\n\t\t\tsetTimeout(timeout , this.#refreshInterval);\r\n\t\t}\r\n\t}\r\n};","import TokenInterceptor from \"./TokenInterceptor\"\r\n\r\nconst OAuthInterceptor = function(aSetup){\r\n\tconst setup = aSetup;\r\n\tsetup.fetchToken = async () => {\r\n\t\tconst response = await fetch(setup.login.url, {\r\n\t\t\tmethod: (setup.login.method || \"get\")\r\n\t\t});\r\n\t\tresponse = await response.json();\r\n\t\treturn response[setup.login.response.valueSelector];\r\n\t};\r\n\treturn TokenInterceptor(aSetup);\r\n};\r\n\r\nexport default OAuthInterceptor;\r\n","import OAuthInterceptor from \"./OAuthInterceptor\";\r\nimport TokenInterceptor from \"./TokenInterceptor\";\r\n\r\n\r\nexport default  {\r\n\tOAuthInterceptor,\r\n\tTokenInterceptor\r\n};","import {GLOBAL} from \"./Utils\";\r\nimport \"./XMLHttpRequest\";\r\nimport \"./Fetch\";\r\nimport Manager from \"./Manager\";\r\nimport Interceptor from \"./Interceptor\";\r\nimport interceptors from \"./interceptors\";\r\n\r\nGLOBAL.defaultjs = GLOBAL.defaultjs || {};\r\nGLOBAL.defaultjs.httpinterceptor = GLOBAL.defaultjs.httpinterceptor || {\r\n\tVERSION : \"${version}\",\r\n\tManager,\r\n\tInterceptor,\r\n\tinterceptors\r\n};","export const TEMPLATE_BASEPATH = \"/templates\";\r\nexport const EVENT__GLOBAL_ACTION_RELOADPARENT = \"global:action:reload-parent\";\r\nexport const URL_LOGIN = \"/api/system/login\";\r\nexport const URL_ACCESS = \"/api/system/access\";\r\nexport const PAGEURL = new URL(location);\r\n\r\nexport const ROLEMAPPING = {\r\n\t\"ex-member\" : \"EX Member\",\r\n\t\"reservist\" : \"Reservist\",\r\n\t\"recruit\" : \"Anwärter\",\r\n\t\"private\" : \"Member\",\r\n\t\"junior_officer\" : \"Member\",\r\n\t\"combat_officer\" : \"Feldkommandent\",\r\n\t\"personnel_officer\": \"Personal Offizier\",\r\n\t\"recruitment_officer\" : \"Anwerber\",\r\n\t\"executive_officer\": \"Ausführender Offizier\",\r\n\t\"commander\" : \"Clan Leader\"\r\n}\r\n\r\nexport const APPGLOBAL = {\r\n\tROLEMAPPING\r\n};\r\nwindow.APPGLOBALS = APPGLOBAL;","const STORAGE = window.localStorage;\r\n\r\n\r\nexport const storeValue = (key, data) => {\r\n\tSTORAGE.setItem(key, JSON.stringify({ data}));\r\n};\r\n\r\nexport const loadValue = (key) => {\r\n\tconst { data = null } = JSON.parse(STORAGE.getItem(key) || \"{}\");\r\n\treturn data;\r\n};\r\n\r\nexport const deleteValue = (key) => {\r\n\tSTORAGE.removeItem(key);\r\n};","import { APPGLOBAL, PAGEURL, URL_LOGIN, URL_ACCESS } from \"../Constants.js\";\r\nimport { loadValue, storeValue, deleteValue } from \"./LocalStorageService.js\";\r\n\r\nconst SECOND = 1000;\r\nconst MINUTE = 60 * SECOND;\r\nconst DAY = 24 * 60 * MINUTE;\r\n\r\nconst STORAGE_ITEM__LOGIN = \"cached-login\";\r\n\r\nlet isloggedIn = false;\r\nlet ACCESSRIGHTS = {};\r\nlet MEMBER;\r\nlet ACCESSTOKEN;\r\nlet EXPIREAT;\r\n\r\nconst isExpired = (expireAt = 0) => {\r\n\tif (expireAt - (Date.now() + DAY) < 0)\r\n\t\treturn true;\r\n\r\n\treturn false;\r\n}\r\n\r\nconst access = async () => {\r\n\r\n\tlet response = await fetch(new URL(URL_ACCESS, location));\r\n\tif (response.status == 401) return false;\r\n\tif (response.status == 403) return null;\r\n\r\n\tresponse = await response.json();\r\n\tstoreValue(STORAGE_ITEM__LOGIN, response);\r\n\r\n\tconst { member, accessToken, expireAt, accessRights } = response;\r\n\t\r\n\tif (isExpired(expireAt))\r\n\t\treturn false;\r\n\t\r\n\tMEMBER = member;\r\n\tACCESSTOKEN = accessToken;\r\n\tEXPIREAT = expireAt;\r\n\tACCESSRIGHTS = accessRights;\r\n\r\n\tAPPGLOBALS.member = MEMBER\r\n\tAPPGLOBALS.accessRights = ACCESSRIGHTS;\r\n\r\n\tscheduleNexAccessTokenRefresh();\r\n\r\n\treturn true;\r\n};\r\n\r\nconst cachedLogin = async () => {\r\n\tconst cachedLogin = loadValue(STORAGE_ITEM__LOGIN);\r\n\tif (!cachedLogin)\r\n\t\treturn false;\r\n\r\n\tconst { member, accessToken, expireAt } = cachedLogin;\r\n\r\n\tif (isExpired(expireAt)){\r\n\t\tdeleteValue(STORAGE_ITEM__LOGIN);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst url = new URL(URL_LOGIN, location);\r\n\tconst params = url.searchParams;\r\n\tparams.set(\"status\", \"ok\");\r\n\tparams.set(\"access_token\", accessToken);\r\n\tparams.set(\"account_id\", member.id);\r\n\tparams.set(\"expires_at\", expireAt - Date.now());\r\n\r\n\tawait fetch(url);\r\n};\r\n\r\nconst scheduleNexAccessTokenRefresh = () => {\r\n\tconst timeOffset = EXPIREAT - (Date.now() + MINUTE);\r\n\r\n\tsetTimeout(async () => {\r\n\t\tawait access();\r\n\t}, timeOffset);\r\n};\r\n\r\nexport const login = async () => {\r\n\tif (!isloggedIn) {\r\n\t\tawait cachedLogin();\r\n\t\tif (!await access()) {\r\n\t\t\tlocation.href = new URL(URL_LOGIN, location).toString();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tisloggedIn = true;\r\n\t}\r\n\r\n\treturn MEMBER;\r\n};\r\n\r\nexport const fullAccessData = () => {\r\n\treturn {\r\n\t\taccessToken: ACCESSTOKEN,\r\n\t\texpireAt: EXPIREAT,\r\n\t\tmember: MEMBER,\r\n\t\taccessRights: ACCESSRIGHTS\r\n\t}\r\n}\r\n\r\nexport const accessRights = () => {\r\n\treturn ACCESSRIGHTS;\r\n}\r\n\r\nexport const member = () => {\r\n\treturn MEMBER;\r\n}\r\n\r\nexport const accessToken = () => {\r\n\treturn ACCESSTOKEN;\r\n}\r\n\r\n\r\n","import \"@default-js/defaultjs-httpinterceptor\";\r\nimport Manager from \"@default-js/defaultjs-httpinterceptor/src/Manager.js\";\r\nimport Interceptor from \"@default-js/defaultjs-httpinterceptor/src/Interceptor.js\";\r\nimport { accessToken } from \"./services/LoginService.js\";\r\n\r\nexport default class AuthInterceptor extends Interceptor {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync doAccept(data) {\r\n\t\treturn location.origin == data.metadata.origin;\r\n\t}\r\n\r\n\tasync doHandle(data) {\r\n\t\tconst token = accessToken();\r\n\t\tif (token) {\r\n\t\t\tdata.request.headers = data.request.headers || {};\r\n\t\t\tdata.request.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\nManager.addInterceptor(new AuthInterceptor());\r\n","const extendPrototype = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst type = args.shift();\t\r\n\twhile(args.length > 0){\r\n\t\tconst extender = args.shift();\r\n\t\textender(type);\r\n\t}\r\n};\r\n\r\nexport default extendPrototype;","const Utils = {\r\n\tglobal : (() => {\r\n\t\tif(typeof window !== \"undefined\") return window;\r\n\t\tif(typeof global !== \"undefined\") return global;\r\n\t\tif(typeof self !== \"undefined\") return self;\r\n\t\treturn {};\t\t\r\n\t})(),\r\n\tglobalVar : function(aName, aInitValue){\r\n\t\tif(arguments.length === 2 && typeof Utils.global[aName] === \"undefined\")\r\n\t\t\tUtils.global[aName] = aInitValue;\r\n\t\t\r\n\t\treturn Utils.global[aName];\t\t\r\n\t}\r\n};\r\n\r\nexport default Utils;","import Utils from \"./Utils\";\r\n\r\nconst EXTENSIONS_MAP = Utils.globalVar(\"___DOM_API_EXTENSION_MAP___\", {});\r\nconst Extender = function(aName, aExtention){\r\n\treturn function(aType){\t\r\n\t\tlet extensions = EXTENSIONS_MAP[aType.name];\r\n\t\tif(!extensions)\r\n\t\t\textensions = EXTENSIONS_MAP[aType.name] = {};\t\t\r\n\t\t\r\n\t\tif(!extensions[aName]){\r\n\t\t\textensions[aName] = true;\r\n\t\t\taExtention(aType.prototype);\r\n\t\t}\r\n\t\telse\r\n\t\t\tconsole.warn(\"duplicated load of extension \\\"\" + aName + \"\\\"!\");\r\n\t}\r\n};\r\n\r\nexport default Extender;","import Extender from \"../../utils/Extender\";\r\n\r\nconst DEFAULT_TIMEOUT = 100;\r\nconst support = Extender(\"EventSupport\", (Prototype) => {\r\n\tconst EVENTSPLITER = /(\\s+)|(\\s*,\\s*)/;\r\n\tconst getWrapperHandleMap = (element) => {\r\n\t\tif (!element.__wrapperhandlemap__) element.__wrapperhandlemap__ = new Map();\r\n\r\n\t\treturn element.__wrapperhandlemap__;\r\n\t};\r\n\r\n\tconst getTriggerTimeouts = (element) => {\r\n\t\tif (!element.___EVENTTRIGGERTIMEOUTS___) element.___EVENTTRIGGERTIMEOUTS___ = {};\r\n\r\n\t\treturn element.___EVENTTRIGGERTIMEOUTS___;\r\n\t};\r\n\r\n\tconst removeWrapper = (element, data, eventTypes) => {\r\n\t\tconst { wrapper, option, events, handle } = data;\r\n\t\tconst capture = option.capture;\r\n\t\tif (eventTypes) {\r\n\t\t\teventTypes = typeof eventTypes === \"string\" ? eventTypes.split(EVENTSPLITER) : eventTypes;\r\n\t\t\tfor (let event of eventTypes) {\r\n\t\t\t\tconst index = events.indexOf(event);\r\n\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\telement.removeEventListener(event, wrapper, capture);\r\n\t\t\t\t\tevents.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (events.length == 0) getWrapperHandleMap(element).delete(handle);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let event of events) {\r\n\t\t\t\telement.removeEventListener(event, wrapper, capture);\r\n\t\t\t}\r\n\t\t\tgetWrapperHandleMap(element).delete(handle);\r\n\t\t}\r\n\t};\r\n\r\n\tPrototype.on = function () {\r\n\t\tif (arguments.length < 2) throw new Error(\"Too less arguments!\");\r\n\r\n\t\tconst args = Array.from(arguments);\r\n\t\tlet events = typeof args[0] === \"string\" ? args.shift().split(EVENTSPLITER) : args.shift();\r\n\t\tconst filter = typeof args[0] === \"string\" ? args.shift() : null;\r\n\t\tconst handle = args.shift();\r\n\t\tconst option = typeof args[0] === \"undefined\" ? { capture: false, once: false, passive: false } : typeof args[0] === \"boolean\" ? { capture: args.shift(), once: false, passive: false } : args.shift();\r\n\t\tconst wrapper = function (event) {\r\n\t\t\tif (filter) {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\tif (typeof target.is === \"function\" && !target.is(filter)) return;\r\n\t\t\t}\r\n\t\t\tconst result = handle.apply(null, arguments);\r\n\t\t\tif (option.once) removeWrapper(this, wrapper);\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tgetWrapperHandleMap(this).set(handle, { handle, wrapper: wrapper, events, option });\r\n\r\n\t\tfor (let event of events) {\r\n\t\t\tthis.addEventListener(event, wrapper, option);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPrototype.removeOn = function (handle, event, capture) {\r\n\t\tconst data = getWrapperHandleMap(this).get(handle);\r\n\t\tif (data) removeWrapper(this, data, event);\r\n\t\telse this.removeEventListener(handle, event, capture);\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPrototype.trigger = function () {\r\n\t\tconst args = Array.from(arguments);\r\n\t\tconst timeout = typeof args[0] === \"number\" ? args.shift() : -1;\r\n\t\tif (timeout >= 0) {\r\n\t\t\tconst type = args[0];\r\n\t\t\tconst timeouts = getTriggerTimeouts(this);\r\n\t\t\tconst timeoutid = timeouts[type];\r\n\t\t\tif (timeoutid) clearTimeout(timeoutid);\r\n\r\n\t\t\ttimeouts[type] = setTimeout(() => {\r\n\t\t\t\tdelete timeouts[type];\r\n\t\t\t\tthis.trigger.apply(this, args);\r\n\t\t\t}, timeout);\r\n\t\t} else {\r\n\t\t\tconst type = args.shift();\r\n\t\t\tconst delegate = args[0] instanceof Event ? args.shift() : null;\r\n\t\t\tconst data = args.length >= 1 ? (args.length == 1 ? args.shift() : args) : delegate;\r\n\t\t\tconst event = data ? new CustomEvent(type, { bubbles: true, cancelable: true, composed: true, detail: data }) : new Event(type, { bubbles: true, cancelable: true, composed: true });\r\n\r\n\t\t\tif (delegate) event.delegatedEvent = delegate;\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\nexport default support;\r\n","import extendPrototype from \"../utils/ExtendPrototype\";\nimport EventSupport from \"./extentions/EventSupport\";\n\nextendPrototype(EventTarget, EventSupport);","import Extender from \"../../utils/Extender\";\r\nconst support = Extender(\"DataSupport\", Prototype => {\r\n\tPrototype.data = function() {\r\n\t\tconst data = {};\r\n\t\tif (typeof this.dataset !== \"undefined\")\r\n\t\t\tfor (name in this.dataset)\r\n\t\t\t\tdata[name] = this.dataset[name];\r\n\r\n\t\tthis.data = (function() {\r\n\t\t\tif (arguments.length == 0)\r\n\t\t\t\treturn data;\r\n\t\t\telse if (arguments.length == 1)\r\n\t\t\t\treturn data[arguments[0]];\r\n\t\t\telse if (typeof arguments[1] === \"undefined\" || arguments[1] == null)\r\n\t\t\t\tdelete data[arguments[0]];\r\n\t\t\telse\r\n\t\t\t\tdata[arguments[0]] = arguments[1];\r\n\r\n\t\t\treturn this;\r\n\t\t}).bind(this);\r\n\r\n\t\treturn this.data.apply(null, arguments);\r\n\t};\r\n});\r\nexport default support;","import Extender from \"../../utils/Extender\";\r\nimport Utils from \"../../utils/Utils\";\r\n\r\nconst support = Extender(\"ManipulationSupport\", Prototype => {\t\r\n\tPrototype.empty = function(){\r\n\t\tlet nodes = this.childNodes\r\n\t\twhile(nodes.length != 0)\t\t\t\r\n\t\t\tnodes[0].remove(true);\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\tPrototype.content = function(){\r\n\t\treturn this.childNodes;\r\n\t};\t\r\n\t\r\n\tPrototype.html = function(){\r\n\t\tif(arguments.length == 0)\t\t\t\r\n\t\t\treturn this.innerHTML;\r\n\t\telse if(arguments.length == 1 && typeof arguments[0] === \"boolean\")\r\n\t\t\tif(arguments[0])\r\n\t\t\t\treturn this.outerHTML;\r\n\t\t\telse\r\n\t\t\t\treturn this.innerHTML;\r\n\t\telse \r\n\t\t\tArray.from(arguments).forEach(content => {\r\n\t\t\t\tthis.empty();\r\n\t\t\t\tif(typeof content === \"string\")\r\n\t\t\t\t\tthis.append(content);\r\n\t\t\t\telse if(content instanceof Node || content instanceof NodeList || content instanceof HTMLCollection){\r\n\t\t\t\t\tthis.append(content);\r\n\t\t\t\t}\r\n\t\t\t});\t\t\r\n\t\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\tconst append = function(){\r\n\t\tconst append = Prototype.appendChild.bind(this);\r\n\t\tfor(let i = 0; i < arguments.length; i++){\r\n\t\t\tlet arg = arguments[i];\r\n\t\t\tif(arg instanceof Node)\r\n\t\t\t\tthis.appendChild(arg);\r\n\t\t\telse if(typeof arg === \"string\")\r\n\t\t\t\tcreate(arg).forEach(append);\r\n\t\t\telse if(typeof arg.forEach === \"function\")\r\n\t\t\t\targ.forEach(append);\r\n\t\t}\r\n\t};\t\r\n\tPrototype.append = append;\r\n\t\r\n\tconst prepend = function(aFirstElement, aElement){\r\n\t\tthis.insertBefore(aElement, aFirstElement);\r\n\t};\r\n\tPrototype.prepend = function(){\r\n\t\tif(this.childNodes.length == 0)\r\n\t\t\tappend.apply(this, arguments);\r\n\t\telse {\r\n\t\t\tconst first = this.childNodes.first();\r\n\t\t\tconst insert = prepend.bind(this, first);\r\n\t\t\tfor(let i = 0; i < arguments.length; i++){\r\n\t\t\t\tconst arg = arguments[i];\r\n\t\t\t\tif(arg instanceof Node)\r\n\t\t\t\t\tinsert(arg);\r\n\t\t\t\telse if(typeof arg === \"string\")\r\n\t\t\t\t\targ.forEach(insert);\r\n\t\t\t\telse if(typeof arg.forEach === \"function\")\r\n\t\t\t\t\targ.forEach(insert);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tPrototype.replace = function(){\r\n\t\tif(arguments.length < 1)\r\n\t\t\tthrow new Error(\"Insufficient arguments! One or two nodes required!\");\r\n\t\t\r\n\t\tconst parent = arguments.length == 1 ? this.parentNode : this;\r\n\t\tconst oldNode = arguments.length == 1 ? this : arguments[0];\r\n\t\tconst newNode = arguments.length == 1 ? arguments[0] : arguments[1];\r\n\t\t\r\n\t\tif(newNode instanceof Array || newNode instanceof NodeList || newNode instanceof HTMLCollection){\r\n\t\t\tnewNode.forEach(aItem => parent.insertBefore(aItem, oldNode));\r\n\t\t\toldNode.remove();\r\n\t\t}\r\n\t\telse\r\n\t\t\tparent.replaceChild(newNode,oldNode);\r\n\t};\r\n\t\r\n\tPrototype.after = function(){\r\n\t\tif(this.parentNode == null)\r\n\t\t\tthrow new Error(\"Can't insert nodes after this node! Parent node not available!\");\r\n\t\t\r\n\t\tconst parent = this.parentNode;\r\n\t\tconst next = this.nextSibling;\r\n\t\tif(next)\r\n\t\t\tPrototype.before.apply(next, arguments);\r\n\t\telse\r\n\t\t\tPrototype.append.apply(parent, arguments);\r\n\t};\t\r\n\t\r\n\tPrototype.before = function(){\r\n\t\tif(this.parentNode == null)\r\n\t\t\tthrow new Error(\"Can't insert nodes after this node! Parent node not available!\");\r\n\t\t\r\n\t\tconst parent = this.parentNode;\r\n\t\tconst inserter = (node) => {parent.insertBefore(node, this);}\r\n\t\tfor(let i = 0; i < arguments.length; i++){\r\n\t\t\tconst arg = arguments[i];\r\n\t\t\tif(arg instanceof Node)\r\n\t\t\t\tinserter(arg);\r\n\t\t\telse if(typeof arg === \"string\")\r\n\t\t\t\targ.forEach(inserter);\r\n\t\t\telse if(typeof arg.forEach === \"function\")\r\n\t\t\t\targ.forEach(inserter);\r\n\t\t}\r\n\t};\t\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport DataSupport from \"./extentions/DataSupport\";\r\nimport ManipulationSupport from \"./extentions/ManipulationSupport\";\r\n\r\nextendPrototype(Node,DataSupport,ManipulationSupport);","import Extender from \"../../utils/Extender\";\r\n\r\nconst parentSelector = /:parent(\\(\\\"([^\\)]*)\\\"\\))?/i;\r\nconst queryExecuter = function (aElement, aSelector) {\r\n\tlet match = parentSelector.exec(aSelector);\r\n\tif (match) {\r\n\t\tlet result = aElement;\r\n\t\tif (match.index > 0) {\r\n\t\t\tresult = aElement.querySelectorAll(aSelector.substr(0, match.index));\r\n\t\t\tif (result.length == 0) return;\r\n\t\t}\r\n\t\tresult = result.parent(match[2]);\r\n\t\tif (result) {\r\n\t\t\tlet nextSelector = aSelector.substr(match.index + match[0].length).trim();\r\n\t\t\tif (nextSelector.length > 0) result = result.find(nextSelector);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\t} else return aElement.querySelectorAll(aSelector);\r\n};\r\n\r\nconst support = Extender(\"QuerySupport\", (Prototype) => {\r\n\tPrototype.find = function () {\r\n\t\tlet nodes = [];\r\n\t\tlet args = Array.from(arguments);\r\n\t\tlet arg = args.shift();\r\n\t\twhile (arg) {\r\n\t\t\tif (typeof arg === \"string\") {\r\n\t\t\t\tlet result = queryExecuter(this, arg);\r\n\t\t\t\tif (result) nodes.push(result);\r\n\t\t\t}\r\n\r\n\t\t\targ = args.shift();\r\n\t\t}\r\n\r\n\t\tlet result = NodeList.from.apply(null, nodes);\r\n\t\treturn result;\r\n\t};\r\n\r\n\tPrototype.is = function () {\r\n\t\tif (this instanceof Document || this instanceof DocumentFragment) return false;\r\n\t\telse if (arguments.length == 1) {\r\n\t\t\tif (typeof arguments[0] === \"string\") return this.matches(arguments[0]);\r\n\t\t\telse if (typeof arguments[0].length === \"number\") {\r\n\t\t\t\tlet filter = arguments[0];\r\n\t\t\t\tfor (let i = 0; i < filter.length; i++) if (this.matches(filter[i])) return true;\r\n\t\t\t}\r\n\t\t} else if (arguments.length > 1) return this.is(Array.from(arguments));\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tPrototype.parent = function (selector, ignoreShadowRoot) {\r\n\t\tif (!this.parentNode) return null;\r\n\t\tignoreShadowRoot = typeof selector === \"boolean\" ? selector : ignoreShadowRoot;\r\n\t\tselector = typeof selector === \"string\" ? selector : null;\r\n\r\n\t\tlet parent = this.parentNode;\r\n\t\tif (parent instanceof ShadowRoot && ignoreShadowRoot) parent = parent.host;\r\n\r\n\t\tif (selector) {\r\n\t\t\ttry {\r\n\t\t\t\twhile (parent && !parent.is(selector)) parent = parent.parent(selector, ignoreShadowRoot);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"this:\", this, \"parent:\", parent, \"error:\", e);\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t\treturn parent;\r\n\t};\r\n\r\n\tPrototype.parents = function () {\r\n\t\tlet result = new Array();\r\n\t\tlet parent = Prototype.parent.apply(this, arguments);\r\n\t\twhile (parent) {\r\n\t\t\tresult.push(parent);\r\n\t\t\tparent = Prototype.parent.apply(parent, arguments);\r\n\t\t}\r\n\r\n\t\treturn NodeList.from(result);\r\n\t};\r\n\r\n\tPrototype.selector = function () {\r\n\t\tif (this instanceof Document || this instanceof DocumentFragment) return undefined;\r\n\t\telse if (this.id) return \"#\" + this.id;\r\n\t\telse {\r\n\t\t\tlet selector = this.tagName.toLowerCase();\r\n\t\t\tlet parent = this.parent();\r\n\t\t\tif (parent) {\r\n\t\t\t\tlet sameTagSiblings = parent.find(\":scope>\" + selector);\r\n\t\t\t\tif (sameTagSiblings instanceof NodeList) {\r\n\t\t\t\t\tlet index = sameTagSiblings.indexOf(this);\r\n\t\t\t\t\tif (index > 0) selector += \":nth-child(\" + (index + 1) + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlet parentSelector = parent.selector();\r\n\t\t\t\treturn parentSelector ? parentSelector + \">\" + selector : selector;\r\n\t\t\t}\r\n\t\t\treturn selector;\r\n\t\t}\r\n\t};\r\n\r\n\tPrototype.closest = function (aQuery) {\r\n\t\treturn this.closests(aQuery).first();\r\n\t};\r\n\r\n\tPrototype.closests = function (aQuery) {\r\n\t\tconst result = this.find(aQuery);\r\n\t\tif (result.length != 0) return result;\r\n\t\t\r\n\t\tconst parent = this.parentElement;\r\n\t\tif (parent) return parent.closests(aQuery);\r\n\r\n\t\treturn NodeList.from([]);\r\n\t};\r\n\r\n\tPrototype.nested = function (aQuery) {\r\n\t\tif (this.is(aQuery)) return NodeList.from(this);\r\n\r\n\t\tlet nested = this.find(aQuery);\r\n\t\tif (nested && nested.length > 0) return nested;\r\n\t\telse return NodeList.from(this.parent(aQuery));\r\n\t};\r\n});\r\nexport default support;\r\n","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"AttributeSupport\", Prototype => {\r\n\tPrototype.attr = function() {\r\n\t\tif (arguments.length == 0)\r\n\t\t\treturn this.hasAttributes() ? (() => {\r\n\t\t\t\tconst result = {};\r\n\t\t\t\tthis.getAttributeNames().forEach(name => {\r\n\t\t\t\t\tresult[name] = this.getAttribute(name);\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t})() : undefined;\r\n\t\telse if (arguments.length == 1)\r\n\t\t\treturn this.getAttribute(arguments[0]);\r\n\t\telse if (typeof arguments[1] === \"undefined\" || arguments[1] == null)\r\n\t\t\tthis.removeAttribute(arguments[0]);\r\n\t\telse\r\n\t\t\tthis.setAttribute(arguments[0], arguments[1]);\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport QuerySupport from \"./extentions/QuerySupport\";\r\nimport AttributeSupport from \"./extentions/AttributeSupport\";\r\nimport ManipulationSupport from \"./extentions/ManipulationSupport\";\r\n\r\nextendPrototype(Element,QuerySupport, AttributeSupport, ManipulationSupport);","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"ReadyEventSupport\", Prototype => {\r\n\tPrototype.ready = function(aFunction, once){\t\r\n\t\tthis.on(\"ready\", aFunction, once);\r\n\t\tif(document.readyState == \"complete\")\t\t\t\r\n\t\t\tthis.trigger(\"ready\");\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport QuerySupport from \"./extentions/QuerySupport\";\r\nimport ReadyEventSupport from \"./extentions/ReadyEventSupport\";\r\n\r\nextendPrototype(Document, QuerySupport, ReadyEventSupport);\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => document.trigger(\"ready\"));\r\n\r\n\r\n\r\n","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport QuerySupport from \"./extentions/QuerySupport\";\r\nimport ManipulationSupport from \"./extentions/ManipulationSupport\";\r\n\r\nextendPrototype(DocumentFragment, QuerySupport, ManipulationSupport);\r\n\r\n\r\n\r\n\r\n","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"HtmlClassSupport\", Prototype => {\t\r\n\tPrototype.addClass = function() {\r\n\t\tif(arguments.length == 1)\r\n\t\t\targuments[0].split(/\\s+/).forEach(clazz => this.classList.add(clazz));\r\n\t\telse if(arguments.length > 1)\r\n\t\t\tArray.prototype.forEach.call(arguments,clazz => this.classList.add(clazz));\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\tPrototype.removeClass = function() {\r\n\t\tif(arguments.length == 1)\r\n\t\t\targuments[0].split(/\\s+/).forEach(clazz => this.classList.remove(clazz));\r\n\t\telse if(arguments.length > 1)\r\n\t\t\tArray.prototype.forEach.call(arguments, clazz => this.classList.remove(clazz));\r\n\t\t\r\n\t\treturn this;\t\t\r\n\t};\r\n\t\r\n\tPrototype.toggleClass = function() {\r\n\t\tif(arguments.length == 1)\r\n\t\t\targuments[0].split(/\\s+/).forEach(clazz => this.classList.toggle(clazz));\r\n\t\telse if(arguments.length > 1)\r\n\t\t\tArray.prototype.forEach.call(arguments, clazz => this.classList.toggle(clazz));\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n});\r\nexport default support;","import Extender from \"../../utils/Extender\";\r\n\r\nconst HIDEVALUE = \"none\";\r\n\r\nconst isHidden = (element) => {\r\n\treturn element.style.display === HIDEVALUE\r\n};\r\n\r\nconst init = (element) => {\t\r\n\tlet display = !isHidden(element) ? element.style.display : \"\";\r\n\t\r\n\telement.show = (function(){\r\n\t\tthis.style.display = display;\r\n\t\treturn this;\t\t\r\n\t}).bind(element);\r\n\t\r\n\telement.hide = (function(){\r\n\t\tthis.style.display = HIDEVALUE;\r\n\t\treturn this;\t\t\r\n\t}).bind(element);\r\n\t\r\n\treturn element;\r\n};\r\n\r\n\r\nconst support = Extender(\"ShowHideSupport\", Prototype => {\r\n\tPrototype.show = function() {\r\n\t\treturn init(this).show.apply(null, arguments)\r\n\t};\r\n\r\n\tPrototype.hide = function() {\r\n\t\treturn init(this).hide.apply(null, arguments)\r\n\t};\r\n\r\n\tPrototype.toggleShow = function() {\r\n\t\treturn isHidden(this) ? this.show() : this.hide();\r\n\t};\r\n\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport HtmlClassSupport from \"./extentions/HtmlClassSupport\";\r\nimport ShowHideSupport from \"./extentions/ShowHideSupport\";\r\n\r\n\r\nextendPrototype(HTMLElement, HtmlClassSupport, ShowHideSupport);","import Extender from \"../../utils/Extender\";\r\n\r\nconst InputTypes = [\r\n\t{\r\n\t\tselector : \"select\",\r\n\t\tget : function(){\r\n\t\t\tconst result = [];\r\n\t\t\tthis.find(\"option\").forEach(option => {\r\n\t\t\t\tif(option.selected)\r\n\t\t\t\t\tresult.push(option.value);\r\n\t\t\t});\t\t\t\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tset : function(){\t\t\t\t\r\n\t\t\tlet values = [];\r\n\t\t\tconst args = Array.from(arguments);\r\n\t\t\tlet arg = args.shift();\r\n\t\t\twhile(arg){\r\n\t\t\t\tif(Array.isArray(arg))\r\n\t\t\t\t\tvalues = values.concat(arg);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalues.push(arg);\r\n\t\t\t\t\r\n\t\t\t\targ = args.shift();\r\n\t\t\t}\r\n\t\t\tthis.value = values;\r\n\t\t\tthis.find(\"option\").forEach(option => option.selected = values.indexOf(option.value) >= 0);\t\t\t\r\n\t\t\tthis.trigger(\"changed\");\r\n\t\t}\t\t\t\r\n\t},\r\n\t{\r\n\t\tselector : \"input[type=\\\"checkbox\\\"], input[type=\\\"radio\\\"]\",\r\n\t\tget : function(){\r\n\t\t\tif(this.value == \"on\" || this.value == \"off\")\r\n\t\t\t\treturn this.checked;\r\n\t\t\telse if(this.checked)\r\n\t\t\t\treturn this.value;\t\t\t\t\r\n\t\t},\r\n\t\tset : function(aValue){\r\n\t\t\tif(typeof aValue === \"boolean\")\r\n\t\t\t\tthis.checked = aValue;\r\n\t\t\telse if(typeof aValue === \"string\")\r\n\t\t\t\tthis.checked = this.value == aValue;\r\n\t\t\telse if(Array.isArray(aValue))\r\n\t\t\t\tthis.checked = aValue.indexOf(this.value) >= 0;\r\n\t\t\t\r\n\t\t\tthis.trigger(\"changed\");\r\n\t\t}\r\n\t}\r\n];\r\n\r\nconst DefaultInputType = {\r\n\t\tget : function(){\r\n\t\t\treturn this.value;\r\n\t\t},\r\n\t\tset : function(aValue){\r\n\t\t\tthis.value = aValue;\r\n\t\t\tthis.trigger(\"input\");\r\n\t\t}\t\r\n};\r\n\r\nconst getInputType = function(aElement){\r\n\tfor(let i = 0; i < InputTypes.length; i++)\r\n\t\tif(aElement.is(InputTypes[i].selector))\r\n\t\t\treturn InputTypes[i];\t\t\r\n\treturn DefaultInputType;\r\n};\r\n\r\n\r\nconst support = Extender(\"ValueSupport\", Prototype => {\t\r\n\tPrototype.val = function() {\r\n\t\tlet type = getInputType(this);\r\n\t\tif(arguments.length == 0)\r\n\t\t\treturn type.get.apply(this, arguments);\r\n\t\telse\r\n\t\t\ttype.set.apply(this, arguments);\r\n\t\t\t\r\n\t\treturn this;\r\n\t};\t\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport ValueSupport from \"./extentions/ValueSupport\";\r\n\r\n\r\nextendPrototype(HTMLInputElement,ValueSupport);","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport Extender from \"../utils/Extender\";\r\n\r\n\r\nextendPrototype(HTMLTextAreaElement,Extender(\"ValueSupport\", Prototype => {\t\r\n\tPrototype.val = function() {\r\n\t\tif(arguments.length == 0)\r\n\t\t\treturn this.value;\r\n\t\telse\r\n\t\t\tthis.value = arguments[0]\r\n\t\t\t\r\n\t\treturn this;\r\n\t};\t\r\n}));","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport ValueSupport from \"./extentions/ValueSupport\";\r\n\r\n\r\nextendPrototype(HTMLSelectElement,ValueSupport);","const DelegaterBuilder = function() {\r\n\tconst args = Array.from(arguments);\r\n\tconst callback = args.shift();\r\n\tconst source = args.shift();\r\n\targs.forEach( target =>{\r\n\t\tObject.getOwnPropertyNames(target)\r\n\t\t.forEach(name => {\r\n\t\t\tconst prop = Object.getOwnPropertyDescriptor(target, name);\r\n\t\t\tif (typeof source[name] === \"undefined\" && typeof prop.value === \"function\")\r\n\t\t\t\tsource[name] = function(){\r\n\t\t\t\t\treturn callback.call(this, name, arguments);\r\n\t\t\t\t};\t\t\t\t\t\t\t\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n};\r\nexport default DelegaterBuilder;","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"ListSupport\", Prototype => {\t\t\r\n\tPrototype.indexOf = function() {\r\n\t\tfor(let i = 0; i < this.length; i++)\r\n\t\t\tif(this[i] == arguments[0])\r\n\t\t\t\treturn i;\r\n\t\t\r\n\t\treturn -1;\r\n\t};\r\n\r\n\tPrototype.forEach = function(){\r\n\t\treturn Array.prototype.forEach.apply(Array.from(this), arguments);\r\n\t};\r\n\t\r\n\tPrototype.map = function(){\r\n\t\treturn Array.prototype.map.apply(Array.from(this), arguments);\r\n\t};\r\n\t\r\n\tPrototype.filter = function(){\r\n\t\treturn Array.prototype.filter.apply(Array.from(this), arguments);\r\n\t};\r\n\r\n\tPrototype.first = function(){\r\n\t\tif(this.length > 0)\r\n\t\t\treturn this[0];\r\n\t};\t\r\n\t\r\n\tPrototype.last = function(){\r\n\t\tif(this.length > 0)\r\n\t\t\treturn this[this.length - 1];\r\n\t};\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport DelegaterBuilder from \"../utils/DelegaterBuilder\";\r\nimport ListSupport from \"./extentions/ListSupport\";\r\n\r\nextendPrototype(NodeList, ListSupport);\r\n\r\nNodeList.prototype.applyTo = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst calling = args.shift();\r\n\tconst isFunction = typeof calling === \"function\";\r\n\tconst results = [];\r\n\tfor(let i = 0; i < this.length; i++){\r\n\t\tconst node = this[i];\r\n\t\tlet\tresult;\r\n\t\tif(isFunction)\r\n\t\t\tresult = calling.apply([node].concat(args));\r\n\t\telse if(typeof node[calling] === \"function\")\r\n\t\t\tresult = node[calling].apply(node, args);\r\n\t\t\r\n\t\tif(result)\r\n\t\t\tresults.push(result);\r\n\t}\r\n\t\r\n\treturn results;\r\n};\r\n\r\nNodeList.prototype.val = function() {\r\n\tif(arguments.length == 0){\r\n\t\tif(this.length > 0){\r\n\t\t\tconst result = new Map();\r\n\t\t\tthis.forEach(node => {\r\n\t\t\t\tif(typeof node.val === \"function\"){\r\n\t\t\t\t\tconst value = node.val();\r\n\t\t\t\t\tif(value)\r\n\t\t\t\t\t\tresult.set((node.name || node.id || node.selector()), node.val());\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\telse\r\n\t\tNodeList.prototype.applyTo.apply(this, [\"val\"].concat(Array.from(arguments)));\r\n};\r\n\r\nNodeList.from = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst data = {};\r\n\tlet counter = 0;\r\n\t\r\n\twhile(args.length > 0){\r\n\t\tconst arg = args.shift();\r\n\t\tif(typeof arg !== \"undefined\" && arg != null){\r\n\t\t\tif(arg instanceof Node)\r\n\t\t\t\tdata[counter++] = {value: arg, enumerable: true};\r\n\t\t\telse if(arg instanceof NodeList || arg instanceof HTMLCollection || arg instanceof Array){\r\n\t\t\t\tfor(let i = 0; i < arg.length; i++){\r\n\t\t\t\t\tif(arg[i] && arg[i] instanceof Node){\r\n\t\t\t\t\t\tdata[counter++] = {value: arg[i], enumerable: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tdata.length = {value: counter};\r\n\treturn  Object.create(NodeList.prototype, data);\r\n};\r\n\r\n\r\nDelegaterBuilder(function(aFunctionName, theArguments) {\r\n\tlet results = [];\t\r\n\tthis.forEach(node => {\r\n\t\tif(node && typeof node[aFunctionName] === \"function\"){\r\n\t\t\tconst result = node[aFunctionName].apply(node, theArguments);\r\n\t\t\tif(result){ \r\n\t\t\t\tif(result instanceof NodeList)\r\n\t\t\t\t\tresults = results.concat(Array.from(result));\r\n\t\t\t\telse\r\n\t\t\t\t\tresults.push(result);\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t});\r\n\t\r\n\tif(results.length === 0)\r\n\t\treturn undefined;\r\n\telse if(results[0] instanceof Node || results[0] instanceof NodeList)\r\n\t\treturn NodeList.from(results);\r\n\telse\r\n\t\treturn results;\r\n},NodeList.prototype, Node.prototype, HTMLElement.prototype, HTMLInputElement.prototype, Element.prototype, EventTarget.prototype);\r\n","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport DelegaterBuilder from \"../utils/DelegaterBuilder\";\r\nimport ListSupport from \"./extentions/ListSupport\";\r\n\r\nextendPrototype(HTMLCollection, ListSupport);\r\n\r\nHTMLCollection.prototype.applyTo = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst calling = args.shift();\r\n\tconst isFunction = typeof calling === \"function\";\r\n\tconst results = [];\r\n\tfor(let i = 0; i < this.length; i++){\r\n\t\tconst node = this[i];\r\n\t\tlet\tresult;\r\n\t\tif(isFunction)\r\n\t\t\tresult = calling.apply([node].concat(args));\r\n\t\telse if(typeof node[calling] === \"function\")\r\n\t\t\tresult = node[calling].apply(node, args);\r\n\t\t\r\n\t\tif(result)\r\n\t\t\tresults.push(result);\r\n\t}\r\n\t\r\n\treturn results;\r\n};\r\n\r\nHTMLCollection.prototype.val = function() {\r\n\tif(arguments.length == 0){\r\n\t\tif(this.length > 0){\r\n\t\t\tconst result = new Map();\r\n\t\t\tthis.forEach(node => {\r\n\t\t\t\tif(typeof node.val === \"function\"){\r\n\t\t\t\t\tconst value = node.val();\r\n\t\t\t\t\tif(value)\r\n\t\t\t\t\t\tresult.set((node.name || node.id || node.selector()), node.val());\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\telse\r\n\t\tHTMLCollection.prototype.applyTo.apply(this, [\"val\"].concat(Array.from(arguments)));\r\n};\r\n\r\nHTMLCollection.from = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst data = {};\r\n\tlet counter = 0;\r\n\t\r\n\twhile(args.length > 0){\r\n\t\tconst arg = args.shift();\r\n\t\tif(typeof arg !== \"undefined\" && arg != null){\r\n\t\t\tif(arg instanceof HTMLElement)\r\n\t\t\t\tdata[counter++] = {value: arg, enumerable: true};\r\n\t\t\telse if(arg instanceof HTMLCollection || arg instanceof NodeList || arg instanceof Array){\r\n\t\t\t\tfor(let i = 0; i < arg.length; i++){\r\n\t\t\t\t\tif(arg[i] && arg[i] instanceof HTMLElement){\r\n\t\t\t\t\t\tdata[counter++] = {value: arg[i], enumerable: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tdata.length = {value: counter};\r\n\treturn  Object.create(HTMLCollection.prototype, data);\r\n};\r\n\r\n\r\nDelegaterBuilder(function(aFunctionName, theArguments) {\r\n\tlet results = [];\t\r\n\tthis.forEach(node => {\r\n\t\tif(node && typeof node[aFunctionName] === \"function\"){\r\n\t\t\tlet result = node[aFunctionName].apply(node, theArguments);\r\n\t\t\tif(result){ \r\n\t\t\t\tif(result instanceof HTMLCollection)\r\n\t\t\t\t\tresults = results.concat(Array.from(result));\r\n\t\t\t\telse\r\n\t\t\t\t\tresults.push(result);\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t});\r\n\t\r\n\tif(results.length === 0)\r\n\t\treturn undefined;\r\n\telse if(results[0] instanceof HTMLElement || results[0] instanceof HTMLCollection)\r\n\t\treturn HTMLCollection.from.apply(null, results);\r\n\telse\r\n\t\treturn results;\r\n},HTMLCollection.prototype, Node.prototype, HTMLElement.prototype, HTMLInputElement.prototype, Element.prototype, EventTarget.prototype);\r\n","import Utils from \"./utils/Utils\";\r\n\r\nUtils.global.defaultjs = Utils.global.defaultjs || {};\r\nUtils.global.defaultjs.extdom = Utils.global.defaultjs.extdom || {\r\n\tVERSION : \"${version}\",\r\n\tutils : {\r\n\t\tUtils: Utils\r\n\t}\r\n};\r\n\r\nUtils.global.find = function() {\r\n\treturn document.find.apply(document, arguments);\r\n};\r\n\r\nUtils.global.ready = function() {\r\n\treturn document.ready.apply(document, arguments);\r\n};\r\n\r\nUtils.global.create = function(aContent, asTemplate) {\r\n\tif (typeof arguments[0] !== \"string\")\r\n\t\tthrow new Error(\"The first argument must be a string!\");\r\n\t\r\n\tconst template = document.createElement(\"template\");\r\n\ttemplate.innerHTML = aContent;\r\n\tif(asTemplate)\r\n\t\treturn template;\r\n\t\r\n\treturn document.importNode(template.content, true).childNodes;\r\n};\r\n\r\nUtils.global.script = function(aFile, aTarget) {\r\n\tif(aFile instanceof Array)\r\n\t\treturn Promise.all(aFile.map(file => Utils.global.script(file, aTarget)));\r\n\t\r\n\tif(typeof aFile === \"string\")\t\r\n\t\treturn new Promise((r,e) => {\r\n\t\t\tconst script = document.createElement(\"script\");\r\n\t\t\tscript.async = true;\r\n\t\t\tscript.onload = function(){r()};\r\n\t\t\tscript.onerror = function(){throw new Error(\"load error!\")};\r\n\t\t\t!aTarget ? document.body.append(script) : aTarget.append(script);\r\n\t\t\tscript.src = aFile;\r\n\t\t});\r\n\telse\r\n\t\treturn Promise.reject(\"First parameter must be an array of strings or a string!\");\r\n};","export default class ObjectProperty {\r\n\tconstructor(key, context){\r\n\t\tthis.key = key;\r\n\t\tthis.context = context;\r\n\t}\r\n\t\r\n\tget keyDefined(){\r\n\t\treturn this.key in this.context; \r\n\t}\r\n\t\r\n\tget hasValue(){\r\n\t\treturn !!this.context[this.key];\r\n\t}\r\n\t\r\n\tget value(){\r\n\t\treturn this.context[this.key];\r\n\t}\r\n\t\r\n\tset value(data){\r\n\t\tthis.context[this.key] = data;\r\n\t}\r\n\t\r\n\tset append(data) {\r\n\t\tif(!this.hasValue)\r\n\t\t\tthis.value = data;\r\n\t\telse {\r\n\t\t\tconst value = this.value;\r\n\t\t\tif(value instanceof Array)\r\n\t\t\t\tvalue.push(data);\r\n\t\t\telse\r\n\t\t\t\tthis.value = [this.value, data];\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(){\r\n\t\tdelete this.context[this.key];\r\n\t}\r\n\t\r\n\tstatic load(data, key, create=true) {\r\n\t\tlet context = data;\r\n\t\tconst keys = key.split(\"\\.\");\r\n\t\tlet name = keys.shift().trim();\r\n\t\twhile(keys.length > 0){\r\n\t\t\tif(!context[name]){\r\n\t\t\t\tif(!create)\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t\r\n\t\t\t\tcontext[name] = {}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontext = context[name];\r\n\t\t\tname = keys.shift().trim();\r\n\t\t}\r\n\t\t\r\n\t\treturn new ObjectProperty(name, context);\r\n\t}\r\n};","import ObjectProperty from \"./ObjectProperty.js\";\r\n\r\nconst equalArraySet = (a, b) => {\r\n\tif (a.length !== b.length) return false;\r\n\tconst length = a.length;\r\n\tfor (let i = 0; i < length; i++)\r\n\t\tif (!equalPojo(a[i], b[i])) {\r\n\t\t\t//console.log(\"false\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nconst equalMap = (a, b) => {\r\n\tif (a.length !== b.length) return false;\r\n\tfor (const key of a.keys())\r\n\t\tif (!equalPojo(a.get(key), b.get(key))) {\r\n\t\t\t//console.log(\"false\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\treturn true;\r\n};\r\n\r\nconst equalClasses = (a, b) => {\r\n\tconst clazzA = Object.getPrototypeOf(a);\r\n\tconst clazzB = Object.getPrototypeOf(b);\r\n\tif (clazzA != clazzB) return false;\r\n\r\n\tif (!clazzA) return true;\r\n\r\n\tconst propertiesA = Object.getOwnPropertyNames(clazzA);\r\n\tconst propertiesB = Object.getOwnPropertyNames(clazzB);\r\n\r\n\tif (propertiesA.length !== propertiesB.length) return false;\r\n\tfor (const key of propertiesA) {\r\n\t\tconst valueA = a[key];\r\n\t\tconst valueB = b[key];\r\n\r\n\t\tif (!equalPojo(valueA, valueB)) return false;\r\n\t}\r\n\treturn true;\r\n};\r\n\r\nconst equalObject = (a, b) => {\r\n\tconst propertiesA = Object.keys(a);\r\n\tconst propertiesB = Object.keys(b);\r\n\r\n\tif (propertiesA.length !== propertiesB.length) return false;\r\n\tfor (const key of propertiesA) {\r\n\t\tconst valueA = a[key];\r\n\t\tconst valueB = b[key];\r\n\r\n\t\tif (!equalPojo(valueA, valueB)) return false;\r\n\t}\r\n\treturn true;\r\n};\r\n\r\nexport const isNullOrUndefined = (object) => {\r\n\treturn object == null || typeof object === \"undefined\";\r\n};\r\n\r\nexport const isPrimitive = (object) => {\r\n\tif (object == null) return true;\r\n\r\n\tconst type = typeof object;\r\n\tswitch (type) {\r\n\t\tcase \"number\":\r\n\t\tcase \"bigint\":\r\n\t\tcase \"boolean\":\r\n\t\tcase \"string\":\r\n\t\tcase \"undefined\":\r\n\t\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n};\r\n\r\nexport const isObject = (object) => {\r\n\tif(isNullOrUndefined(object))\r\n\t\treturn false;\r\n\r\n\treturn typeof object === \"object\" && (!object.constructor || object.constructor.name === \"Object\");\r\n};\r\n\r\n/**\r\n * equalPojo -> compares only pojos, array, set, map and primitives\r\n */\r\nexport const equalPojo = (a, b) => {\r\n\tconst nullA = isNullOrUndefined(a);\r\n\tconst nullB = isNullOrUndefined(b);\r\n\tif (nullA || nullB) return a === b;\r\n\r\n\tif (isPrimitive(a) || isPrimitive(b)) return a === b;\r\n\r\n\tconst typeA = typeof a;\r\n\tconst typeB = typeof b;\r\n\tif (typeA != typeB) return false;\r\n\tif (typeA === \"function\") return a === b;\r\n\t//if (a.constructor !== b.constructor) return false;\r\n\t//if (a instanceof Array || a instanceof Set) return equalArraySet(a, b);\r\n\t//if (a instanceof Map) return equalMap(a, b);\r\n\r\n\treturn equalObject(a, b) && equalClasses(a, b);\r\n};\r\n\r\n/**\r\n * checked if an object a simple object. No Array, Map or something else.\r\n *\r\n * @param aObject:object the object to be testing\r\n *\r\n * @return boolean\r\n */\r\nexport const isPojo = (object) => {\r\n\tif (!isObject(object)) return false;\r\n\r\n\tfor (const key in object) {\r\n\t\tconst value = object[key];\r\n\t\tif (typeof value === \"function\") return false;\r\n\t}\r\n\r\n\treturn true;\r\n};\r\n\r\n/**\r\n * append a propery value to an object. If propery exists its would be converted to an array\r\n *\r\n *  @param aKey:string name of property\r\n *  @param aData:any property value\r\n *  @param aObject:object the object to append the property\r\n *\r\n *  @return returns the changed object\r\n */\r\nexport const append = function (aKey, aData, aObject) {\r\n\tif (typeof aData !== \"undefined\") {\r\n\t\tconst property = ObjectProperty.load(aObject, aKey, true);\r\n\t\tproperty.append = aData;\r\n\t}\r\n\treturn aObject;\r\n};\r\n\r\n/**\r\n * merging object into a target object. Its only merge simple object and sub objects. Every other\r\n * value would be replaced by value from the source object.\r\n *\r\n * sample: merge(target, source-1, source-2, ...source-n)\r\n *\r\n * @param target:object the target object to merging into\r\n * @param sources:object\r\n *\r\n * @return object returns the target object\r\n */\r\nexport const merge = function (target, ...sources) {\r\n\tif (!target) target = {};\r\n\r\n\tfor (let source of sources) {\r\n\t\tif (isPojo(source)) {\r\n\t\t\tObject.getOwnPropertyNames(source).forEach((key) => {\r\n\t\t\t\tif (isPojo(target[key])) merge(target[key], source[key]);\r\n\t\t\t\telse target[key] = source[key];\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn target;\r\n};\r\n\r\nconst buildPropertyFilter = function ({ names, allowed }) {\r\n\treturn (name, value, context) => {\r\n\t\treturn names.includes(name) === allowed;\r\n\t};\r\n};\r\n\r\nexport const filter = function () {\r\n\tconst [data, propFilter, { deep = false, recursive = true, parents = [] } = {}] = arguments;\r\n\tconst result = {};\r\n\r\n\tfor (let name in data) {\r\n\t\tconst value = data[name];\r\n\t\tconst accept = propFilter(name, value, data);\r\n\t\tif (accept && (!deep || value === null || value === undefined)) result[name] = value;\r\n\t\telse if (accept && deep) {\r\n\t\t\tconst type = typeof value;\r\n\t\t\tif (type !== \"object\" || value instanceof Array || value instanceof Map || value instanceof Set || value instanceof RegExp || parents.includes[value] || value == data) result[name] = value;\r\n\t\t\telse result[name] = filter(value, propFilter, { deep, recursive, parents: parents.concat(data) });\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport const defValue = (o, name, value) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tvalue,\r\n\t\twritable: false,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\nexport const defGet = (o, name, get) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport const defGetSet = (o, name, get, set) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tset,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tisNullOrUndefined,\r\n\tisObject,\r\n\tequalPojo,\r\n\tisPojo,\r\n\tappend,\r\n\tmerge,\r\n\tfilter,\r\n\tbuildPropertyFilter,\r\n\tdefValue,\r\n\tdefGet,\r\n\tdefGetSet,\r\n};\r\n","import {defValue, defGet} from \"./ObjectUtils\"\r\n\r\nexport const timeoutPromise = (fn, ms) =>{\r\n\tlet canceled = false;\r\n\tlet timeout = null;\r\n\tconst promise = new Promise((r, e) => {\r\n\t\ttimeout = setTimeout(()=> {\r\n\t\t\ttimeout = null;\r\n\t\t\tfn(r,e);\r\n\t\t}, ms)\r\n\t});\r\n\r\n\tconst then = promise.then;\r\n\tpromise.then = (fn) => {\r\n\t\tthen.call(promise, (result) => {\r\n\t\t\tif(!this.canceled)\r\n\t\t\t\treturn fn(result);\r\n\t\t});\r\n\t}\r\n\r\n\tdefValue(promise, \"cancel\", () => {\r\n\t\tif(timeout){\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\tcanceled = true;\r\n\t\t}\r\n\t});\r\n\tdefGet(promise, canceld, () => canceled);\r\n\r\n\treturn promise;\r\n}\r\n\r\n\r\nexport const lazyPromise = () => {\r\n\t\tlet promiseResolve = null;\r\n\t\tlet promiseError = null;\r\n\r\n\t\tconst promise = new Promise((r, e) => {\r\n\t\t\tpromiseResolve = r;\r\n\t\t\tpromiseError = e;\r\n\t\t});\r\n\r\n\t\tlet resolved = false;\r\n\t\tlet error = false;\r\n\t\tlet value = undefined;\r\n\r\n\t\tdefValue(promise, \"resolve\", (result) => {\r\n\t\t\tvalue = result;\r\n\t\t\tresolved = true;\r\n\t\t\tif (value instanceof Error) {\r\n\t\t\t\terror = true;\r\n\t\t\t\tpromiseError(value);\r\n\t\t\t} else promiseResolve(value);\r\n\t\t});\r\n\r\n\t\tdefGet(promise, \"value\", () => value);\r\n\t\tdefGet(promise, \"error\", () => error);\r\n\t\tdefGet(promise, \"resolved\", () => resolved);\r\n\r\n\t\treturn promise;\r\n};\r\nexport default {\r\n\tlazyPromise,\r\n\ttimeoutPromise\r\n}\r\n","import {attributeChangeEventPrefix} from \"../Constants\";\n\nexport const componentEventname = (eventType, node ) => {\t\n\tlet nodename = \"unsupported\";\n\tif(typeof node === \"string\")\n\t\tnodename = node;\n\telse if(node instanceof HTMLElement)\n\t\tnodename = node.nodeName;\n\telse if(typeof node.NODENAME === \"string\")\n\t\tnodename = node.NODENAME;\n\telse throw new Error(`${typeof node} is not supported as parameter \"node\"!`);\n\t\n   return `${nodename.toLowerCase()}:${eventType}`;//use @ as separtor and not :\n};\n\n\nexport const attributeChangeEventname = (attribute, node ) => {\n    return componentEventname(`${attributeChangeEventPrefix}-${attribute}`, node);\n};\n\nexport default {componentEventname, attributeChangeEventname}","import { lazyPromise } from \"@default-js/defaultjs-common-utils/src/PromiseUtils\";\nimport { uuid } from \"@default-js/defaultjs-common-utils/src/UUID\";\nimport { initTimeout, triggerTimeout } from \"./Constants\";\nimport { attributeChangeEventname, componentEventname } from \"./utils/EventHelper\";\n\nconst TIMEOUTS = new WeakMap();\nconst init = (component) => {\n\tlet timeout = TIMEOUTS.get(component);\n\tif (timeout) clearTimeout(timeout);\n\n\tTIMEOUTS.get(component, setTimeout(async () => {\n\t\tTIMEOUTS.delete(component);\n\t\ttry{\n\t\t\tawait component.init();\n\t\t\tcomponent.ready.resolve();\n\t\t}catch(e){\n\t\t\tconsole.error(\"Can't initialize component!\", component, e);\n\t\t\tcomponent.ready.resolve(e);\n\t\t}\n\t\tcomponent.trigger(componentEventname(\"initialzed\", component));\n\t}, initTimeout));\t\n};\n\nexport const createUID = (prefix, suffix) => {\n\tlet count = 0;\n\tlet id = null;\n    while(count < 100){\n\t\tid = `${prefix ? prefix : \"\"}${uuid()}${suffix ? suffix : \"\"}`;\n\t\tif(!document.getElementById(id))\n\t\t\treturn id;\n\n\t\tcount++;\n\t}\n\tconsole.error(new Error(\"To many retries to create an unique id - created id is not unique!\"));\n\treturn id;\n};\n\n\n\nconst buildClass = (htmlBaseType) =>{\n\treturn class Component extends htmlBaseType {\n\n\t\t#ready = lazyPromise();\n\t\tconstructor({shadowRoot = false, content = null, createUID = false, uidPrefix = \"id-\", uidSuffix = \"\"} = {}) {\n\t\t\tsuper();\n\t\n\t\t\tif(createUID)\n\t\t\t\tthis.attr(\"id\", createUID(uidPrefix, uidSuffix));\n\t\n\t\t\tif(shadowRoot)\n\t\t\t\tthis.attachShadow({mode:\"open\"});\n\t\t\t\n\t\t\tif(content)\n\t\t\t\tthis.root.append(typeof content === \"function\" ? content(this) : content);\n\t\t}\n\t\n\t\tget root(){\n\t\t\treturn this.shadowRoot || this;\n\t\t}\n\t\n\t\tget ready(){\n\t\t\treturn this.#ready;\n\t\t}\n\t\n\t\tasync init() {}\n\t\n\t\tasync destroy() {\n\t\t\tif(this.ready.resolved)\n\t\t\tthis.#ready =  lazyPromise();\n\t\t}\n\t\n\t\tconnectedCallback() {\n\t\t\tif (this.ownerDocument == document && this.isConnected) init(this);\n\t\t}\n\t\n\t\tadoptedCallback() {\n\t\t\tthis.connectedCallback();\n\t\t}\n\t\n\t\tattributeChangedCallback(name, oldValue, newValue) {\n\t\t\tif (oldValue != newValue && this.isConnected) {\n\t\t\t\tthis.trigger(triggerTimeout, attributeChangeEventname(name, this));\n\t\t\t\tthis.trigger(triggerTimeout, componentEventname(\"change\", this));\n\t\t\t}\n\t\t}\n\t\n\t\tdisconnectedCallback(){\n\t\t\tthis.destroy();\n\t\t}\n\t};\n} \n\nconst CLAZZMAP = new Map();\n\nexport const componentBaseOf = (htmlBaseType) => {\n\tlet clazz = CLAZZMAP.get(htmlBaseType);\n\tif(clazz == null){\n\t\tclazz = buildClass(htmlBaseType);\n\t\tCLAZZMAP.set(htmlBaseType, clazz);\n\t}\n\n\treturn clazz;\n}\n\nconst Component = componentBaseOf(HTMLElement);\n\n\n\nexport default Component;\n","export const componentPrefix = \"d-\";\r\nexport const attributeChangeEventPrefix = \"attribute-\";\r\nexport const initTimeout = 10;\r\nexport const triggerTimeout = 10;\r\n","import { componentPrefix } from \"../Constants\";\n\nexport const toNodeName = (name, prefix) => {\n\tif(typeof prefix === \"string\")\n\t\treturn prefix + name;\n\t\t\n\treturn componentPrefix + name;\n};\n\nexport const define = function(clazz, options) {\n\tconst nodename = clazz.NODENAME;\n\tif (!customElements.get(nodename)) {\n\t\tcustomElements.define(nodename, clazz, options);\n\t}\n};\n\n\nexport default define; \n","export const findParent = (node, check) => {\n\twhile(node != null) {\t\t\n        if(check(node))\n            return node;\n\n        node = node.parent();\t\t\t\n    }\n    \n    return null;\n};\n\nconst findClosest = (node, depth, check) => {\n    if(check(node))\n        return {node, depth}\n\n    let result = null;\n    for(let child of node.childNodes){\n        const item = findClosest(child, depth + 1, check);\n\n        if(item != null && (result == null || result.depth > item.depth))            \n            result = item;\n    }\n\n    return result;\n}\n\nexport const findClosestInDepth = (node, check) => {\n    const closest = findClosest(node, 0, check);\n    return closest != null ? closest.node : null;\n}\n\nexport default {findParent, findClosestInDepth};","const PRIVATE_PROPERTIES = new WeakMap();\r\nexport const privateStore = (obj) => {\r\n\tif(PRIVATE_PROPERTIES.has(obj))\r\n\t\treturn PRIVATE_PROPERTIES.get(obj);\r\n\t\r\n\tconst data = {};\r\n\tPRIVATE_PROPERTIES.set(obj, data);\r\n\treturn data;\r\n};\r\n\r\nexport const privateProperty = function(obj, name, value) {\r\n\tconst data = privateStore(obj);\r\n\tif(arguments.length === 1)\r\n\t\treturn data;\r\n\telse if(arguments.length === 2)\r\n\t\treturn data[name];\r\n\telse if(arguments.length === 3)\r\n\t\tdata[name] = value;\r\n\telse\r\n\t\tthrow new Error(\"Not allowed size of arguments!\");\r\n};\r\n\r\nexport const privatePropertyAccessor = (varname) => {\r\n\treturn function(self, value){\r\n\t\tif(arguments.length == 2)\r\n\t\t\tprivateProperty(self, varname, value);\r\n\t\telse\r\n\t\t\treturn privateProperty(self, varname);\r\n\t};\r\n};\r\n\r\nexport default {privateProperty, privatePropertyAccessor, privateStore};","import { toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\r\nexport default toNodeName(\"route\");","import NODENAME from \"./Nodename\";\r\nexport const EVENT_INIT = `${NODENAME}-init`;\r\nexport const EVENT_CLICK = `${NODENAME}-click`;\r\nexport const EVENT_ACTIVATE = `${NODENAME}-activate`;\r\nexport const EVENT_DEACTIVATE = `${NODENAME}-deactivate`;","import { toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\r\nexport default toNodeName(\"route-link\");","import NODENAME from \"./Nodename\";\r\nexport const EVENT_TO_ROUTE = NODENAME + \"-to-route\";","const GLOBAL = (() => {\r\n\tif(typeof global !== \"undefined\") return global;\r\n\tif(typeof window !== \"undefined\") return window;\t\r\n\tif(typeof self !== \"undefined\") return self;\r\n\treturn {};\r\n})();\r\n\r\nexport default GLOBAL;","export default class DefaultValue {\n\tconstructor(value){\n\t\tthis.hasValue = arguments.length == 1;\n\t\tthis.value = value;\n\t}\t\n};","const seekAtChain = (resolver, property) => {\n\twhile(resolver){\n\t\tconst def = resolver.proxy.handle.getPropertyDef(property, false);\n\t\tif(def)\n\t\t\treturn def;\n\t\t\n\t\tresolver = resolver.parent;\n\t}\t\n\treturn { data: null, resolver: null, defined: false };\n}\n\nclass Handle {\n\tconstructor(data, resolver) {\n\t\tthis.data = data;\n\t\tthis.resolver = resolver;\n\t\tthis.cache = new Map();\n\t}\n\t\n\tupdateData(data){\n\t\tthis.data = data;\n\t\tthis.cache = new Map();\n\t}\n\t\n\tresetCache(){\n\t\tthis.cache = new Map();\n\t}\n\n\tgetPropertyDef(property, seek = true) {\n\t\tif (this.cache.has(property))\n\t\t\treturn this.cache.get(property);\n\t\t\n\t\tlet def = null\n\t\tif (this.data && property in this.data)\n\t\t\tdef = { data: this.data, resolver: this.resolver, defined: true };\n\t\telse if(seek)\n\t\t\tdef = seekAtChain(this.resolver.parent, property);\n\t\telse\n\t\t\treturn null;\n\t\tif(def.defined)\n\t\t\tthis.cache.set(property, def);\n\t\treturn def;\n\t}\n\n\thasProperty(property) {\n\t\t//@TODO write tests!!!\n\t\tconst { defined } = this.getPropertyDef(property);\n\t\treturn defined;\n\t}\n\tgetProperty(property) {\n\t\t//@TODO write tests!!!\t\n\t\tconst { data } = this.getPropertyDef(property);\n\t\treturn data ? data[property] : undefined;\n\t}\n\tsetProperty(property, value) {\n\t\t//@TODO would support this action on an proxied resolver context??? write tests!!!\n\t\tconst { data, defined } = this.getPropertyDef(property);\n\t\tif (defined)\n\t\t\tdata[property] = value;\n\t\telse {\n\t\t\tif (this.data)\n\t\t\t\tthis.data[property] = value;\n\t\t\telse {\n\t\t\t\tthis.data = {}\n\t\t\t\tthis.data[property] = value;\n\t\t\t}\n\t\t\tthis.cache.set(property, { data: this.data, resolver: this.resolver, defined: true });\n\t\t}\n\t}\n\tdeleteProperty(property) {\n\t\t//@TODO would support this action on an proxied resolver context??? write tests!!!\t\t\n\t\tthrow new Error(\"unsupported function!\")\n\t}\n}\n\nexport default class Context {\n\tconstructor(context, resolver) {\n\t\tthis.handle = new Handle(context, resolver);\t\t\n\t\tthis.data = new Proxy(this.handle, {\n\t\t\thas: function(data, property) {\n\t\t\t\treturn data.hasProperty(property);\n\t\t\t},\n\t\t\tget: function(data, property) {\n\t\t\t\treturn data.getProperty(property);\n\t\t\t},\n\t\t\tset: function(data, property, value) {\n\t\t\t\treturn data.setProperty(property, value);\n\t\t\t},\n\t\t\tdeleteProperty: function(data, property) {\n\t\t\t\treturn data.deleteProperty(property);\n\t\t\t}\n\t\t\t//@TODO need to support the other proxy actions\t\t\n\t\t});;\n\t}\n\t\n\tupdateData(data){\n\t\tthis.handle.updateData(data)\t\t\n\t}\n\t\n\tresetCache(){\n\t\tthis.handle.resetCache();\n\t}\n};","import GLOBAL from \"@default-js/defaultjs-common-utils/src/Global.js\"\r\nimport ObjectProperty from \"@default-js/defaultjs-common-utils/src/ObjectProperty.js\";\r\nimport ObjectUtils from \"@default-js/defaultjs-common-utils/src/ObjectUtils.js\"\r\nimport DefaultValue from \"./DefaultValue.js\";\r\nimport Context from \"./Context.js\";\r\n\r\n\r\nconst EXECUTION_WARN_TIMEOUT = 1000;\r\nconst EXPRESSION = /(\\\\?)(\\$\\{(([a-zA-Z0-9\\-_\\s]+)::)?([^\\{\\}]+)\\})/;\r\nconst MATCH_ESCAPED = 1;\r\nconst MATCH_FULL_EXPRESSION = 2;\r\nconst MATCH_EXPRESSION_SCOPE = 4;\r\nconst MATCH_EXPRESSION_STATEMENT = 5;\r\n\r\nconst DEFAULT_NOT_DEFINED = new DefaultValue();\r\nconst toDefaultValue = value => {\r\n\tif (value instanceof DefaultValue)\r\n\t\treturn value;\r\n\r\n\treturn new DefaultValue(value);\r\n};\r\n\r\nconst execute = async function(aStatement, aContext) {\r\n\tif (typeof aStatement !== \"string\")\r\n\t\treturn aStatement;\r\n\t\t\r\n\tconst expression = new Function(\"context\", \r\n`\r\nreturn (async (context) => {\r\n\ttry{ \r\n\t\twith(context){\r\n\t\t\t return ${aStatement}\r\n\t\t}\r\n\t}catch(e){\r\n\t\tthrow e;\r\n\t}\r\n})(context)`\r\n\t);\r\n\t\r\n\tlet timeout = setTimeout(() => {\r\n\t\ttimeout = null;\r\n\t\tconsole.warn(\"long running statement:\", aStatement, new Error());\r\n\t}, EXECUTION_WARN_TIMEOUT)\r\n\tlet result = undefined;\r\n\ttry{\r\n\t\tresult = await expression(aContext);\r\n\t}catch(e){}\r\n\t\r\n\tif(timeout)\r\n\t\tclearTimeout(timeout)\r\n\treturn result;\r\n};\r\n\r\nconst resolve = async function(aResolver, aExpression, aFilter, aDefault) {\r\n\tif (aFilter && aResolver.name != aFilter)\r\n\t\treturn aResolver.parent ? resolve(aResolver.parent, aExpression, aFilter, aDefault) : null;\r\n\t\r\n\tconst result = await execute(aExpression, aResolver.proxy.data);\r\n\tif (result !== null && typeof result !== \"undefined\")\r\n\t\treturn result;\r\n\r\n\telse if (aDefault instanceof DefaultValue && aDefault.hasValue)\r\n\t\treturn aDefault.value;\r\n};\r\n\r\nconst resolveMatch = async (resolver, match, defaultValue) => {\r\n\tif(match[MATCH_ESCAPED])\r\n\t\treturn match[MATCH_FULL_EXPRESSION]; \r\n\t\t\r\n\treturn resolve(resolver, match[MATCH_EXPRESSION_STATEMENT], normalize(match[MATCH_EXPRESSION_SCOPE]), defaultValue);\r\n}\r\n\r\nconst normalize = value => {\r\n\tif (value) {\r\n\t\tvalue = value.trim();\r\n\t\treturn value.length == 0 ? null : value;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nexport default class ExpressionResolver {\r\n\tconstructor({ context = GLOBAL, parent = null, name = null }) {\r\n\t\tthis.parent = (parent instanceof ExpressionResolver) ? parent : null;\r\n\t\tthis.name = name;\r\n\t\tthis.context = context;\r\n\t\tthis.proxy = new Context(this.context, this);\r\n\t}\r\n\r\n\tget chain() {\r\n\t\treturn this.parent ? this.parent.chain + \"/\" + this.name : \"/\" + this.name;\r\n\t}\r\n\r\n\tget effectiveChain() {\r\n\t\tif (!this.context)\r\n\t\t\treturn this.parent ? this.parent.effectiveChain : \"\";\r\n\t\treturn this.parent ? this.parent.effectiveChain + \"/\" + this.name : \"/\" + this.name;\r\n\t}\r\n\r\n\tget contextChain() {\r\n\t\tconst result = [];\r\n\t\tlet resolver = this;\r\n\t\twhile (resolver) {\r\n\t\t\tif (resolver.context)\r\n\t\t\t\tresult.push(resolver.context);\r\n\r\n\t\t\tresolver = resolver.parent;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetData(key, filter) {\r\n\t\tif (!key)\r\n\t\t\treturn;\r\n\t\telse if (filter && filter != this.name) {\r\n\t\t\tif (this.parent)\r\n\t\t\t\tthis.parent.getData(key, filter);\r\n\t\t} else {\r\n\t\t\tconst property = ObjectProperty.load(this.context, key, false);\r\n\t\t\treturn property ? property.value : null;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateData(key, value, filter) {\r\n\t\tif (!key)\r\n\t\t\treturn;\r\n\t\telse if (filter && filter != this.name) {\r\n\t\t\tif (this.parent)\r\n\t\t\t\tthis.parent.updateData(key, value, filter);\r\n\t\t} else {\r\n\t\t\tif(this.context == null || typeof this.context === \"undefined\"){\r\n\t\t\t\tthis.context = {};\t\t\t\t\r\n\t\t\t\tthis.proxy.updateData(this.context);\r\n\t\t\t}\r\n\t\t\tconst property = ObjectProperty.load(this.context, key);\r\n\t\t\tproperty.value = value;\r\n\t\t\tthis.proxy.resetCache();\r\n\t\t}\r\n\t}\r\n\r\n\tmergeContext(context, filter) {\r\n\t\tif (filter && filter != this.name) {\r\n\t\t\tif (this.parent)\r\n\t\t\t\tthis.parent.mergeContext(context, filter);\r\n\t\t} else {\r\n\t\t\tthis.context = this.context ? ObjectUtils.merge(this.context, context) : context;\r\n\t\t}\r\n\t}\r\n\r\n\tasync resolve(aExpression, aDefault) {\r\n\t\tconst defaultValue = arguments.length == 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED;\r\n\t\ttry {\r\n\t\t\tconst match = EXPRESSION.exec(aExpression);\r\n\t\t\tif (match)\r\n\t\t\t\treturn await resolveMatch(this, match, defaultValue);\r\n\t\t\telse\r\n\t\t\t\treturn await resolve(this, normalize(aExpression), null, defaultValue);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"error at executing statment\\\"\", aExpression, \"\\\":\", e);\r\n\t\t\treturn defaultValue.hasValue ? defaultValue.value : aExpression;\r\n\t\t}\r\n\t}\r\n\r\n\tasync resolveText(aText, aDefault) {\r\n\t\tlet text = aText;\r\n\t\tlet temp = aText; // required to prevent infinity loop\r\n\t\tlet match = EXPRESSION.exec(text);\r\n\t\tconst defaultValue = arguments.length == 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED\r\n\t\twhile (match != null) {\r\n\t\t\tconst result = await resolveMatch(this, match, defaultValue);\r\n\t\t\ttemp = temp.split(match[0]).join(); // remove current match for next loop\r\n\t\t\ttext = text.split(match[0]).join(typeof result === \"undefined\" ? \"undefined\" : (result == null ? \"null\" : result));\r\n\t\t\tmatch = EXPRESSION.exec(temp);\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tstatic async resolve(aExpression, aContext, aDefault, aTimeout) {\r\n\t\tconst resolver = new ExpressionResolver({ context: aContext });\r\n\t\tconst defaultValue = arguments.length > 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED;\r\n\t\tif (typeof aTimeout === \"number\" && aTimeout > 0)\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve(resolver.resolve(aExpression, defaultValue));\r\n\t\t\t\t}, aTimeout);\r\n\t\t\t});\r\n\r\n\t\treturn resolver.resolve(aExpression, defaultValue)\r\n\t}\r\n\r\n\tstatic async resolveText(aText, aContext, aDefault, aTimeout) {\r\n\t\tconst resolver = new ExpressionResolver({ context: aContext });\r\n\t\tconst defaultValue = arguments.length > 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED;\r\n\t\tif (typeof aTimeout === \"number\" && aTimeout > 0)\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve(resolver.resolveText(aText, defaultValue));\r\n\t\t\t\t}, aTimeout);\r\n\t\t\t});\r\n\r\n\t\treturn resolver.resolveText(aText, defaultValue);\r\n\t}\r\n\t\r\n\tstatic buildSecure({context, propFilter, option={deep:true}, name, parent}){\r\n\t\tcontext = ObjectUtils.filter({data: context, propFilter, option});\r\n\t\treturn new ExpressionResolver({context, name, parent});\r\n\t}\r\n};","import \"@default-js/defaultjs-common-utils/src/javascript/String.js\";\n\nexport const NODE_ATTRIBUTE_TEMPLATE = \"template\";\nconst CACHE = {};\nconst getKey = (template, cache, alias) => {\n\tif (!cache) return null;\n\n\tlet key = null;\n\tif (alias) key = alias;\n\telse if (typeof template === \"string\") key = template;\n\telse if (template instanceof URL) key = template.toString();\n\telse if (template instanceof HTMLElement) key = template.selector();\n\n\tif (key) return key.hashcode();\n\n\treturn null;\n};\n\nconst fromURL = async (url, cache, key) => {\n\tconst response = await fetch(url.toString());\n\tconst source = await response.text();\n\treturn fromSource(source, cache, key);\n};\n\nconst fromSource = async (source, cache, key) => {\n\treturn fromElement(create(source, true), cache, key);\n};\n\nconst fromElement = async (element, cache, key) => {\n\tlet template = null;\n\tif (element instanceof HTMLTemplateElement) template = new Template(element, key);\n\telse {\n\t\ttemplate = document.createElement(\"template\");\n\t\tif (element instanceof Node || element instanceof NodeList || element instanceof HTMLCollection || element instanceof Array) template.content.append(element.cloneNode(true));\n\t\telse throw new Error(\"Template type is not supported!\");\n\n\t\ttemplate = new Template(template, key);\n\t}\n\n\tif (!template) throw new Error(\"Template can't loaded!\");\n\n\tif (cache && key) CACHE[key] = template;\n\n\treturn template;\n};\n\nconst getTemplate = (node) => {\n\tlet template = node.find(\":scope > template\").first();\n\tif (!!template) return template;\n\tconst value = node.attr(NODE_ATTRIBUTE_TEMPLATE);\n\tif (!value) return null;\n\ttry {\n\t\ttemplate = find(value).first();\n\t\tif (!!template) return template;\n\t} catch (e) {}\n\treturn new URL(value, location);\n};\n\nexport default class Template {\n\n\t/**\n\t * Create an instance of template.\n\t * \n\t * @param template type of HTMLTemplateElement. Not null.\n\t * @param key identifier at cache, if template to be cached.\n\t */\n\tconstructor(/** @type {HTMLTemplateElement} */ template,/** @type {string} */ key) {\n\t\tthis.template = template;\n\t\tthis.key = key;\n\t}\n\n\timportContent(doc = document) {\n\t\tlet imported = doc.importNode(this.template, true);\n\t\treturn imported.content.childNodes;\n\t}\n\n\tremove() {\n\t\tif (this.key && CACHE[this.key]) delete CACHE[this.key];\n\t}\n\n\tstatic async fetch(url, cache = true, alias = null) {\n\t\tif (typeof url === \"string\") {\n\t\t\treturn Template.load(new URL(url, loaction), cache, alias);\n\t\t} else if (url instanceof URL) return Template.load(url, cache, alias);\n\n\t\tnew Error(\"The url isn't a allowed type! -> [String|URL] required!\");\n\t}\n\n\tstatic async load(template, cache = true, alias = null) {\n\t\tif (template instanceof Template) return template;\n\n\t\tconst key = getKey(template, cache, alias);\n\t\tif (key && CACHE[key]) return CACHE[key];\n\t\telse if (typeof template === \"string\") {\n\t\t\treturn fromSource(template, cache, key);\n\t\t} else if (template instanceof URL) return await fromURL(template, cache, key);\n\t\telse if (template instanceof Node || template instanceof NodeList || template instanceof HTMLCollection || template instanceof HTMLTemplateElement) return fromElement(template, cache, key);\n\n\t\tnew Error(\"The template isn't a allowed type! -> [String|URL|Node|NodeList|HTMLCollection|Template] required!\");\n\t}\n\n\tstatic async loadNodeTemplate(node, defaultTemplate, cache, alias) {\n\t\ttry {\n\t\t\tconst template = getTemplate(node);\n\t\t\tif (template) return Template.load(template, cache, alias);\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Can't load template from node!\", node, e);\n\t\t}\n\n\t\treturn defaultTemplate;\n\t}\n};\n\nexport const toAsyncTemplateLoader = (/*URL*/url) => {\n    let template = null;\n\n    return async () => {\n        if(!template){\n\t\t\tif(typeof url === \"function\")\n\t\t\t\turl = await url();\n\t\t\telse if(url instanceof Promise)\n\t\t\t\turl = await url;\n            template = Template.load(url);\n\t\t}\n\n        return template;\n    };\n};\n","export const ATTR_NAME = \"name\";\r\nexport const ATTR_ACTIVE = \"active\";\r\nexport const ATTR_STATEFUL = \"stateful\";\r\nexport const ATTR_COMPONENT_TAG = \"component-tag\";\r\nexport const ATTR_COMPONENT_TAG_ATTRIBUTES = \"component-tag-attributes\";\r\nexport const ATTR_CONTEXT = \"context\";\r\nexport const ATTR_REFRESH = \"refresh\";\r\nexport const ATTR_VIEW = \"view\";","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport Template, {NODE_ATTRIBUTE_TEMPLATE}  from \"@default-js/defaultjs-template-language/src/Template\";\nimport Resolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport NODENAME from \"./Nodename\";\nimport { EVENT_INIT, EVENT_CLICK, EVENT_ACTIVATE, EVENT_DEACTIVATE } from \"./Events\";\nimport { ATTR_NAME, ATTR_ACTIVE, ATTR_COMPONENT_TAG, ATTR_COMPONENT_TAG_ATTRIBUTES, ATTR_STATEFUL, ATTR_CONTEXT, ATTR_VIEW } from \"./Attributes\";\n\nconst ATTRIBUTES = [ATTR_NAME, NODE_ATTRIBUTE_TEMPLATE, ATTR_COMPONENT_TAG, ATTR_COMPONENT_TAG_ATTRIBUTES, ATTR_STATEFUL, ATTR_VIEW];\nconst EVENTS = [EVENT_CLICK, EVENT_ACTIVATE, EVENT_DEACTIVATE];\nconst getTagAttributes = async (route) => {\n\tconst attributes = route.attr(ATTR_COMPONENT_TAG_ATTRIBUTES) || \"{}\";\n\treturn Resolver.resolve(attributes, {}, {});\n};\n\nconst _template = privatePropertyAccessor(NODE_ATTRIBUTE_TEMPLATE);\n\nconst buildComponent = async (route) => {\n\tif (route.hasAttribute(NODE_ATTRIBUTE_TEMPLATE)) {\n\t\tlet template = _template(route);\n\t\tif (!template) {\n\t\t\ttemplate = await Template.loadNodeTemplate(route, null, false);\n\t\t\t_template(route, template);\n\t\t}\n\t\treturn template;\n\t} else {\n\t\tconst tag = route.attr(ATTR_COMPONENT_TAG);\n\t\tconst clazz = customElements.get(tag);\n\t\tconst attributes = await getTagAttributes(route);\n\n\t\tconst element = new clazz();\n\t\tfor (let attribute in attributes) {\n\t\t\tconst value = attributes[attribute];\n\t\t\tif (typeof value === \"string\") element.attr(attribute, value);\n\t\t}\n\n\t\treturn element;\n\t}\n};\n\nclass Route extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tstatic get EVENTS() {\n\t\treturn EVENTS;\n\t}\n\n\t#initialized = false;\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\t\tthis.on(\"click\", () => {\n\t\t\tif(!this.active)\n\t\t\t\tthis.trigger(EVENT_CLICK);\n\t\t});\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tif(!this.#initialized){\n\t\t\tthis.#initialized = true;\n\t\t\tthis.trigger(EVENT_INIT);\n\t\t\tif(this.active)\n\t\t\t\tthis.trigger(EVENT_CLICK);\n\t\t}\n\t}\n\n\tget name() {\n\t\treturn this.attr(ATTR_NAME);\n\t}\n\n\tget view(){\n\t\treturn this.attr(ATTR_VIEW);\n\t}\n\n\tget active() {\n\t\treturn this.hasAttribute(ATTR_ACTIVE);\n\t}\n\n\tset active(active) {\n\t\tconst current = this.active;\n\t\tif (active != current) {\n\t\t\tthis.attr(ATTR_ACTIVE, active ? \"\" : null);\n\t\t\tif (active)\n\t\t\t\tthis.trigger(EVENT_ACTIVATE);\n\t\t\telse \n\t\t\t\tthis.trigger(EVENT_DEACTIVATE);\n\t\t}\n\t}\n\t\n\tget stateful() {\n\t\treturn this.hasAttribute(ATTR_STATEFUL);\n\t}\n\n\tget context(){\n\t\treturn this.attr(ATTR_CONTEXT);\n\t}\t\n\t\n\tget refresh(){\n\t\treturn this.hasAttribute(ATTR_REFRESH);\n\t}\n\n\tasync component() {\t\t\n\t\treturn buildComponent(this);\n\t}\n}\n\ndefine(Route);\nexport default Route;\n","export const ATTR_TARGET = \"target\";\nexport const ATTR_CONTEXT = \"context\";\nexport const ATTR_REFRESH = \"refresh\";\nexport const ATTR_VIEW = \"view\";","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport NODENAME from \"./Nodename\";\nimport { EVENT_TO_ROUTE } from \"./Events\";\nimport { ATTR_TARGET, ATTR_CONTEXT, ATTR_REFRESH, ATTR_VIEW } from \"./Attributes\";\nimport {} from \"@default-js/defaultjs-html-components/src/utils/NodeHelper\";\n\nconst ATTRIBUTES = [ATTR_TARGET, ATTR_CONTEXT];\n\nconst EVENTS = [EVENT_TO_ROUTE];\n\nclass RouteLink extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tstatic get EVENTS() {\n\t\treturn EVENTS;\n\t}\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\t\tthis.on(\"click\", (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.trigger(EVENT_TO_ROUTE);\n\t\t});\n\t}\n\n\tasync init() {}\n\n\tget view() {\n\t\treturn this.attr(ATTR_VIEW);\n\t}\n\n\tget target() {\n\t\treturn this.attr(ATTR_TARGET);\n\t}\n\n\tget context() {\n\t\treturn this.attr(ATTR_CONTEXT);\n\t}\n\n\tget refresh() {\n\t\treturn this.hasAttribute(ATTR_REFRESH);\n\t}\n}\n\ndefine(RouteLink);\nexport default RouteLink;\n","import { toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\r\nexport default toNodeName(\"view\");","const DEFINED_DIRECTIVES = [];\n\nconst defineDirective = ({ directive }) => {\n\tif (!(directive instanceof Directive))\n\t\tthrow new Error(\"Implementation dosn't extend Directive class!\");\n\n\tif (directive.rank < Directive.MIN_RANK)\n\t\tthrow new Error(\"The rank of a directive can't be lower as \" + Directive.MIN_RANK + \"!\");\n\n\tif (directive.rank > Directive.MAX_RANK)\n\t\tthrow new Error(\"The rank of a directive can't be grater as \" + Directive.MAX_RANK + \"!\");\n\n\tDEFINED_DIRECTIVES.push(directive);\n\tDEFINED_DIRECTIVES.sort((a, b) => {\n\t\tconst phase = a.phase - b.phase;\n\t\tif(phase == 0)\n\t\t\treturn a.rank - b.rank;\n\t\t\t\n\t\treturn phase;\n\t});\n};\n\nconst PHASE = {\n\tinit: 0,\n\tdata: 1,\n\ttemplate: 2,\n\tcontent: 3,\n\tfinish: 4\n};\n\nexport default class Directive {\n\n\tstatic get PHASE() { return PHASE };\n\tstatic get MIN_RANK() { return 0 };\n\tstatic get MAX_RANK() { return 100000 };\n\n\tconstructor() { };\n\n\tget name() { }\n\tget rank() { }\n\tget phase() {return PHASE.finish}\n\n\t/**\n\t * need to be implemented\n\t * \n\t * return DirectiveResult\n\t */\n\tasync execute(context) {\n\t\treturn context;\n\t}\n\n\n\tstatic define(option) {\n\t\tdefineDirective(option);\n\t}\n\n\tstatic get directives() {\n\t\treturn DEFINED_DIRECTIVES;\n\t}\n};","import { lazyPromise } from \"@default-js/defaultjs-common-utils/src/PromiseUtils\";\r\nimport { defGet, defValue } from \"@default-js/defaultjs-common-utils/src/ObjectUtils\";\r\nimport { privateProperty } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport Directive from \"./Directive\";\r\nimport Template from \"./Template\";\r\n\r\nconst PRIVATE_WAIT = \"wait\";\r\nconst PRIVATE_CALLBACKS = \"callbacks\";\r\nconst PRIVATE_IGNOREDIRECTIVES = \"ignoreDirectives\";\r\n\r\nconst CONTEXTCLONE = new Set();\r\nconst CONTEXTS = new Map();\r\nconst WARNTIME = 1000;\r\nconst CRITICALTIME = 10000;\r\n\r\nlet observerTimeout = null;\r\nconst observe = (context) => {\r\n\tCONTEXTS.set(context, Date.now());\r\n\trunObserver();\r\n};\r\nconst runObserver = () => {\r\n\tif (observerTimeout == null) {\r\n\t\tobserverTimeout = setTimeout(() => {\r\n\t\t\tobserverTimeout = null;\r\n\t\t\tconst time = Date.now();\r\n\t\t\tCONTEXTS.forEach((createTime, context) => {\r\n\t\t\t\tconst delta = time - createTime;\r\n\t\t\t\tif (context.closed) CONTEXTS.delete(context);\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (delta > CRITICALTIME) {\r\n\t\t\t\t\t\tconsole.error(\"context lives longer then 10s\", delta / 1000, context);\r\n\t\t\t\t\t} else if (delta > WARNTIME) {\r\n\t\t\t\t\t\tconsole.warn(\"context lives longer then 1s\", delta / 1000, context);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(\"open context:\", CONTEXTS.size);\r\n\t\t\tif (CONTEXTS.size > 0) runObserver();\r\n\t\t}, 1000);\r\n\t}\r\n};\r\n\r\nconst toTemplate = (template) => {\r\n\tif (template instanceof Template) return template.importContent();\r\n\telse if (typeof template === String) return create(template);\r\n\treturn template;\r\n};\r\n\r\nlet id = 0;\r\nexport default class Context {\r\n\t#id;\r\n\t#depth;\r\n\t#parent;\r\n\t#renderer;\r\n\t#root;\r\n\t#template;\r\n\t#mode;\r\n\t#subcontexts;\r\n\t#wait;\r\n\t#ignoreDirectives;\r\n\t#callbacks;\r\n\r\n\tconstructor({ content = null, resolver, renderer, template, container, root, mode = \"replace\", target = null, parent = null, wait = null, callbacks = null, ignoreDirective }) {\r\n\t\tif (!resolver) throw new Error('Parameter \"resolver\" is required!');\r\n\t\tif (!renderer) throw new Error('Parameter \"renderer\" is required!');\r\n\t\tif (!template) throw new Error('Parameter \"template\" is required!');\r\n\t\tif (!container) throw new Error('Parameter \"container\" is required!');\r\n\t\tif (!root) throw new Error('Parameter \"root\" is required!');\r\n\r\n\t\tthis.#id = parent ? `${parent.id}->${id++}` : `root::${id++}`;\r\n\t\tthis.#depth = parent ? parent.depth + 1 : 0;\r\n\t\tthis.#parent = parent;\r\n\t\tthis.#renderer = renderer;\r\n\t\tthis.#root = root;\r\n\t\tthis.#template = toTemplate(template);\r\n\t\tthis.#mode = mode;\r\n\t\tthis.#subcontexts = new Set();\r\n\t\tthis.#wait = wait ? wait : lazyPromise();\r\n\t\tthis.#ignoreDirectives = ignoreDirective instanceof Set ? ignoreDirective : new Set();\r\n\t\tthis.#callbacks = callbacks instanceof Array ? callbacks : [];\r\n\r\n\t\tthis.content = content;\r\n\t\tthis.container = container;\r\n\t\tthis.target = target;\r\n\t\tthis.resolver = resolver;\r\n\r\n\t\t/* execution flags */\r\n\t\tthis.stop = false;\r\n\t\tthis.ignore = false;\r\n\t\t//console.log(`context={\"depth\":${this.depth} }, \"id\": ${this.id}`);\r\n\t\t//this.createtAt = new Error();\r\n\r\n\t\tif (parent) {\r\n\t\t\tparent.subcontexts.add(this);\r\n\t\t}\r\n\t}\r\n\r\n\tget id() {\r\n\t\treturn this.#id;\r\n\t}\r\n\tget depth() {\r\n\t\treturn this.#depth;\r\n\t}\r\n\tget parent() {\r\n\t\treturn this.#parent;\r\n\t}\r\n\tget renderer() {\r\n\t\treturn this.#renderer;\r\n\t}\r\n\tget root() {\r\n\t\treturn this.#root;\r\n\t}\r\n\tget template() {\r\n\t\treturn this.#template;\r\n\t}\r\n\tset template(template){\r\n\t\tthis.#template = toTemplate(template);\r\n\t}\r\n\r\n\tget mode() {\r\n\t\treturn this.#mode;\r\n\t}\r\n\tget subcontexts() {\r\n\t\treturn this.#subcontexts;\r\n\t}\r\n\r\n\tget closed() {\r\n\t\treturn this.#wait.resolved;\r\n\t}\r\n\r\n\tignoreDirective(directive) {\r\n\t\tconst ignoreDirectives = this.#ignoreDirectives;\r\n\t\tdirective instanceof Directive ? ignoreDirectives.add(directive.name) : ignoreDirectives.add(directive);\r\n\t}\r\n\r\n\tacceptDirective(directive) {\r\n\t\tconst ignoreDirectives = this.#ignoreDirectives;\r\n\t\tif (directive instanceof Directive) return !(ignoreDirectives.has(directive.name) || ignoreDirectives.has(directive));\r\n\r\n\t\treturn !ignoreDirectives.has(directive);\r\n\t}\r\n\r\n\tfinished(callback) {\r\n\t\tif (this.parent) this.parent.finished(callback);\r\n\t\telse this.ready(callback);\r\n\t}\r\n\r\n\tasync ready(callback) {\r\n\t\tconst callbacks = this.#callbacks;\r\n\t\tif (callback) {\r\n\t\t\tif (callback instanceof Array) callback.forEach((callback) => this.wait.then(callback));\r\n\t\t\telse if (callback instanceof Promise) callbacks.push(async () => await callback);\r\n\t\t\telse if (typeof callback === \"function\") callbacks.push(callback);\r\n\t\t} else {\r\n\t\t\tconst wait = this.#wait;\r\n\t\t\tif (!wait.resolved) {\r\n\t\t\t\tif (!this.ignore) for (let callback of callbacks) await callback(this);\r\n\r\n\t\t\t\tfor (let child of this.subcontexts) await child.ready();\r\n\r\n\t\t\t\tif (this.parent) this.parent.subcontexts.delete(this);\r\n\r\n\t\t\t\twait.resolve(this);\r\n\t\t\t}\r\n\r\n\t\t\treturn wait;\r\n\t\t}\r\n\t}\r\n\r\n\tsubContext({ resolver = this.resolver, renderer = this.renderer, template = this.template, container = this.container, root = this.root, mode = this.mode, target = this.target, ignoreDirective = null } = {}) {\r\n\t\treturn new Context({ resolver, renderer, template, container, mode, root, target, parent: this, ignoreDirective });\r\n\t}\r\n\r\n\tclone({ content = this.content, template = this.template, container = this.container, root = this.root, mode = this.mode, target = this.target, ignoreDirective = this.#ignoreDirectives } = {}) {\r\n\t\treturn new Context({ content, \r\n\t\t\tresolver: this.resolver, \r\n\t\t\trenderer: this.renderer, \r\n\t\t\ttemplate, \r\n\t\t\tcontainer, \r\n\t\t\troot, \r\n\t\t\tmode, \r\n\t\t\ttarget, \r\n\t\t\tignoreDirective,\r\n\t\t\twait: this.#wait,\r\n\t\t\tcallbacks: this.#callbacks\r\n\t\t });\r\n\t}\r\n\r\n\ttoRenderOption({ resolver = this.resolver, renderer = this.renderer, template = this.template, container = this.container, root = this.root, mode = this.mode, target = this.target, ignoreDirective = null } = {}) {\r\n\t\treturn { resolver, renderer, template, container, mode, root, target, parent: null, ignoreDirective };\r\n\t}\r\n}\r\n","export default class DirectiveElement extends HTMLElement{\n\tconstructor(){\n\t\tsuper();\n\t\tthis.hidden = true;\n\t}\n\t\n\t/**\n\t * need to be implemented\n\t * \n\t */\n\tasync execute({template, context}){\n\t\tcontext.content = template.cloneNode(true);\n\t\treturn context;\n\t};\t\n}","import Element from \"../Element.js\"\n\nexport default class ReplaceElement extends Element{\n\tconstructor(){\n\t\tsuper();\n\t\t\n\t\tthis.attachShadow({mode: 'open'});\n\t}\n\tasync execute({template, context}){\n\t\treturn context;\n\t};\t\t\n}\ntry{customElements.define(\"jstl-replace\", ReplaceElement);}catch(e){}//ignore","import Directive from \"../Directive.js\";\nimport Replace from \"../elements/Replace.js\";\n\nclass Initial extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn \"initial\";\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.init;\n\t}\n\n\tasync execute(context) {\n\t\tconst { template, renderer, resolver } = context;\n\t\tif (!(template instanceof Element)) {\n\t\t\tcontext.content = document.importNode(template, true);\n\t\t} else if (template.attr(\"jstl-ignore\")) {\n\t\t\tcontext.content = document.importNode(template, true);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t} else if (template.attr(\"jstl-async\")) {\n\t\t\tcontext.content = new Replace();\n\t\t\ttemplate.attr(\"jstl-async\", null);\n\t\t\tconst renderOption = context.toRenderOption({ mode: \"replace\", target: context.content });\n\t\t\tsetTimeout(() => {\n\t\t\t\trenderer.render(renderOption);\n\t\t\t}, parseInt(template.attr(\"jstl-async\") || \"250\") || 250);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t} else if (template instanceof HTMLTemplateElement) {\n\t\t\tcontext.content = document.createElement(template.tagName);\n\t\t\tconst subContext = context.subContext({ template: template.content.childNodes, container: context.content.content });\n\t\t\tawait renderer.render(subContext);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t} else if (template.hasAttribute(\"jstl-tagname\")) {\n\t\t\tlet tagname = template.attr(\"jstl-tagname\").trim();\n\t\t\tif (tagname.length > 0) context.content = document.createElement(await resolver.resolveText(template.attr(\"jstl-tagname\")));\n\t\t\telse {\n\t\t\t\tcontext.content = document.importNode(template, true);\n\t\t\t\tcontext.stop = true;\n\t\t\t\tcontext.ignore = true;\n\t\t\t}\n\t\t} else if (template.tagName) {\n\t\t\tlet is = template.attr(\"is\");\n\t\t\tif(is){\n\t\t\t\tis = await resolver.resolveText(is);\n\t\t\t\tconst element = document.createElement(template.tagName, { is });\n\t\t\t\telement.attr(\"is\", is);\n\t\t\t\tcontext.content = element;\n\t\t\t}else\n\t\t\t\tcontext.content =  document.createElement(template.tagName);\n\n\t\t} else {\n\t\t\tcontext.content = document.importNode(template, true);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Initial() });\n","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\n\nconst MODES = {\n\t\"remote\": async ({ data, context }) => {\t\t\n\t\tconst {resolver, template} = context;\n\t\tdata = await resolver.resolveText(data);\n\t\tdata = new URL(data, location.origin);\n\t\tlet option = await resolver.resolveText(template.attr(\"jstl-data-option\") || \"{}\");\n\t\toption = JSON.parse(option);\n\n\t\tdata = await fetch(data.toString(), option);\n\t\treturn data.json();\n\t},\t\n\t\"set\": async ({ data, context }) => {\n\t\tconst {resolver} = context;\n\t\t\n\t\tdata = await resolver.resolve(data);\n\t\treturn data;\n\t},\n\t\"direct\": async ({ data, context }) => {\n\t\tconst {resolver} = context;\n\t\t\n\t\tdata = await resolver.resolveText(data);\n\t\treturn data;\n\t}\n};\n\nconst updateContext = ({ varname, data, scope, context }) => {\n\tif (varname)\n\t\tcontext.resolver.updateData(varname, data, scope);\n\telse if (scope)\n\t\tcontext.resolver.mergeContext(data, scope);\n\telse{\n\t\tconst resolver = new ExpressionResolver({ context: data, name: \"jstl-data\", parent: context.resolver });\n\t\t//context = context.subContext({resolver});\n\t\tcontext.resolver = resolver;\n\t}\n\t\n\t\t\n\treturn context;\n};\n\n\n\nclass Data extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"data\" }\n\tget rank() { return 1000 }\n\tget phase(){return Directive.PHASE.data}\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || !context.template.attr(\"jstl-data\"))\n\t\t\treturn context;\n\t\t\t\n\t\ttry {\n\t\t\tconst { template } = context;\t\t\t\n\t\t\tconst mode = MODES[(template.attr(\"jstl-data-mode\") || \"remote\")];\n\t\t\tif (!mode)\n\t\t\t\tthrow new Error(\"The jstl-data-mode is unsupported!\");\n\n\t\t\tlet data = template.attr(\"jstl-data\");\n\t\t\tdata = await mode({ data, context });\n\n\t\t\tconst varname = template.attr(\"jstl-data-var\");\n\t\t\tconst scope = template.attr(\"jstl-data-scope\");\n\t\t\tcontext = updateContext({ varname, data, scope, context });\n\t\t} catch (e) {\n\t\t\tconsole.error(e, context.template);\n\t\t}\n\n\t\treturn context;\n\n\t}\n}\n\nDirective.define({ directive: new Data() });","import Directive from \"../Directive.js\";\n\nclass If extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"if\" }\n\tget rank() { return Directive.MIN_RANK + 1000 }\n\tget phase() { return Directive.PHASE.init }\n\n\tasync execute(context) {\n\t\tconst { template } = context;\n\t\tif (!(template instanceof HTMLElement) || !template.attr(\"jstl-if\"))\n\t\t\treturn context;\n\n\t\tconst expression = template.attr(\"jstl-if\");\n\t\tconst resolver = context.resolver;\n\t\tconst result = await resolver.resolve(expression, false);\n\t\tif (!result) {\n\t\t\tcontext.content = null;\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new If() });","import Directive from \"../Directive.js\";\n\nclass Choose extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"choose\" }\n\tget rank() { return Directive.MIN_RANK + 1 }\n\tget phase() { return Directive.PHASE.template }\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || !context.template.hasAttribute(\"jstl-choose\") || context.template.children.length == 0)\n\t\t\treturn context;\n\t\t\n\t\t//clone template, before manipulate template\n\t\tcontext.template = context.template.cloneNode(true);\n\t\tconst { template, resolver } = context;\n\t\tlet resolved = false;\n\t\tconst whens = template.find(\":scope > [jstl-when]\");\n\t\tconst length = whens.length;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst node = whens[i];\n\t\t\tif (!resolved && (await resolver.resolve(node.attr(\"jstl-when\"), false)))\n\t\t\t\tresolved = true;\n\t\t\telse\n\t\t\t\tnode.remove();\n\t\t}\n\n\t\tif (resolved)\n\t\t\ttemplate.find(\":scope > [jstl-otherwise]\").remove();\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Choose() });","import Directive from \"../Directive.js\";\nimport Template from \"../Template.js\";\n\nclass Include extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn \"include\";\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.template;\n\t}\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || !context.template.attr(\"jstl-include\")) return context;\n\t\ttry {\n\t\t\tconst { template, resolver, renderer } = context;\n\t\t\tlet include = template.attr(\"jstl-include\");\n\t\t\tinclude = await resolver.resolveText(include);\n\t\t\tinclude = new URL(include, location);\n\t\t\tinclude = await Template.load(include);\n\n\t\t\tconst mode = template.attr(\"jstl-include-mode\") || \"replace\";\n\n\t\t\tconst subContext = context.subContext({ template: include, container: context.content, mode});\n\t\t\tawait renderer.render(subContext);\n\t\t\tawait subContext.ready();\n\t\t\tcontext.ignore = true;\n\t\t\tcontext.stop = true;\n\n\t\t\treturn context;\n\t\t} catch (e) {\n\t\t\tconsole.error(e, context.template);\n\t\t\treturn context;\n\t\t}\n\t}\n}\n\nDirective.define({ directive: new Include() });\n","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver.js\";\n\nconst ATTRIBUTE = {\n\tDATA: \"jstl-foreach\",\n\tVAR: \"jstl-foreach-var\",\n\tSTATUS: \"jstl-foreach-status\",\n\tCOUNT: \"jstl-foreach-count\",\n\tSTART: \"jstl-foreach-start\",\n\tSTEP: \"jstl-foreach-step\",\n\tCONDITION: \"jstl-foreach-condition\"\n};\n\nconst doCount = async (option) => {\n\tlet { start, step, count, varname, status, resolver } = option;\n\n\tcount = await resolver.resolve(count);\n\tconst length = start + (count * step);\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {}\n\t\titeration[varname] = i;\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tstep,\n\t\t\tcount\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst doForeach = async (option) => {\n\tlet { data, start, step, count, varname, status, resolver } = option;\n\n\tdata = await resolver.resolve(data);\n\tlet array = data;\n\tif (!(data instanceof Array))\n\t\tarray = Object.getOwnPropertyNames(data);\n\n\tcount = count != \"\" ? await resolver.resolve(count, 0) : null;\n\tconst length = count ? Math.min(start + count, array.length) : array.length;\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {}\n\t\titeration[varname] = data[i];\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tcount: length,\n\t\t\tdata\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst iterate = async (data, option) => {\n\tlet { template, resolver, renderer, container, condition, context } = option;\n\tresolver = new ExpressionResolver({ context: data, name: \"jstl-foreach\", parent: resolver });\n\n\tcondition = condition ? await resolver.resolve(condition, false) : false;\n\tif (condition)\n\t\treturn false;\n\tconst itemContext = context.subContext({ resolver, container, template, mode: \"append\" });\n\tawait renderer.render(itemContext);\n\tawait itemContext.ready();\n\treturn true;\n};\n\nclass Foreach extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"foreach\" }\n\tget rank() { return Directive.MIN_RANK + 2 }\n\tget phase() { return Directive.PHASE.template }\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || (!context.template.attr(ATTRIBUTE.DATA) && !context.template.attr(ATTRIBUTE.COUNT)))\n\t\t\treturn context;\n\n\t\tcontext.ignore = true;\n\t\ttry {\n\t\t\tconst { template, resolver, renderer, content } = context;\n\t\t\tconst option = {\n\t\t\t\tdata: (template.attr(ATTRIBUTE.DATA) || \"\").trim(),\n\t\t\t\tcount: (template.attr(ATTRIBUTE.COUNT) || \"\").trim(),\n\t\t\t\tstart: await resolver.resolve(template.attr(ATTRIBUTE.START) || \"0\"),\n\t\t\t\tstep: await resolver.resolve(template.attr(ATTRIBUTE.STEP) || \"1\"),\n\t\t\t\tvarname: (template.attr(ATTRIBUTE.VAR) || \"item\").trim(),\n\t\t\t\tstatus: (template.attr(ATTRIBUTE.STATUS) || \"status\").trim(),\n\t\t\t\tcondition: template.attr(ATTRIBUTE.CONDITION),\n\t\t\t\ttemplate: template.childNodes,\n\t\t\t\tresolver,\n\t\t\t\trenderer,\n\t\t\t\tcontainer: content,\n\t\t\t\tcontext\n\t\t\t};\n\t\t\tif ((!option.data || option.data == \"\") && option.count)\n\t\t\t\tawait doCount(option);\n\t\t\telse\n\t\t\t\tawait doForeach(option);\n\n\t\t} catch (error) {\n\t\t\tconsole.error(\"error at jstl-foreach:\", error);\n\t\t}\n\t\treturn context;\n\n\t}\n};\n\nDirective.define({ directive: new Foreach() });","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver.js\";\n\nconst DIRECTIVENAME = \"jstl-repeat\";\nconst IGNOREDIRECTIVE = new Set([DIRECTIVENAME]);\n\nconst ATTRIBUTE = {\n\tDATA: `${DIRECTIVENAME}`,\n\tVAR: `${DIRECTIVENAME}-var`,\n\tSTATUS: `${DIRECTIVENAME}-status`,\n\tCOUNT: `${DIRECTIVENAME}-count`,\n\tSTART: `${DIRECTIVENAME}-start`,\n\tSTEP: `${DIRECTIVENAME}-step`,\n\tCONDITION: `${DIRECTIVENAME}-condition`,\n};\n\nconst doCount = async (option) => {\n\tlet { start, step, count, varname, status, resolver } = option;\n\tcount = await resolver.resolve(count);\n\tconst length = start + count * step;\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {};\n\t\titeration[varname] = i;\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tstep,\n\t\t\tcount,\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst doRepeat = async (option) => {\n\tlet { data, start, step, count, varname, status, resolver } = option;\n\n\tdata = await resolver.resolve(data);\n\tlet array = data;\n\tif (!(data instanceof Array)) array = Object.getOwnPropertyNames(data);\n\n\tcount = count != \"\" ? await resolver.resolve(count, 0) : null;\n\tconst length = count ? Math.min(start + count, array.length) : array.length;\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {};\n\t\titeration[varname] = data[i];\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tcount: length,\n\t\t\tdata,\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst iterate = async (data, option) => {\n\tlet { template, resolver, renderer, condition, context } = option;\n\tresolver = new ExpressionResolver({ context: data, name: DIRECTIVENAME, parent: resolver });\n\n\tcondition = condition ? await resolver.resolve(condition, false) : false;\n\tif (condition) return false;\n\n\tconst itemContext =  context.subContext({ resolver, template, mode: \"append\", ignoreDirective: IGNOREDIRECTIVE })\n\tawait renderer.render(itemContext);\n\tawait itemContext.ready();\n\n\treturn true;\n};\n\nclass Repeat extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn DIRECTIVENAME;\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK + 3;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.template;\n\t}\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || (!context.template.attr(ATTRIBUTE.DATA) && !context.template.attr(ATTRIBUTE.COUNT))) return context;\n\n\t\ttry {\n\t\t\tconst { template, resolver, renderer, content, container } = context;\n\t\t\tconst option = {\n\t\t\t\tdata: (template.attr(ATTRIBUTE.DATA) || \"\").trim(),\n\t\t\t\tcount: (template.attr(ATTRIBUTE.COUNT) || \"\").trim(),\n\t\t\t\tstart: await resolver.resolve(template.attr(ATTRIBUTE.START) || \"0\"),\n\t\t\t\tstep: await resolver.resolve(template.attr(ATTRIBUTE.STEP) || \"1\"),\n\t\t\t\tvarname: (template.attr(ATTRIBUTE.VAR) || \"item\").trim(),\n\t\t\t\tstatus: (template.attr(ATTRIBUTE.STATUS) || \"status\").trim(),\n\t\t\t\tcondition: template.attr(ATTRIBUTE.CONDITION),\n\t\t\t\ttemplate: template,\n\t\t\t\ttagname: content.tagName,\n\t\t\t\tresolver,\n\t\t\t\trenderer,\n\t\t\t\tcontainer,\n\t\t\t\tcontext,\n\t\t\t};\n\t\t\tif ((!option.data || option.data == \"\") && option.count) await doCount(option);\n\t\t\telse await doRepeat(option);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"error at jstl-repeat:\", error);\n\t\t}\n\n\t\tcontext.content = null;\n\t\tcontext.stop = true;\n\t\tcontext.ignore = true;\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Repeat() });\n","import Directive from \"../Directive.js\";\n\nconst DEFAULT_OPTION = {\n\tmode: \"text\",\n\tunsecure: false,\n\tpreventFormat : false,\n\tmaxLength: 0\t\n};\n\nconst SECURE_HTML_FILTER = \"script, style, body, html, head, object, link\";\n\nconst readOption = async (parent, context) => {\n\tconst resolver = context.resolver;\n\treturn {\n\t\tmode: await resolver.resolveText((parent.attr(\"jstl-text-content-type\") || \"text\").trim().toLowerCase()),\n\t\tunsecure: parent.hasAttribute(\"jstl-text-unsecure\"),\n\t\tpreventFormat: !!parent.attr(\"jstl-text-prevent-format\") || false,\n\t\tmaxLength: parseInt(await resolver.resolveText(parent.attr(\"jstl-text-trim-length\") || \"0\"))\n\t};\n};\n\nconst trimTextLength = (text, length) => {\n\treturn text.length > length ? text.substring(0, length - 3).trim() + \"...\" : text;\n};\n\nconst MODES = {\n\t\"text\" : async (option, context) => {\n\t\tconst {content, resolver, template} = context;\n\t\t\n\t\tlet text = await resolver.resolveText(template.textContent);\t\t\n\t\ttext = create(text,true).content.textContent;\n\t\tif(option.maxLength > 0)\n\t\t\ttext = trimTextLength(text, option.maxLength);\t\t\n\t\t\n\t\tcontent.textContent = text;\t\t\n\t},\n\t\"html\": async (option, context) => {\n\t\tconst {resolver, template} = context;\n\t\t\n\t\tlet content = await resolver.resolveText(template.textContent);\t\t\n\t\tcontent = create(content,true);\t\t\n\t\tcontent = document.importNode(content.content, true);\n\t\t\n\t\tif(option.unsecure)\n\t\t\tcontext.content = content;\t\t\t\n\t\telse{\n\t\t\tcontent.find(SECURE_HTML_FILTER).remove();\t\t\t\n\t\t\tcontext.content = content;\n\t\t}\n\t}\n};\n\n\nclass TextContent extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"text\" }\n\tget rank() { return Directive.MIN_RANK + 1 }\n\tget phase() { return Directive.PHASE.content }\n\n\n\n\tasync execute(context) {\n\t\tconst { template } = context;\n\t\tif (!(template instanceof Text) || template.textContent.trim().length == 0 || (template.parentElement && template.parentElement.hasAttribute(\"jstl-text-ignore\")))\n\t\t\treturn context;\n\n\t\tconst parent = template.parentElement;\n\t\tconst option = parent ? await readOption(parent, context) : DEFAULT_OPTION;\n\t\t\n\t\tconst  mode = MODES[option.mode];\n\t\tif(!mode)\n\t\t\tthrow new Error(\"Text mode \\\"\"+ option.mode + \"\\\" is unsupported!\");\n\t\t\n\t\tawait mode(option, context);\n\t\t\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new TextContent() });","import GLOBAL from \"@default-js/defaultjs-common-utils/src/Global.js\";\nimport Directive from \"../Directive.js\";\n\nconst ATTRIBUTE_NAME = /(jstl)?(\\?)?(@)?([^\\?@]+)/i;\n\nconst DEFAULT_EVENT_FUNCTION = \"default\";\nconst OPTION_PREVENT_DEFAULT = \"prevent-default\"\nconst IGNORED_ATTRIBUTES = [\"is\"];\n\nconst FUNCTION_SPLITTER = \"::\";\nconst FUNCTION_SPLITTER_OLD = \":\";\n\nconst EVENTFUNCTIONS = {\n\tdelegate: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst eventhandle = await resolver.resolveText(handle, handle);\n\t\tcontent.on(event, delegater(eventhandle, setting));\n\t},\n\ttoggleclass: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst clazz = options.shift();\n\t\tconst preventDefault = options.includes(OPTION_PREVENT_DEFAULT);\n\t\tconst selector = handle ? await resolver.resolveText(handle, handle) : null;\t\t\n\t\tcontent.on(event, (event) => {\n\t\t\tif(preventDefault)\n\t\t\t\tevent.preventDefault();\n\t\t\tif(selector)\n\t\t\t\tcontent.closests(selector).toggleClass(clazz);\n\t\t\telse\n\t\t\t\tcontent.toggleClass(clazz);\n\t\t});\n\t},\n\ttoggleattribute: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst attribute = options.shift();\n\t\tconst preventDefault = options.includes(OPTION_PREVENT_DEFAULT);\n\t\tconst selector = handle ? await resolver.resolveText(handle, handle) : null;\t\t\n\t\tcontent.on(event, (event) => {\n\t\t\tif(preventDefault)\n\t\t\t\tevent.preventDefault();\n\t\t\tif(selector)\n\t\t\t\tcontent.closests(selector).forEach(element => {\n\t\t\t\t\telement.toggleAttribute(attribute)\t\t\t\t\n\t\t\t\t});\n\t\t\telse \n\t\t\t\tcontent.toggleAttribute(attribute);\n\t\t});\n\t},\n\t[DEFAULT_EVENT_FUNCTION]: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst eventhandle = handle ? await resolver.resolve(handle, handle) : null;\n\n\t\tif (!eventhandle) console.error(new Error(\"Can't resolve \\\"\" + handle + '\" to event handle!'));\n\t\telse if (typeof eventhandle === \"function\") content.on(event, eventhandle);\n\t\telse if (typeof eventhandle === \"string\") content.on(event, delegater(eventhandle, setting));\n\t\telse if (typeof eventhandle === \"object\") {\n\t\t\tconst { capture = false, passive = false, once = false } = eventhandle;\n\t\t\tcontent.on(event, eventhandle.eventHandle, { capture, passive, once });\n\t\t}\n\t},\n};\n\nconst bindAttribute = async ({ condition, name, value, context }) => {\n\tconst { resolver, content, template } = context;\n\n\tlet attribute = !condition ? value : template.attr(name);\n\tcondition = condition ? value : template.attr(\"?\" + name);\n\tconst hasValue = isValue(attribute);\n\n\tif (condition && hasValue) {\n\t\tcondition = await resolver.resolve(condition, false);\n\t\tif (condition === true) content.attr(name, await resolver.resolveText(attribute, attribute));\n\t} else if (condition) {\n\t\tcondition = await resolver.resolve(condition, false);\n\t\tif (condition === true) content.attr(name, true);\n\t} else if (hasValue) {\n\t\tcontent.attr(name, await resolver.resolveText(attribute, attribute));\n\t}\n};\n\nconst isValue = (value) => {\n\treturn value != null && typeof value !== \"undefined\";\n};\n\nconst bindEvent = async ({ condition, name, value, context }) => {\n\tconst { resolver, template, content } = context;\n\n\tcondition = condition ? value : template.attr(\"?@\" + name);\n\tlet handle = !condition ? value : template.attr(\"@\" + name);\n\tlet split = name.split(FUNCTION_SPLITTER);\n\tif(split.length == 1)\n\t\tsplit = name.split(FUNCTION_SPLITTER_OLD);\n\n\tconst event = split.shift();\n\tconst type = (split.shift() || DEFAULT_EVENT_FUNCTION).toLowerCase();\n\t\n\tif(typeof handle === \"undefined\" || handle == null)\n\t\tconsole.error(`Definition of \"${event}\" - event handle at`, content, \"is incorrect!\");\n\n\thandle = handle.trim();\n\tconst setting = {\n\t\tbubble: true,\n\t};\n\n\tif (condition ) {\n\t\tif ((await resolver.resolve(condition, false)) == true) await binding(event, handle, setting, type, resolver, content, split, context);\n\t} else await binding(event, handle, setting, type, resolver, content, split, context);\n};\n\nconst binding = async (event, handle, setting, type, resolver, content, options, context) => {\n\tconst binder = EVENTFUNCTIONS[type];\n\tif (binder) return binder(event, handle, setting, type, resolver, content, options, context);\n};\n\nconst delegater = function (delegate, setting) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif (event.currentTarget) event.currentTarget.trigger(delegate, event);\n\t\telse event.target.trigger(delegate, event);\n\t};\n};\n\nclass Attribute extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn \"attribute\";\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.content;\n\t}\n\n\tasync execute(context) {\n\t\tconst { template } = context;\n\t\tif (!(template instanceof HTMLElement)) return context;\n\n\t\tconst processed = new Set(IGNORED_ATTRIBUTES);\n\t\tfor (const attribute of template.attributes) {\n\t\t\tconst [, jstl, condition, event, name] = ATTRIBUTE_NAME.exec(attribute.name);\n\t\t\tif (!jstl && !processed.has(name)) {\n\t\t\t\tconst value = attribute.value;\n\n\t\t\t\tif (event) await bindEvent({ condition, event, name, value, context });\n\t\t\t\telse await bindAttribute({ condition, name, value, context });\n\t\t\t}\n\t\t\tprocessed.add(name);\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Attribute() });\n","import Directive from \"../Directive.js\";\r\n\r\nconst ATTRIBUTE__ATTACHELEMENT = \"jstl-attach-element\";\r\nconst ATTRIBUTE__ATTACHELEMENT_MODE = \"jstl-attach-element-mode\";\r\n\r\nconst MODE_APPEND = \"append\";\r\nconst MODE_PREPEND = \"prepend\";\r\nconst MODE_REPLACE = \"replace\";\r\n\r\nconst PRECHECK = /^#.+$/;\r\n\r\nconst getElement = async (template, resolver) => {\r\n\tlet element = (template.attr(ATTRIBUTE__ATTACHELEMENT) || \"\").trim();\r\n\tif (!PRECHECK.test(element)) {\r\n\t\ttry {\r\n\t\t\telement = await resolver.resolve(element, element);\r\n\t\t} catch (e) {}\r\n\t\tif (element instanceof HTMLElement) return element;\r\n\t}\r\n\r\n\ttry {\r\n\t\telement = find(element);\r\n\t} catch (e) {}\r\n\r\n\tif (element && element.length > 0) return element.length == 0 ? element.first() : element;\r\n\r\n\treturn null;\r\n};\r\n\r\nclass AttachElement extends Directive {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tget name() {\r\n\t\treturn \"attach-element\";\r\n\t}\r\n\tget rank() {\r\n\t\treturn Directive.MIN_RANK + 1;\r\n\t}\r\n\tget phase() {\r\n\t\treturn Directive.PHASE.content;\r\n\t}\r\n\r\n\tasync execute(context) {\r\n\t\tconst { resolver, template, content } = context;\r\n\t\tif (!(template instanceof HTMLElement) || !template.attr(ATTRIBUTE__ATTACHELEMENT)) return context;\r\n\t\ttry {\r\n\t\t\tlet element = await getElement(template, resolver);\r\n\t\t\tif (element) {\r\n\t\t\t\tconst mode = template.attr(ATTRIBUTE__ATTACHELEMENT_MODE) || MODE_REPLACE;\r\n\t\t\t\tif (mode == MODE_REPLACE) {\r\n\t\t\t\t\tcontent.empty().append(element);\r\n\t\t\t\t\tcontext.stop = true;\r\n\t\t\t\t\tcontext.ignore = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.ready(({ content }) => {\r\n\t\t\t\t\t\tif (content) {\r\n\t\t\t\t\t\t\tif (mode == MODE_APPEND) content.append(element);\r\n\t\t\t\t\t\t\telse if (mode == MODE_PREPEND) content.prepend(element);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e, { context });\r\n\t\t}\r\n\r\n\t\treturn context;\r\n\t}\r\n}\r\nDirective.define({ directive: new AttachElement() });\r\n","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\n\nconst NAME = \"on-finished\";\nconst ATTRIBUTE_ON_FINISHED = `jstl-${NAME}`;\nconst ATTRIBUTE_ON_FINISHED_ASYNC = `${ATTRIBUTE_ON_FINISHED}-async`;\n\nclass OnFinished extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return NAME }\n\tget rank() { return Directive.MAX_RANK }\n\tget phase() { return Directive.PHASE.finish }\n\n\n\n\tasync execute(context) {\n\t\tconst { template, content, root } = context;\n\t\tif (!(template instanceof HTMLElement) || !template.hasAttribute(ATTRIBUTE_ON_FINISHED))\n\t\t\treturn context;\n\n\t\tconst expression = template.attr(ATTRIBUTE_ON_FINISHED);\n\t\tconst asyncCall = template.hasAttribute(ATTRIBUTE_ON_FINISHED_ASYNC);\n\n\t\tconst data = {\n\t\t\t$element: content,\n\t\t\t$root: root,\n\t\t\t$template: template\n\t\t};\n\t\tconst resolver = new ExpressionResolver({ context: data, name: \"jstl-data\", parent: context.resolver });\n\n\n\t\tcontext.finished(async () => {\n\t\t\ttry {\n\t\t\t\tif(!asyncCall)\n\t\t\t\t\treturn resolver.resolve(expression, null);\n\t\t\t\t\t\n\t\t\t\tresolver.resolve(expression, null);\r\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t});\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new OnFinished() });","import \"@default-js/defaultjs-extdom\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver.js\";\nimport Template from \"./Template.js\";\nimport Context from \"./Context.js\";\nimport Directive from \"./Directive.js\";\nimport Element from \"./Element.js\";\nimport \"./directives\";\nimport \"./elements\";\n\nexport const SCOPES = {\n\tapplication: \"application\",\n\tdata: \"data\",\n\trender: \"render\",\n\tcontainer: \"container\",\n\tnode: \"node\",\n\tdirective: \"directive\",\n};\n\nconst APPLICATION_SCOPE_RESOLVER = new ExpressionResolver({ name: SCOPES.application });\n\nconst MODEWORKER = {\n\treplace: async ({ container, target = null, content }) => {\n\t\tif (target) {\n\t\t\ttarget.replace(content);\n\t\t} else {\n\t\t\tcontainer.empty();\n\t\t\tcontainer.append(content);\n\t\t}\n\t},\n\tappend: async ({ container, target = null, content }) => {\n\t\tif (target) target.after(content);\n\t\telse container.append(content);\n\t},\n\tprepend: async ({ container, target = null, content }) => {\n\t\tif (target) target.before(content);\n\t\telse container.prepend(content);\n\t},\n};\n\nconst loadTemplateContent = async (template, renderer) => {\n\tif (template) {\n\t\ttemplate = await Template.load(template);\n\t\treturn template.importContent();\n\t} else if (renderer.template) {\n\t\treturn await renderer.template.importContent();\n\t}\n\n\tthrow new Error(\"No content template specified!\");\n};\n\nconst addContent = async (context) => {\n\tif (context.content) {\n\t\tconst modeworker = MODEWORKER[context.mode];\n\t\tif (!modeworker) throw new Error('The \"' + context.mode + '\" is not supported!');\n\t\tawait modeworker(context);\n\t}\n};\n\nconst renderContainer = async (context) => {\n\tlet { template, resolver } = context;\n\tif (!template || template.length == 0) return context;\n\n\tlet content = [];\n\tfor (let nodeTemplate of template) {\n\t\tnodeTemplate.normalize();\n\t\tconst nodeResolver = new ExpressionResolver({ name: SCOPES.node, context: null, parent: resolver });\n\t\tconst nodeContext = await renderNode(context.subContext({ template: nodeTemplate, resolver: nodeResolver }));\n\t\tawait nodeContext.ready();\n\t\tconst node = nodeContext.content;\n\t\tif (node) {\n\t\t\tif (node instanceof Array) content = content.concat(node);\n\t\t\tif (node instanceof NodeList || node instanceof HTMLCollection) content = content.concat(Array.from(node));\n\t\t\telse if (node instanceof Node) content.push(node);\n\t\t}\n\t}\n\n\tcontext.content = content.length != 0 ? content : null;\n\treturn context;\n};\n\nconst renderNode = async (context) => {\n\ttry {\n\t\tlet { template, renderer } = context;\n\t\tif (template instanceof Element) await template.execute(context);\n\t\telse await executeDirectives(context);\n\n\t\tconst { ignore, content } = context;\n\n\t\tif (!ignore && content) {\n\t\t\tlet { resolver } = context;\n\t\t\tconst subTemplate = context.template.childNodes;\n\t\t\tif (subTemplate && subTemplate.length > 0) {\n\t\t\t\tconst containerResolver = new ExpressionResolver({ name: SCOPES.container, context: null, parent: resolver });\n\t\t\t\tconst subContext = await renderer.render(context.subContext({ container: content, template: subTemplate, resolver: containerResolver }));\n\t\t\t\tawait subContext.ready();\n\t\t\t}\n\t\t}\n\n\t\tif (context.content && context.content.tagName && context.content.tagName == \"JSTL\") context.content = context.content.childNodes; //special case to support the old \"<jstl>\" tag.\n\t} catch (e) {\n\t\tconsole.error(\"error at render node:\", e, context);\n\t}\n\treturn context;\n};\n\nconst executeDirectives = async (context) => {\n\tconst directives = Directive.directives;\n\tconst length = directives.length;\n\tfor (let i = 0; i < length && !context.stop; i++) {\n\t\tconst directive = directives[i];\n\t\ttry {\n\t\t\tif (context.acceptDirective(directive)) await directive.execute(context);\n\t\t} catch (e) {\n\t\t\tconsole.error(\"error at directive:\", e, directive, context);\n\t\t}\n\t}\n\treturn context;\n};\n\nexport default class Renderer {\n\tconstructor({ template, data } = {}) {\n\t\tif (template && !(template instanceof Template)) throw new Error(\"template must be an instance of Template!\");\n\n\t\tthis.template = template;\n\t\tthis.resolver = new ExpressionResolver({ name: SCOPES.data, context: data ? data : {}, parent: APPLICATION_SCOPE_RESOLVER });\n\t}\n\n\t/**\n\t * @param\n\t * \t\tcontainer HTMLElement -> target to render in\n\t * @param\n\t * \t\tdata Object|... -> data to used at rendering\n\t * @param\n\t * \t\ttemplate Template|Node|NodeList|HTMLCollection|String -> template to render\n\t * @param\n\t * \t\tmode \"append\"|\"insert\"|\"replace\"\n\t * @param\n\t * \t\ttarget\n\t */\n\tasync render(context) {\n\t\tconst calledWithContext = context instanceof Context;\n\t\tif (!calledWithContext) {\n\t\t\tlet { template = null, data = null, container, root, mode, target } = context;\n\t\t\ttemplate = await loadTemplateContent(template, this);\n\t\t\tconst resolver = new ExpressionResolver({ name: SCOPES.render, context: data, parent: this.resolver });\n\t\t\tcontext = new Context({ resolver, renderer: this, template: template, container, root: root ? root : container, mode: mode ? mode : \"replace\", target });\n\t\t} else if (context.closed) throw new Error(\"calling with closed context\", context);\n\n\t\tconst template = context.template;\n\t\tif (template instanceof Node) await renderNode(context);\n\t\telse await renderContainer(context);\n\t\t\n\t\tawait addContent(context);\n\n\t\tif (!calledWithContext)\n\t\t\tawait context.ready();\n\n\t\treturn context;\n\t}\n\n\tstatic async build({ template, data } = {}) {\n\t\tif (template && template instanceof Promise) template = await template;\n\n\t\ttemplate = template ? await Template.load(template) : null;\n\t\treturn new Renderer({ template, data });\n\t}\n\n\tstatic async render({ container, data, template, mode, target }) {\n\t\tconst renderer = new Renderer({ template, data });\n\t\treturn renderer.render({ container, mode, target });\n\t}\n}\n","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport NODENAME from \"./Nodename\";\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport WeakData from \"@default-js/defaultjs-html-components/src/utils/WeakData\";\nimport { ATTR_VIEW } from \"../Application\";\n\nconst _app = privatePropertyAccessor(\"app\");\nconst _route = privatePropertyAccessor(\"route\");\n\nconst ROUTEDATA = new WeakData();\n\nconst ATTR_NAME = \"name\";\nconst ATTRIBUTES = [ATTR_NAME];\nclass View extends Component {\n\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\t}\n\n\tget name(){\n\t\treturn this.attr(ATTR_NAME);\n\t}\n\n\tget app() {\n\t\treturn _app(this);\n\t}\n\n\tset app(app) {\n\t\t_app(this, app);\n\t}\n\n\tget route(){\n\t\treturn _route(this);\n\t}\n\n\tasync display({ route, context, view, refresh = false }) {\n\t\tif (view) throw new Error(\"you must override the display function!\");\n\n\t\t_route(this, route);\n\t\tconst { root, app } = this;\n\t\troot.empty();\n\n\t\tlet component = route.stateful ? ROUTEDATA.value(route, \"component\") : null;\n\t\tif (refresh || !component) {\n\t\t\tcomponent = await route.component();\n\t\t\tif (component instanceof Template) {\n\t\t\t\tawait Renderer.render({\n\t\t\t\t\tcontainer: root,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t$view: this,\n\t\t\t\t\t\t$app: app,\n\t\t\t\t\t\t$store: app.store,\n\t\t\t\t\t\t$route: route,\n\t\t\t\t\t\t$context: context,\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: component,\n\t\t\t\t});\n\t\t\t\tcomponent = NodeList.from(root.childNodes);\n\t\t\t} else {\n\t\t\t\tif (component instanceof View) {\n\t\t\t\t\tcomponent.app = app;\n\t\t\t\t\tcomponent.ready.then(() => {\n\t\t\t\t\t\tcomponent.display({ route, context, view: this });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\troot.append(component);\n\t\t\t}\n\n\t\t\tif (route.stateful) ROUTEDATA.value(route, \"component\", component);\n\t\t} else {\n\t\t\tif (component instanceof View) {\n\t\t\t\tcomponent.app = app;\n\t\t\t\tcomponent.ready.then(() => {\n\t\t\t\t\tcomponent.display({ route, context, view: this });\n\t\t\t\t});\n\t\t\t}\n\t\t\troot.append(component);\n\t\t}\n\t}\n}\ndefine(View);\nexport default View;\n","import { defValue } from\"@default-js/defaultjs-common-utils/src/ObjectUtils\";\nexport default class WeakData {\n\tconstructor() {\n\t\tdefValue(this, \"weakmap\", new WeakMap());\n\t}\n\n\tdata(reference) {\n\t\tlet data = this.weakmap.get(reference);\n\t\tif (!data) {\n\t\t\tdata = {};\n\t\t\tthis.weakmap.set(reference, data);\n\t\t}\n\t\treturn data;\n\t}\n\n\tvalue(reference, key, value) {\n\t\tif (arguments.length == 2) return this.data(reference)[key];\n\t\telse if(typeof value === \"undefined\") delete this.data(reference)[key];\n\t\telse this.data(reference)[key] = value;\n\t}\n\n\tdestroy(){\n\t\tthis.weakmap.delete(reference);\n\t}\n};\n\n","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define, toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport { findClosestInDepth } from \"@default-js/defaultjs-html-components/src/utils/NodeHelper\";\nimport { attributeChangeEventname } from \"@default-js/defaultjs-html-components/src/utils/EventHelper\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport { EVENT_CLICK as ROUTE_CLICK } from \"./Route/Events\";\nimport { EVENT_TO_ROUTE } from \"./RouteLink/Events\";\nimport Resolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\nimport Route from \"./Route\";\nimport RouteLink from \"./RouteLink\";\nimport View from \"./View\";\n\nconst _view = privatePropertyAccessor(\"view\");\nconst _store = privatePropertyAccessor(\"store\");\n\nconst NODENAME = toNodeName(\"application\");\nexport const EVENT_STORE_CHANGED = \"app-store-changed\";\nexport const ATTR_ROUTE = \"route\";\nexport const ATTR_VIEW = \"view\";\n\nconst findRoute = (app, name) => {\n\tconst selector = `${Route.NODENAME}[name=\"${name}\"]`;\n\treturn app.find(selector).first();\n};\n\nconst closestView = (app, name) => {\n\treturn findClosestInDepth(app.root, (node) => {\n\t\treturn node instanceof View && (name == null || node.name == name);\n\t});\n};\n\nconst findView = (app, name) => {\n\tlet view = null;\n\tif (name) {\n\t\tconst result = app.root.find(`d-view[name=\"${name}\"]`).first();\n\t\tif (result && result.length == 1) view = result.first();\n\t}\n\n\tif (!view) view = closestView(app, name);\n\n\tif (view) view.app = app;\n\n\treturn view;\n};\n\nconst buildRouteContext = async (context, app) => {\n\ttry {\n\t\treturn Resolver.resolve(context, app.store, null);\n\t} catch (e) {\n\t\treturn null;\n\t}\n};\n\nconst ATTRIBUTES = [ATTR_ROUTE, ATTR_VIEW];\n\nclass Application extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\n\t\tthis.root.on([ROUTE_CLICK, EVENT_TO_ROUTE], async (event) => {\n\t\t\tthis.route({ route: event.target });\n\t\t});\n\n\t\tthis.on(attributeChangeEventname(ATTR_ROUTE, this), () => {\n\t\t\tif (this.hasAttribute(ATTR_ROUTE)) this.route({ route: this.attr(ATTR_ROUTE) });\n\t\t});\t\t\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tthis.ready.then(() => {\n\t\t\tif (this.hasAttribute(ATTR_ROUTE)) this.route({ route: this.attr(ATTR_ROUTE) });\n\t\t});\n\t}\n\n\tasync routes() {\n\t\treturn this.root.find(Route.NODENAME);\n\t}\n\n\tasync route({ route, refresh = null, context = null, view = null }) {\n\t\tawait this.ready;\n\n\t\tif (arguments.length == 0) return this.view.route;\n\n\t\tif (typeof route === \"string\") route = findRoute(this, route);\n\t\telse if (route instanceof RouteLink) {\n\t\t\trefresh = refresh != null ? refresh : route.refresh;\n\t\t\tif (context == null) context = await buildRouteContext(route.context, this);\n\t\t\tif (view == null) view = route.view;\n\t\t\troute = findRoute(this, route.target);\n\t\t}\n\t\telse if (!(route instanceof Route)) throw new Error(\"Unsupported route type!\");\n\n\t\tif (refresh == null) refresh = false;\n\t\tif (view == null) view = route.view;\n\n\t\tview = view ? findView(this, view) : this.view;\n\n\t\tif (!refresh && view.route == route) return;\n\n\t\tif (context == null) context = await buildRouteContext(route.context, this);\n\n\t\tif (view.route) view.route.active = false;\n\t\tawait view.display({ route, context, refresh });\n\t\troute.active = true;\n\t}\n\n\tget view() {\n\t\tlet view = _view(this);\n\t\tif (!view) {\n\t\t\tview = findView(this, this.attr(ATTR_VIEW));\n\t\t\t_view(this, view);\n\t\t\tview.app = this;\n\t\t}\n\n\t\treturn view;\n\t}\n\n\tget store() {\n\t\tlet store = _store(this);\n\t\tif (!store) {\n\t\t\tstore = {};\n\t\t\t_store(this, store);\n\t\t}\n\t\treturn store;\n\t}\n}\n\ndefine(Application);\nexport default Application;\n","((Global) => {\r\n\tconst calcCampaignAvailability = (registration) => {\r\n\t\tconst { availability, fullyavailable, member: { name } } = registration;\r\n\r\n\t\tlet score = 0;\r\n\t\tif (fullyavailable !== true)\r\n\t\t\tfor (const day of availability) {\r\n\t\t\t\tconst { available } = day;\r\n\t\t\t\tif (\"partially\" == available)\r\n\t\t\t\t\tscore = score + 1;\r\n\t\t\t\telse if (\"none\" == available)\r\n\t\t\t\t\tscore = score + 3;\r\n\t\t\t}\r\n\r\n\r\n\t\treturn [(\"000000\" + score).slice(-6), name.toLowerCase()].join(\"::\");\r\n\t}\r\n\r\n\tGlobal[\"functions\"] = {\r\n\t\tcalcCampaignAvailability\r\n\t}\r\n})(window);","window.Date.prototype.addDays = function (days) {\r\n    const date = new Date(this);\r\n    date.setDate(date.getDate() + days);\r\n    return date;\r\n};","if ('serviceWorker' in navigator) {\r\n\tnavigator\r\n\t\t.serviceWorker\r\n\t\t.register('./serviceworker.js', { scope: './' })\r\n\t\t.then((reg) => {\r\n\t\t\tconsole.log(reg)\r\n\t\t\tif (reg.installing) {\r\n\t\t\t\tconsole.log('Service worker installing');\r\n\t\t\t} else if (reg.waiting) {\r\n\t\t\t\tconsole.log('Service worker installed');\r\n\t\t\t} else if (reg.active) {\r\n\t\t\t\tconsole.log('Service worker active');\r\n\t\t\t\treg.active.postMessage(\"validate-cache\");\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\t// Registration failed\r\n\t\t\tconsole.log('Registration failed with ' + error);\r\n\t\t});\r\n}","import { componentBaseOf, define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst NODENAME = \"x-dialog\";\r\nconst CLOSEMARKER = \"[close-modal]\";\r\n\r\nclass HTMLDialogExtentionElement extends componentBaseOf(HTMLDialogElement){\r\n\r\n    static get NODENAME(){ return NODENAME; }\r\n\r\n    constructor(){\r\n        super();\r\n        this.on(\"click\", (event) => {\r\n\t\t\tconst {target} = event;\r\n            if(target.is(CLOSEMARKER)){\r\n\t\t\t\tevent.stopPropagation();\r\n                this.close();\r\n            }\r\n        });\r\n    }\r\n\r\n    async init(){\r\n        await super.init();\r\n    }\r\n\r\n    hide(){\r\n        this.close();\r\n    }\r\n}\r\n\r\ndefine(HTMLDialogExtentionElement, { extends: \"dialog\"});\r\nexport default HTMLDialogExtentionElement;","import { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { login, accessToken } from \"../services/LoginService.js\";\r\n\r\nexport const NODENAME = \"x-login-component\";\r\nconst ATTR_TEMPLATE = \"template\";\r\n\r\nclass WotLoginComponent extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tconst user = await login();\r\n\t\tif (user) {\r\n\t\t\tconst attrTemplate = this.attr(ATTR_TEMPLATE);\r\n\t\t\tif (attrTemplate) {\r\n\t\t\t\tconst template = await Template.load(new URL(attrTemplate, location));\r\n\t\t\t\tawait Renderer.render({ container: this, data: { user }, template });\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.textContent = \"kein Zugriff erlaubt\";\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n\r\ndefine(WotLoginComponent);\r\n\r\nexport default WotLoginComponent;\r\n","import { TEMPLATE_BASEPATH } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\n\r\nexport const NODENAME = \"x-clan\";\r\nexport const ATTR__CLAN_ID = \"clan-id\";\r\nexport const ATTR__CLAN_NAME = \"clan-name\";\r\nexport const ATTR__CLAN_TAG = \"clan-tag\";\r\n\r\nconst TEMPLATE_URL__ROOT = new URL(`${TEMPLATE_BASEPATH}/html-clan-element/root.tpl.html`, location);\r\n\r\nclass HTMLClanElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#clan = null;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.on(`${NODENAME}:sort-member-by-name`, () => {});\r\n\t\tthis.on(`${NODENAME}:sort-member-by-wtr`, () => {});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tconst template = await Template.load(TEMPLATE_URL__ROOT);\r\n\t\t\tawait Renderer.render({ container: this.root, template, data: await this.clanData() });\r\n\t\t}\r\n\t}\r\n\r\n\tasync clanData() {\r\n\t\tif (!this.#clan) {\r\n\t\t\tthis.#clan = {\r\n\t\t\t\tid: this.attr(ATTR__CLAN_ID),\r\n\t\t\t\tname: this.attr(ATTR__CLAN_NAME),\r\n\t\t\t\ttag: this.attr(ATTR__CLAN_TAG),\r\n\t\t\t};\r\n\r\n\t\t\tlet response = await fetch(new URL(`/api/clans/${this.#clan.id}/members`, location));\r\n\t\t\tresponse = await response.json();\r\n\t\t\tthis.#clan.members = response.data;\r\n\t\t}\r\n\r\n\t\treturn this.#clan;\r\n\t}\r\n}\r\n\r\ndefine(HTMLClanElement);\r\nexport default HTMLClanElement;\r\n","import {login} from \"./LoginService.js\";\r\n\r\nconst toURL = (url) => {\r\n    if(!(url instanceof URL))\r\n        return new URL(url, location);\r\n    return url;\r\n};\r\n\r\nconst internalFetch = async (url, request) => {\t\r\n\tconst response = await fetch(toURL(url), request);\r\n\tif(response.ok && response.status >= 400)\r\n\t\treturn await login();\r\n\t\t\r\n\treturn response;\r\n}\r\n\r\nexport const getJSON = async (url) => {\r\n    const response = await internalFetch(url, {headers:{\"content-type\": \"application/json\"}});\r\n    if(response.status < 204)\r\n    \treturn response.json();\r\n};\r\n\r\nexport const postJSON = async (url, data) => {\r\n    const response = await internalFetch(url, {method: \"post\" ,headers:{\"content-type\": \"application/json\"}, body: JSON.stringify(data)});\r\n    if(response.status < 204)\r\n        return response.json();\r\n};\r\n\r\nexport const deleteJSON = async (url) => {\r\n    await internalFetch(url, {method: \"delete\", headers:{\"content-type\": \"application/json\"}});\r\n};","import { getJSON } from \"./ServiceUtils.js\";\r\nimport { member } from \"./LoginService.js\";\r\n\r\nconst ENDPOINT = `/api/members`;\r\nconst ENDPOINT_BY_ID = (id) => `/api/members/${id}`;\r\nconst EXPIREAFTER = 60 * 60 * 1000;\r\n\r\nlet EXPIRESAT = 0;\r\nconst getCache = (() => {\r\n\tlet members = null;\r\n\treturn async () => {\r\n\t\tif (members == null || EXPIRESAT < Date.now()) {\r\n\t\t\tmembers = loadMembers();\r\n\t\t\tEXPIRESAT = Date.now() + EXPIREAFTER;\r\n\t\t}\r\n\t\treturn await members;\r\n\t}\r\n})();\r\n\r\nconst loadMembers = async () => {\r\n\tconst members = new Map();\r\n\tconst response = (await getJSON(ENDPOINT)).data;\r\n\tfor (const member of response)\r\n\t\tmembers.set(`${member.id}`, member);\r\n\r\n\treturn members;\r\n}\r\n\r\nexport const currentMember = async () => {\r\n\treturn member();\r\n};\r\n\r\nexport const getMembers = async () => {\r\n\tconst cache = await getCache();\r\n\tconst members = Array.from(cache.values());\r\n\treturn members.sort((a, b) => {\r\n\t\tif (a.name.toLowerCase() < b.name.toLowerCase())\r\n\t\t\treturn -1;\r\n\t\tif (a.name.toLowerCase() > b.name.toLowerCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t});\r\n};\r\n\r\nexport const getMember = async (memberid) => {\r\n\tconst cache = await getCache();\r\n\tlet member = cache.get(`${memberid}`);\r\n\tif (!member) {\r\n\t\tmember = await getJSON(ENDPOINT_BY_ID(memberid));\r\n\t\tif (member)\r\n\t\t\tgetCache()[member.id] = member;\r\n\t}\r\n\r\n\treturn member;\r\n}","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getMember } from \"../services/MemberService.js\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-member-element`\r\nexport const NODENAME = \"x-member\";\r\nconst ATTR__MEMBERID = \"member-id\";\r\n\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\n\r\nclass HTMLMemberElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\t\t\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n            this.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget memberId(){\r\n\t\treturn parseInt(this.attr(ATTR__MEMBERID));\r\n\t}\r\n\r\n    async render() {\r\n        const template = await TEMPLATE_ROOT;\r\n\t\tconst member = await getMember(this.memberId);\r\n\t\tawait Renderer.render({ container: this.root, template, data: {member} });\r\n    }\r\n}\r\n\r\ndefine(HTMLMemberElement);\r\nexport default HTMLMemberElement;\r\n","import {getJSON, postJSON, deleteJSON} from \"./ServiceUtils.js\";\r\n\r\nconst ENDPOINT = `/api/campaigns`;\r\n\r\nconst CACHE = new Map();\r\n\r\nexport const getCampaigns = async () => {\r\n    let campaigns = null\r\n    if(CACHE.size == 0){\r\n        campaigns = (await getJSON(ENDPOINT)).data;\r\n        for(const campaign of campaigns)\r\n            CACHE.set(campaign.id, campaign);\r\n    }\r\n    else {\r\n        campaigns = [];\r\n        for(const [key, campaign] of CACHE)\r\n            campaigns.push(campaign);\r\n    }\r\n    return campaigns;\r\n};\r\n\r\nexport const getCampaign = async (id) => {\r\n    if(CACHE.has(id))\r\n        return CACHE.get(id);\r\n\r\n    const campaign = (await getJSON(`${ENDPOINT}/${id}`));\r\n    CACHE.set(campaign.id, campaign);\r\n    \r\n    return campaign;\r\n};\r\n\r\nexport const storeCampaign = async (campaign) => {\r\n    campaign = (await postJSON(`${ENDPOINT}`, campaign));\r\n    CACHE.set(campaign.id, campaign);\r\n    \r\n    return campaign;\r\n};\r\n\r\nexport const deleteCampaign = async (id) => {\r\n    await deleteJSON(`${ENDPOINT}/${id}`);\r\n    CACHE.delete(id);\r\n};","export const HTML_TAG_PREFIX = \"d-\";\r\nexport const TRIGGER_TIMEOUT = 10;\r\nexport const EVENTHANDLE_TIMEOUT = 10;\r\nexport const EVENTHANDLE_INPUT_TIMEOUT = 50 * EVENTHANDLE_TIMEOUT;\r\n\r\nexport const NODENAME_FORM = `${HTML_TAG_PREFIX}form`;\r\nexport const NODENAME_SUBMIT_ACTION = `${HTML_TAG_PREFIX}submit-action`;\r\nexport const NODENAME_PAGE = `${HTML_TAG_PREFIX}page`;\r\nexport const NODENAME_FIELD = `${HTML_TAG_PREFIX}field`;\r\nexport const NODENAME_CONTAINER = `${HTML_TAG_PREFIX}container`;\r\n\r\nexport const NODENAME_LIST = `${HTML_TAG_PREFIX}list`;\r\nexport const NODENAME_LIST_ROWS= `${HTML_TAG_PREFIX}rows`;\r\nexport const NODENAME_LIST_ROW= `${HTML_TAG_PREFIX}row`;\r\nexport const NODENAME_LIST_ADD_ROW= `${HTML_TAG_PREFIX}add-row`;\r\nexport const NODENAME_LIST_DELETE_ROW= `${HTML_TAG_PREFIX}delete-row`;\r\n\r\nexport const NODENAME_PROGESSBAR = `${HTML_TAG_PREFIX}progress-bar`;\r\nexport const NODENAME_STEP = `${HTML_TAG_PREFIX}step`;\r\n\r\nexport const NODENAME_VALIDATION = `${HTML_TAG_PREFIX}validation`;\r\nexport const NODENAME_MESSAGE = `${HTML_TAG_PREFIX}message`;\r\n\r\nexport const NODENAME_CONTROL = `${HTML_TAG_PREFIX}control`;\r\nexport const NODENAME_CONTROL_BACK = `${HTML_TAG_PREFIX}control-back`;\r\nexport const NODENAME_CONTROL_NEXT = `${HTML_TAG_PREFIX}control-next`;\r\nexport const NODENAME_CONTROL_CANCEL = `${HTML_TAG_PREFIX}control-cancel`;\r\nexport const NODENAME_CONTROL_SUMMARY = `${HTML_TAG_PREFIX}control-summary`;\r\nexport const NODENAME_CONTROL_SUBMIT = `${HTML_TAG_PREFIX}control-submit`;\r\n\r\n\r\nexport const FORMSTATE_INIT = \"init\";\r\nexport const FORMSTATE_VALIDATING = \"validating\";\r\nexport const FORMSTATE_INPUT = \"input\";\r\nexport const FORMSTATE_SUMMARY = \"summary\";\r\nexport const FORMSTATE_FINISHED = \"finished\";\r\nexport const FORMSTATES = {\r\n\tinit: FORMSTATE_INIT,\r\n\tvalidating: FORMSTATE_VALIDATING,\r\n\tinput: FORMSTATE_INPUT,\r\n\tsummary: FORMSTATE_SUMMARY,\r\n\tfinished: FORMSTATE_FINISHED,\r\n};\r\n\r\nexport const REQUIREDSTATES = {\r\n\talways: \"always\",\r\n\tonActive: \"on-active\",\r\n};\r\n\r\nexport const EVENT_PREFIX = HTML_TAG_PREFIX + \"form-\";\r\n\r\nexport const EVENT_INITIALIZE = `${EVENT_PREFIX}initialize`;\r\nexport const EVENT_INITIALIZED = `${EVENT_PREFIX}initialized`;\r\n\r\nexport const EVENT_INITIALIZE_SUBMIT_ACTION = `${EVENT_INITIALIZE}submit-action`;\r\nexport const EVENT_SUBMIT = `${EVENT_PREFIX}submit`;\r\nexport const EVENT_SUBMIT_RESULTS = `${EVENT_PREFIX}submit-results`;\r\nexport const EVENT_EXECUTE_VALIDATE = `${EVENT_PREFIX}execute-validate`;\r\nexport const EVENT_CONDITION_STATE_CHANGED = `${EVENT_PREFIX}condition-state-changed`;\r\nexport const EVENT_ALL_PUBLISH_VALUE = `${EVENT_PREFIX}all-publish-value`;\r\nexport const EVENT_VALUE_CHANGED = `${EVENT_PREFIX}field-value-changed`;\r\nexport const EVENT_SITE_CHANGED = `${EVENT_PREFIX}site-changed`;\r\nexport const EVENT_FORM_STATE_CHANGED = `${EVENT_PREFIX}state-changed`;\r\nexport const EVENT_FIELD_INPUT = `${EVENT_PREFIX}field-input`;\r\nexport const EVENT_LIST_ROW_ADD = `${EVENT_PREFIX}list-row-add`;\r\nexport const EVENT_LIST_ROW_DELETE = `${EVENT_PREFIX}list-row-delete`;\r\nexport const EVENT_PROGRESSBAR_CHANGED = `${EVENT_PREFIX}progress-bar-changed`;\r\n\r\nexport const EVENT_FIELD_INITIALIZED = `${EVENT_PREFIX}field-initialized`;\r\nexport const EVENT_FIELD_REMOVED = `${EVENT_PREFIX}field-removed`;\r\n\r\nexport const EVENT_PAGE_INITIALIZED = `${EVENT_PREFIX}page-initialized`;\r\nexport const EVENT_PAGE_REMOVED = `${EVENT_PREFIX}page-removed`;\r\n\r\nexport const EVENT_VALIDATION_INITIALIZED = `${EVENT_PREFIX}validation-initialized`;\r\nexport const EVENT_VALIDATION_REMOVED = `${EVENT_PREFIX}validation-removed`;\r\n\r\nexport const EVENT_MESSAGE_INITIALIZED = `${EVENT_PREFIX}message-initialized`;\r\nexport const EVENT_MESSAGE_REMOVED = `${EVENT_PREFIX}message-removed`;\r\n\r\nexport const EVENT_ACTIVE_STATE_CHANGED = `${EVENT_PREFIX}active-state-changed`;\r\nexport const EVENT_VALID_STATE_CHANGED = `${EVENT_PREFIX}valid-state-changed`;\r\nexport const EVENT_EDITABLE_STATE_CHANGED = `${EVENT_PREFIX}editable-state-changed`;\r\n\r\n\r\nexport const SPECIALVARS = {\r\n\tCURRENTVALUE: \"$value\",\r\n\tCURRENTLISTROW: \"$item\",\r\n};\r\n\r\n//ATTRIBUTES\r\n\r\nexport const ATTRIBUTE_NAME = \"name\";\r\nexport const ATTRIBUTE_ENDPOINT = \"endpoint\";\r\nexport const ATTRIBUTE_METHOD = \"method\";\r\nexport const ATTRIBUTE_STATE = \"state\";\r\n\r\nexport const ATTRIBUTE_STEP = \"step\";\r\nexport const ATTRIBUTE_USE_SUMMARY_PAGE = \"use-summary-page\";\r\nexport const ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT = \"input-mode-after-submit\";\r\nexport const ATTRIBUTE_REQUIRED = \"required\";\r\nexport const ATTRIBUTE_REQUIRED_ON_ACTIVE_ONLY = \"required-on-active-only\";\r\nexport const ATTRIBUTE_CONDITION = \"condition\";\r\nexport const ATTRIBUTE_ACTIVE = \"active\";\r\nexport const ATTRIBUTE_DISABLED = \"disabled\";\r\nexport const ATTRIBUTE_EDITABLE = \"editable\";\r\nexport const ATTRIBUTE_EDITABLE_CONDITION = \"editable-condition\";\r\nexport const ATTRIBUTE_READONLY = \"readonly\";\r\nexport const ATTRIBUTE_NOVALUE = \"no-value\";\r\nexport const ATTRIBUTE_VALID = \"valid\";\r\nexport const ATTRIBUTE_INVALID = \"invalid\";\r\nexport const ATTRIBUTE_EVALUATE = \"evaluate\";\r\nexport const ATTRIBUTE_CONDITION_VALID = \"condition-valid\";\r\nexport const ATTRIBUTE_CONDITION_INVALID = \"condition-invalid\";\r\nexport const ATTRIBUTE_MIN = \"min\";\r\nexport const ATTRIBUTE_MAX = \"max\";\r\nexport const ATTRIBUTE_PROGRESS = \"progress\";\r\n","import { ATTRIBUTE_CONDITION } from \"../Constants\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\n\r\nclass ConditionHandle {\r\n\r\n    #base;\r\n    #condition;\r\n\r\n    constructor(base){  \r\n        this.#base = base;\r\n    }\r\n\r\n    get condition(){\r\n        if(!this.#condition)\r\n            this.#condition = this.#base.attr(ATTRIBUTE_CONDITION) || false;\r\n\r\n        return this.#condition;\r\n    }\r\n\r\n    async validate(data){\r\n        const base = this.#base;        \r\n        let condition = this.condition;\r\n        const current = base.condition;\r\n        \r\n        //console.log(`condition(${base.name})`, condition, data);        \r\n        \r\n        condition = condition ? await ExpressionResolver.resolve(condition, data, false) : true;\r\n        if(condition != current)\r\n            base.condition = condition\r\n\r\n        //console.log(`condition(${base.name}) result:`, condition);\r\n        return condition;\r\n    }\r\n};\r\n\r\nexport default ConditionHandle;","import { ATTRIBUTE_EDITABLE_CONDITION } from \"../Constants\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\n\r\nclass EditableHandle {\r\n\t#base;\r\n\t#condition = null;\r\n\r\n\tconstructor(base) {\r\n\t\tthis.#base = base;\r\n\t}\r\n\r\n\tget condition() {\r\n\t\tif (this.#condition == null)\r\n\t\t\tthis.#condition = this.#base.attr(ATTRIBUTE_EDITABLE_CONDITION) || \"\";\r\n\r\n\t\treturn this.#condition;\r\n\t}\r\n\r\n\tasync validate(data) {\r\n        let editable = true;\r\n\t\tconst current = this.#base.editable;\r\n        /*const {hasValue, required} = this.#base;\r\n        \r\n        if(!hasValue && required)\r\n            editable = true;\r\n        else*/ if(this.condition)\r\n            editable = await ExpressionResolver.resolve(this.condition, data, false);\r\n\r\n\t\tif (editable != current) this.#base.editable = editable;\r\n\r\n\t\treturn editable;\r\n\t}\r\n}\r\n\r\nexport default EditableHandle;\r\n","import { EVENT_VALIDATION_INITIALIZED, EVENT_VALIDATION_REMOVED } from \"../Constants\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\n\r\nconst validateCustomValidations = async (validations, data, base) => {\r\n\tlet valid = true;\r\n\tfor (let check of validations) {\r\n\t\tif (!(await check({ data, base }))) valid = false;\r\n\t}\r\n\treturn valid;\r\n};\r\n\r\nclass ValidationHandle {\r\n\t#base;\r\n\t#validations = new Set();\r\n\t#customs = new Set();\r\n\r\n\tconstructor(base) {\r\n\t\tthis.#base = base;\r\n\t\tbase.on(EVENT_VALIDATION_INITIALIZED, (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.#validations.add(event.target);\r\n\t\t});\r\n\r\n\t\tbase.on(EVENT_VALIDATION_REMOVED, (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.#validations.delete(event.target);\r\n\t\t});\r\n\t}\r\n\r\n\taddCustomValidation(validation) {\r\n\t\tthis.#customs.add(validation);\r\n\t}\r\n\r\n\tasync validate(data) {\r\n\t\tconst base = this.#base;\r\n\t\tconst customs = this.#customs;\r\n\t\tconst validations = this.#validations;\r\n\t\tconst currentValid = this.#base.valid;\r\n\t\tconst { hasValue, required, condition, editable } = this.#base;\r\n\r\n\t\t//console.log(`${base.nodeName}(${base.name}) validate:`, { hasValue, required, condition, editable, currentValid }, data, base.nodeName);\r\n\t\tlet valid = true;\r\n\t\tif (condition) {\r\n\t\t\tvalid = required ? hasValue : true;\r\n\r\n\t\t\tif (!(await validateCustomValidations(customs, data, base))) valid = false;\r\n\r\n\t\t\tfor (let validation of validations) {\r\n\t\t\t\tif (valid && hasValue) {\r\n\t\t\t\t\tconst test = await ExpressionResolver.resolve(validation.condition, data, true);\r\n\t\t\t\t\tvalidation.active = !test;\r\n\t\t\t\t\tif (!test) valid = false;\r\n\t\t\t\t} else validation.active = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbase.valid = valid;\r\n\r\n\t\t//console.log(`${base.nodeName}(${base.name}) validate result:`, {valid});\r\n\t\treturn valid;\r\n\t}\r\n}\r\n\r\nexport default ValidationHandle;\r\n","import {\r\n    EVENT_MESSAGE_INITIALIZED, \r\n    EVENT_MESSAGE_REMOVED\r\n} from \"../Constants\";\r\n\r\n\r\nclass MessageHandle {\r\n\r\n    #messages = new Set();\r\n\r\n    constructor(base){\r\n        base.on(EVENT_MESSAGE_INITIALIZED, (event) =>{\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            const target = event.target;\r\n            this.#messages.add(target);\r\n        });\r\n\r\n        base.on(EVENT_MESSAGE_REMOVED, (event) =>{            \r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            const target = event.target;\r\n            this.#messages.delete(target);\r\n        }); \r\n    }\r\n\r\n    async validate(data) {\r\n        for(let message of this.#messages)\r\n            message.update(data);\r\n    }\r\n\r\n};\r\nexport default MessageHandle;","export const noValue = (value) => {\n\treturn value == null || typeof value === \"undefined\";\n};\n\nexport const emtpyOrNoValueString = (value) => {\t\n\treturn noValue(value) || value.trim().length == 0;\n};\n\n\nexport default {\n\tnoValue,\n\temtpyOrNoValueString\n};","import { SPECIALVARS, NODENAME_LIST_ROW } from \"../Constants\";\r\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\nimport { _value } from \"../BaseField\";\r\n\r\nexport const updateData = async (data, name, value) => {\r\n\tif (!noValue(value)) {\r\n\t\tif (name) valueHelper(data, name, value);\r\n\t\telse Object.assign(data, value);\r\n\t}\r\n\treturn data;\r\n};\r\n\r\nexport const fieldValueMapToObject = async (map, fieldOrder) => {\t\r\n\t//console.log(\"fieldValueMapToObject: \", map, fieldOrder);\r\n\tlet data = {};\r\n\tif (fieldOrder) {\r\n\t\tfor (let field of fieldOrder) {\r\n\t\t\tconst name = field.name;\r\n\t\t\tconst value = map.get(field);\r\n\t\t\tdata = await updateData(data, name, value);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (let [{ name }, value] of map) {\r\n\t\t\tdata = await updateData(data, name, value);\r\n\t\t}\r\n\t}\r\n\r\n\treturn data;\r\n};\r\n\r\nexport const rebuildDataByFields = async (fields) => {\r\n\tlet data = {};\r\n\tfor (let field of fields) {\r\n\t\tconst value = await field.value();\r\n\t\tif (!noValue(value)) {\r\n\t\t\tconst name = field.name;\r\n\t\t\tdata = await updateData(data, name, value);\r\n\t\t}\r\n\t}\r\n\treturn data;\r\n};\r\n\r\nexport const evaluationData = async (base) => {\r\n\tawait base.ready;\r\n\tconst data = {};\r\n\tdata[SPECIALVARS.CURRENTVALUE] = _value(base);\r\n\r\n\tlet row = base.parent(NODENAME_LIST_ROW);\r\n\tlet temp = data;\r\n\twhile (row) {\r\n\t\ttemp[SPECIALVARS.CURRENTLISTROW] = await _value(row);\r\n\t\ttemp = temp[SPECIALVARS.CURRENTLISTROW];\r\n\t\trow = row.parent(NODENAME_LIST_ROW);\r\n\t}\r\n\r\n\treturn data;\r\n};\r\n\r\nconst NAME_SPLITTER = /\\./g;\r\nexport const valueHelper = function (data, name, value) {\r\n\tconst names = name.split(NAME_SPLITTER);\r\n\tif (arguments.length == 2) return getValue(data, names);\r\n\r\n\tconst del = noValue(value);\r\n\tif (noValue(data) && del) return data;\r\n\r\n\treturn setValue(del, data, value, names);\r\n};\r\n\r\nconst setValue = (remove, data, value, names) => {\r\n\tif (noValue(data) && remove) return null;\r\n\r\n\tconst name = names.shift();\r\n\tif (names.length == 0) {\r\n\t\tif (remove) delete data[name];\r\n\t\telse data[name] = value;\r\n\t} else {\r\n\t\tif (noValue(data[name])) data[name] = {};\r\n\t\tsetValue(remove, data[name], value, names);\r\n\t}\r\n\r\n\treturn data;\r\n};\r\n\r\nconst getValue = (data, names) => {\r\n\tif (noValue(data)) return null;\r\n\tif (names.length == 0) return data;\r\n\r\n\tconst name = names.shift();\r\n\treturn getValue(data[name], names);\r\n};\r\n","import { \r\n\tEVENT_VALID_STATE_CHANGED,\r\n\tEVENT_CONDITION_STATE_CHANGED,\r\n\tEVENT_ACTIVE_STATE_CHANGED,\r\n\tEVENT_EDITABLE_STATE_CHANGED,\r\n\tATTRIBUTE_ACTIVE, \r\n\tATTRIBUTE_VALID, \r\n\tATTRIBUTE_INVALID, \r\n\tATTRIBUTE_CONDITION_VALID, \r\n\tATTRIBUTE_CONDITION_INVALID, \r\n\tATTRIBUTE_EDITABLE, ATTRIBUTE_READONLY \r\n} from \"../Constants\";\r\n\r\nexport const updateValidState = (target, valid) => {\r\n\tif (typeof valid === \"undefined\" || valid == null) {\r\n\t\ttarget.attr(ATTRIBUTE_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_VALID, null);\r\n\t} else if (valid) {\r\n\t\ttarget.attr(ATTRIBUTE_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_VALID, \"\");\r\n\t} else {\r\n\t\ttarget.attr(ATTRIBUTE_INVALID, \"\");\r\n\t\ttarget.attr(ATTRIBUTE_VALID, null);\r\n\t}\r\n\r\n\ttarget.trigger(EVENT_VALID_STATE_CHANGED);\r\n};\r\n\r\nexport const updateConditionState = (target, valid) => {\r\n\tif (typeof valid === \"undefined\" || valid == null) {\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_VALID, null);\r\n\t} else if (valid) {\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_VALID, \"\");\r\n\t} else {\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_VALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_INVALID, \"\");\r\n\t}\r\n\r\n\ttarget.trigger(EVENT_CONDITION_STATE_CHANGED);\r\n};\r\n\r\nexport const updateActiveState = (target, active, initial = false) => {\r\n\tconst oldState = target.active;\r\n\tactive ? target.attr(ATTRIBUTE_ACTIVE, \"\") : target.attr(ATTRIBUTE_ACTIVE, null);\r\n\tif (oldState != active || initial) target.trigger(EVENT_ACTIVE_STATE_CHANGED);\r\n};\r\n\r\nexport const updateReadonlyState = (target, readonly, initial = false) => {\r\n\tconst oldState = target.readonly;\r\n\tif (readonly) \r\n\t\ttarget.attr(ATTRIBUTE_READONLY, \"\");\r\n\telse\r\n\t\ttarget.attr(ATTRIBUTE_READONLY, null);\r\n\t\r\n\tif (oldState != readonly || initial) target.trigger(EVENT_EDITABLE_STATE_CHANGED);\r\n};\r\n\r\nexport const updateEditableState = (target, editable, initial = false) => {\r\n\tconst oldState = target.editable;\r\n\tif (editable) \r\n\t\ttarget.attr(ATTRIBUTE_EDITABLE, \"\");\r\n\telse\r\n\t\ttarget.attr(ATTRIBUTE_EDITABLE, null);\r\n\r\n\tif (oldState != editable || initial) target.trigger(EVENT_EDITABLE_STATE_CHANGED);\r\n};","import { NODENAME_FORM, \r\n\tATTRIBUTE_ACTIVE, \r\n\tATTRIBUTE_READONLY, \r\n\tATTRIBUTE_EVALUATE,\r\n\tATTRIBUTE_CONDITION, \r\n\tATTRIBUTE_CONDITION_VALID, \r\n\tATTRIBUTE_CONDITION_INVALID, \r\n\tATTRIBUTE_VALID, \r\n\tATTRIBUTE_EDITABLE_CONDITION, \r\n\tATTRIBUTE_EDITABLE\r\n} from \"./Constants\";\r\nimport Component from \"@default-js/defaultjs-html-components/src/Component\";\r\nimport ConditionHandle from \"./handels/ConditionHandle\";\r\nimport EditableHandle from \"./handels/EditableHandle\";\r\nimport ValidationHandle from \"./handels/ValidationHandle\";\r\nimport MessageHandle from \"./handels/MessageHandle\";\r\nimport { evaluationData } from \"./utils/DataHelper\";\r\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport { updateActiveState, updateConditionState, updateEditableState, updateReadonlyState, updateValidState } from \"./utils/StateHelper\";\r\n\r\n\r\n\r\n\r\nconst _form = privatePropertyAccessor(\"form\");\r\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_READONLY, ATTRIBUTE_CONDITION, ATTRIBUTE_CONDITION_VALID, ATTRIBUTE_CONDITION_INVALID, ATTRIBUTE_EDITABLE_CONDITION];\r\n\r\nclass Base extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\t\r\n\t#conditionHandle;\r\n\t#editableHandle;\r\n\t#validationHandle;\r\n\t#messageHandle;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.#messageHandle = new MessageHandle(this);\r\n\t\tthis.#conditionHandle = new ConditionHandle(this);\r\n\t\tthis.#editableHandle = new EditableHandle(this);\r\n\t\tthis.#validationHandle = new ValidationHandle(this);\r\n\t}\r\n\r\n\taddValidation(validation) {\r\n\t\tthis.#validationHandle.addCustomValidation(validation);\r\n\t}\r\n\r\n\tasync validate(data) {\t\t\r\n\t\t//console.log(`${this.nodeName}(${this.name}).validate:`, data)\r\n\t\tthis.attr(ATTRIBUTE_EVALUATE, \"\");\r\n\t\tconst context = Object.assign({}, data, await evaluationData(this));\r\n\t\tawait this.#conditionHandle.validate(context);\r\n\t\tawait this.#editableHandle.validate(context);\r\n\t\tawait this.#validationHandle.validate(context);\r\n\t\tthis.attr(ATTRIBUTE_EVALUATE, null);\r\n\r\n\t\tawait this.#messageHandle.validate(context);\r\n\r\n\t\treturn this.valid;\r\n\t}\r\n\r\n\tget form() {\r\n\t\tlet form = _form(this);\r\n\t\tif (!form) {\r\n\t\t\tform = this.parent(NODENAME_FORM);\r\n\t\t\t_form(this, form);\r\n\t\t}\r\n\t\treturn form;\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\r\n\t}\r\n\r\n\tset active(active) {\r\n\t\tconst current = this.active;\r\n\t\tif (current != active) {\r\n\t\t\tupdateActiveState(this, active);\r\n\t\t\tthis.activeUpdated();\r\n\t\t}\r\n\t}\r\n\r\n\tasync activeUpdated() {}\r\n\r\n\tget readonly() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_READONLY);\r\n\t}\r\n\r\n\tset readonly(readonly) {\r\n\t\tif(!this.editable)\r\n\t\t\tupdateReadonlyState(this, true, !this.ready.resolved);\r\n\t\telse\r\n\t\t\tupdateReadonlyState(this, readonly, !this.ready.resolved);\r\n\t\tthis.readonlyUpdated();\r\n\t}\r\n\r\n\tasync readonlyUpdated() {}\r\n\r\n\tget editable() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_EDITABLE);\r\n\t}\r\n\r\n\tset editable(editable) {\r\n\t\tupdateEditableState(this, editable, !this.ready.resolved);\r\n\t\tthis.editableUpdated();\t\t\r\n\t\tthis.readonly = !editable;\r\n\t}\r\n\r\n\tasync editableUpdated() {\r\n\t}\r\n\r\n\tset condition(condition){\r\n\t\tupdateConditionState(this, condition);\r\n\t\tthis.conditionUpdated();\r\n\t}\r\n\r\n\tget condition() {\r\n\t\treturn !this.hasAttribute(ATTRIBUTE_CONDITION_INVALID);\r\n\t}\r\n\r\n\tasync conditionUpdated() {}\r\n\r\n\tset valid(valid){\r\n\t\tupdateValidState(this, valid);\r\n\t\tthis.validUpdated();\r\n\t}\r\n\r\n\tget valid() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_VALID);\r\n\t}\r\n\r\n\tasync validUpdated(){}\r\n}\r\n\r\nexport default Base;\r\n","import { EVENT_FIELD_INITIALIZED, EVENT_FIELD_REMOVED, EVENT_CONDITION_STATE_CHANGED, ATTRIBUTE_NAME, ATTRIBUTE_REQUIRED, ATTRIBUTE_NOVALUE } from \"./Constants\";\r\nimport Base from \"./Base\";\r\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport { dataIsNoValue } from \"./utils/ValueHelper\";\r\n\r\nconst _parent = privatePropertyAccessor(\"parent\");\r\nexport const _value = privatePropertyAccessor(\"value\");\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_NAME, ATTRIBUTE_REQUIRED, ATTRIBUTE_NOVALUE];\r\n\r\nexport const findParentField = (field) => {\r\n\tlet parent = field.parentNode;\r\n\twhile (parent) {\r\n\t\tif (parent instanceof BaseField) return parent;\r\n\r\n\t\tparent = parent.parentNode;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nconst updateHasValue = (hasValue, field) => {\r\n\tfield.attr(ATTRIBUTE_NOVALUE, !hasValue ? \"\" : null);\r\n};\r\n\r\nclass BaseField extends Base {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(Base.observedAttributes);\r\n\t}\r\n\r\n\tconstructor(options = {}) {\r\n\t\tsuper(options);\r\n\t\tconst {value} = options;\r\n\t\t_value(this, value || null);\t\t\r\n\t}\r\n\r\n\tasync init(){\r\n\t\tthis.ready.then(() => this.trigger(EVENT_FIELD_INITIALIZED));\r\n\t\tawait super.init();\r\n\t}\r\n\r\n\tasync destroy() {\t\t\r\n\t\tthis.publishValue(null);\r\n\t\tawait super.destroy();\r\n\t\tthis.trigger(EVENT_FIELD_REMOVED);\r\n\t}\r\n\r\n\tget parentField() {\r\n\t\tlet parent = _parent(this);\r\n\t\tif (!parent) {\r\n\t\t\tparent = findParentField(this);\r\n\t\t\t_parent(this, parent);\r\n\t\t}\r\n\t\treturn parent;\r\n\t}\r\n\r\n\tasync conditionUpdated() {\r\n\t\tthis.active = this.condition;\r\n\t\treturn this.publishValue();\r\n\t}\r\n\r\n\tget name() {\r\n\t\treturn this.getAttribute(ATTRIBUTE_NAME);\r\n\t}\r\n\r\n\tget required() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_REQUIRED);\r\n\t}\r\n\r\n\tget hasValue() {\r\n\t\treturn !this.hasAttribute(ATTRIBUTE_NOVALUE);\r\n\t}\r\n\r\n\tasync value(value) {\r\n\t\tconst {condition, valid, ready} = this;\r\n\t\t//console.log(`${this.nodeName}(${this.name}).value: `, arguments, {condition, valid});\r\n\r\n\t\tif (arguments.length == 0)\r\n\t\t\treturn  !condition || !valid ? null : _value(this);\t\t\r\n\t\t\r\n\t\tawait ready;\r\n\t\tconst currentValue = _value(this);\r\n\r\n\t\tif (await this.acceptValue(value)) {\r\n\t\t\tvalue = await this.normalizeValue(value) || value;\r\n\t\t\tif (currentValue != value) {\t\t\t\t\r\n\t\t\t\tconst result = await this.updatedValue(value);\t\t\t\t\r\n\t\t\t\tif(typeof result !== \"undefined\")\r\n\t\t\t\t\tvalue = result;\r\n\t\t\t\tawait this.publishValue(value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tasync validate(data){\r\n\t\tconst currentCondition = this.condition;\r\n\t\tconst currentValid = this.valid;\r\n\t\tconst valid = await super.validate(data);\r\n\t\tconst condition = this.condition;\r\n\t\tthis.validationStateChanged(currentCondition != condition,  currentValid != valid);\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tasync validationStateChanged(conditionChange, validationChanged){\r\n\t\tconst hasChange = conditionChange || validationChanged;\r\n\t\tif(hasChange)\r\n\t\t\tthis.publishValue();\r\n\t}\r\n\r\n\tasync updatedValue(value) { \r\n\t\treturn value;\r\n\t}\r\n\r\n\tasync publishValue(value) {\r\n\t\t//console.log(`call ${this.nodeName}(${this.name}).publishValue:`, {arguments: arguments.length, value});\r\n\t\tawait this.ready;\r\n\t\tif(arguments.length == 0)\r\n\t\t\tvalue = _value(this);\r\n\r\n\t\t//console.log(\"work with Value:\", value)\t\t\r\n\t\tconst noValue = dataIsNoValue(value);\t\t\t\t\r\n\t\tconst condition = this.condition;\r\n\t\tconst required = this.required;\r\n\t\tvalue = required && noValue ? null : value;\t\t\r\n\t\t\r\n\t\tif(!condition)\r\n\t\t\tvalue = null;\r\n\t\telse\r\n\t\t\t_value(this, value);\r\n\r\n\t\t//console.log(`${this.nodeName}(${this.name}).publishValue:`, {required, condition, noValue, value});\r\n\r\n\t\tupdateHasValue(!noValue, this);\r\n\r\n\t\tif (this.parentField) await this.parentField.childValueChanged(this, value);\r\n\t\telse if(this.form) await this.form.childValueChanged(this, value);\r\n\t}\r\n\r\n\tasync acceptValue(value) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync normalizeValue(value) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tasync childValueChanged(field, value) {}\r\n}\r\nexport default BaseField;\r\n","import { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\n\r\nexport const dataIsNoValue = (value) => {    \r\n    if(noValue(value) )\r\n        return true;\r\n\r\n    const type = typeof value;\r\n    if(type === \"string\" && value.trim().length == 0)\r\n        return true;\r\n    if(value instanceof Date)\r\n        return false;\r\n    if(value instanceof Array &&  value.length == 0)\r\n        return true;\r\n    if(value instanceof Set &&  value.length == 0)\r\n        return true;\r\n    if(value instanceof Map &&  value.length == 0)\r\n        return true;\r\n    if(type == \"object\" && Object.getOwnPropertyNames(value).length == 0)\r\n        return true;\r\n    \r\n    return false;\r\n}","import {EVENTHANDLE_TIMEOUT} from \"../Constants\"\n\nexport const toEvents = function() {\n    return Array.from(arguments).join(\" \");\n};\n\nexport const makeEventCopy = (event) => {\n    return {\n        type: event.type,\n        target: event.target,\n        detail: event.detail,\n        currentTarget: event.currentTarget,\n        explicitOriginalTarget: event.explicitOriginalTarget,\n        originalTarget : event.originalTarget,\n        srcElement: event.srcElement,\n        timeStamp: event.timeStamp\n    };\n}\n\nexport const toTimeoutHandle = (handle, preventDefault, stopPropagation, timeout) => {\n    let id = null;\n\n    const prevent = typeof preventDefault === \"function\" ? preventDefault : () => preventDefault;\n    const stop = typeof stopPropagation === \"function\" ? stopPropagation : () => stopPropagation;\n\n    return (event) => {\n        if(prevent(event))\n            event.preventDefault();\n        if(stop(event))\n            event.stopPropagation();\n\n        const eventCopy = makeEventCopy(event);\n\n        if(id)\n            clearTimeout(id);\n                    \n        id = setTimeout(() => {\n            id = null;\n            handle(eventCopy);\n        }, timeout || EVENTHANDLE_TIMEOUT);\n\n    }\n};","import Field from \"../Field\";\r\n\r\nexport default class Wrapper {\r\n\t\r\n\tstatic findInput(field){ return null;}\r\n\t\r\n\t#defaultValue;\r\n\t\r\n\tconstructor(field, input) {\r\n\t\tthis.field = field;\r\n\t\tthis.input = input;\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tinit() { }\r\n\r\n\tset readonly(disabled) { }\r\n\r\n\tasync acceptValue(value) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync normalizeValue(value) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tasync updatedValue() {\r\n\t}\r\n\t\r\n\tget value(){\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tget valid(){\r\n\t\treturn true;\r\n\t}\r\n}\r\n","import { EVENT_FIELD_INPUT, EVENTHANDLE_INPUT_TIMEOUT } from \"../Constants\";\r\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst INPUTSELECTOR = 'input:not([type=\"file\"],[type=\"radio\"],[type=\"checkbox\"],[type=\"button\"],[type=\"submit\"],[type=\"reset\"]),input:not([type]), textarea';\r\n\r\nconst DEFAULTTYPE = \"text\";\r\n\r\nconst text = (input) => {\r\n\treturn {\r\n\t\taccept: (value) => {\r\n\t\t\treturn typeof value === \"string\";\r\n\t\t},\r\n\t\tgetValue: () => {\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\tsetValue: (value) => {\r\n\t\t\treturn (input.value = value);\r\n\t\t},\r\n\t\tnormalize: (value) => {\r\n\t\t\tif (value) {\r\n\t\t\t\tvalue = value.trim();\r\n\t\t\t\treturn value.length > 0 ? value : null;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\t};\r\n};\r\nconst number = (input) => {\r\n\treturn {\r\n\t\taccept: (value) => {\r\n\t\t\treturn typeof value === \"number\";\r\n\t\t},\r\n\t\tgetValue: () => {\r\n\t\t\treturn input.valueAsNumber;\r\n\t\t},\r\n\t\tsetValue: (value) => {\r\n\t\t\tinput.valueAsNumber = value;\r\n\t\t},\r\n\t\tnormalize: (value) => {\r\n\t\t\tif (!noValue(value) && !Number.isNaN(value)) return value;\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nconst datetime = (input) => {\r\n\treturn {\r\n\t\taccept: (value) => {\r\n\t\t\treturn typeof value === \"string\";\r\n\t\t},\r\n\t\tgetValue: () => {\r\n\t\t\treturn input.value;\r\n\t\t},\r\n\t\tsetValue: (value) => {\r\n\t\t\tinput.value = value;\r\n\t\t},\r\n\t\tnormalize: (value) => {\r\n\t\t\tif (value) return value;\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nconst date = (input) => {\r\n\treturn {\r\n\t\taccept: (value) => {\r\n\t\t\treturn value instanceof Date;\r\n\t\t},\r\n\t\tgetValue: () => {\r\n\t\t\treturn input.valueAsDate;\r\n\t\t},\r\n\t\tsetValue: (value) => {\r\n\t\t\tinput.valueAsDate = value;\r\n\t\t},\r\n\t\tnormalize: (value) => {\r\n\t\t\tif (value) return value;\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\t};\r\n};\r\n\r\nconst TIMEFORMAT = new Intl.DateTimeFormat(\"default\",  {\r\n  hour: \"numeric\",\r\n  minute: \"numeric\"\r\n});\r\n\r\n\r\nconst time = (input) => {\r\n\treturn {\r\n\t\taccept: (value) => {\r\n\t\t\treturn value instanceof Date;\r\n\t\t},\r\n\t\tgetValue: () => {\r\n\t\t\treturn input.value ? new Date(`1970-01-01T${input.value}`) : null;\r\n\t\t},\r\n\t\tsetValue: (value) => {\r\n\t\t\tinput.value = TIMEFORMAT.format(value);\r\n\t\t},\r\n\t\tnormalize: (value) => {\r\n\t\t\tif (value) return value;\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\t};\r\n};\r\nconst TYPES = { text, number, datetime,  \"datetime-locale\": datetime, date, time, range: number };\r\n\r\nexport default class Text extends Wrapper {\r\n\tstatic findInput(field) {\r\n\t\treturn field.find(INPUTSELECTOR).first();\r\n\t}\r\n\r\n\tconstructor(field, input) {\r\n\t\tsuper(field, input);\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst { field, input } = this;\r\n\t\tconst type = (field.attr(\"input-type\") || input.attr(\"type\") || DEFAULTTYPE).trim().toLowerCase();\r\n\t\tthis.type = (TYPES[type] || TYPES[DEFAULTTYPE])(input);\r\n\t\tinput.on(\r\n\t\t\t\"input\",\r\n\t\t\ttoTimeoutHandle(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\r\n\t\t\t\t},\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue,\r\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT,\r\n\t\t\t),\r\n\t\t);\r\n\r\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\r\n\t}\r\n\r\n\tacceptValue(value) {\r\n\t\tif (value == null || typeof value === \"undefined\") return true;\r\n\r\n\t\treturn this.type.accept(value);\r\n\t}\r\n\r\n\tnormalizeValue(value) {\r\n\t\tif (value == null && typeof value === \"undefined\") return null;\r\n\r\n\t\treturn this.type.normalize(value);\r\n\t}\r\n\r\n\tasync updatedValue(value) {\r\n\t\tconst currentValue = this.type.getValue();\r\n\t\tif (value != currentValue) this.type.setValue(value);\r\n\t}\r\n\r\n\tset readonly(readonly) {\r\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\r\n\t}\r\n\r\n\tget value() {\r\n\t\treturn this.type.getValue();\r\n\t}\r\n\r\n\tget valid() {\r\n\t\treturn this.input.checkValidity();\r\n\t}\r\n}\r\n","import { \n\tEVENT_FIELD_INPUT\n} from \"../Constants\";\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\nimport Wrapper from \"./Wrapper\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\n\nconst _value = privatePropertyAccessor(\"value\");\n\nconst INPUTSELECTOR = 'input[type=\"file\"]';\n\nconst readFile = (file, readFnName) => {\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", () => {\n\t\t\tresolve({\n\t\t\t\tname: file.name,\n\t\t\t\ttype: file.type,\n\t\t\t\tsize: file.size,\n\t\t\t\tdata: reader.result\n\t\t\t});\n\t\t}, false);\n\t\treader[readFnName](file);\n\t});\n};\n\n//readAsDataURL\n\nconst FORMAT = {\n\t\"form-input\": async (file) => {\n\t\tfile.format = \"form-input\";\n\t\treturn file;\n\t},\n\t\"data-url-base64\": async (file) => {\n\t\tconst result = await readFile(file, \"readAsDataURL\");\n\t\tresult.format = \"data-url-base64\";\n\t\treturn result;\n\t},\n\t\"base64\": async (file) => {\n\t\tconst result = await readFile(file, \"readAsDataURL\");\n\t\tresult.data = result.data.substr(result.data.indexOf(\",\") + 1);\n\t\tresult.format = \"base64\";\n\t\treturn result;\n\t}\n};\n\nconst readFiles = async (files, format, multiple) => {\n\tlet result = [];\n\tfor (let file of files)\n\t\tresult.push(await FORMAT[format](file));\n\n\tif (result.length == 0)\n\t\treturn null;\n\n\n\treturn multiple ? result : result[0];\n};\n\n\n\nexport default class File extends Wrapper {\n\tstatic findInput(field) {\n\t\treturn field.find(INPUTSELECTOR).first();\n\t}\n\n\tconstructor(field, input) {\n\t\tsuper(field, input);\n\t}\n\n\tasync init() {\n\t\tconst { field, input } = this;\n\t\tthis.multiple = input.multiple;\n\t\tthis.format = field.attr(\"file-format\") || \"form-input\";\n\t\tthis.filenameTarget = field.attr(\"file-name-target\");\n\t\tthis.filenameTarget = this.filenameTarget ? field.find(this.filenameTarget).first() : null;\n\t\tconst { format, multiple } = this;\n\n\t\tinput.on(\n\t\t\t\"input\",\n\t\t\ttoTimeoutHandle(\n\t\t\t\tasync () => {\n\t\t\t\t\tthis.updatedValue(await readFiles(input.files, format, multiple));\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.value);\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\ttrue\n\t\t\t)\n\t\t);\n\n\t\tif (input.files && input.files.length != 0)\n\t\t\tthis.updatedValue(await readFiles(input.files, format, multiple));\n\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.value);\n\t};\n\n\tset readonly(readonly) {\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\n\t}\n\n\tacceptValue(value) {\n\t\tif (value == null || typeof value === \"undefined\")\n\t\t\treturn true;\n\t\telse if (this.multiple)\n\t\t\treturn value instanceof Array;\n\t\telse\n\t\t\treturn typeof value  === \"object\";\n\t}\n\n\tnormalizeValue(value) {\n\t\tif (value == null || typeof value === \"undefined\")\n\t\t\treturn null;\n\t\telse if (this.multiple)\n\t\t\treturn value.length != 0 ? value : null;\n\t\telse\n\t\t\treturn value;\n\t}\n\n\tupdatedValue(value) {\n\t\tconst currentValue = _value(this);\n\t\tif (value != currentValue) {\n\t\t\t_value(this, value)\n\t\t\tif(!value)\t\t\t\n\t\t\t\tthis.input.value = null;\n\n\t\t\tconst filename = this.filenameTarget;\n\t\t\tif (filename) {\n\t\t\t\tfilename.empty();\n\t\t\t\tif(value){\n\t\t\t\t\tif (this.multiple) {\n\t\t\t\t\t\tfor (let file of value) {\n\t\t\t\t\t\t\tfilename.append(`<span>${file.name}</span>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tfilename.append(`<span>${value.name}</span>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\tget value() {\n\t\treturn _value(this);\n\t}\n\n\tget valid() {\n\t\treturn this.input.checkValidity();\n\t}\n}\n","import Text from \"./Text\";\nimport Checkbox from \"./Checkbox\";\nimport Radio from \"./Radio\";\nimport File from \"./File\";\nimport Select from \"./Select\";\n\nexport const wrappers = [Text, Checkbox, Radio, File, Select];\n\nexport const findWrapper = (field) => {\n\tfor (let wrapper of wrappers) {\n\t\tconst input = wrapper.findInput(field);\n\t\tif (input) return new wrapper(field, input);\n\t}\n\n\treturn null;\n};\n","import { \r\n\tEVENT_FIELD_INPUT,\r\n\tEVENTHANDLE_INPUT_TIMEOUT \r\n} from \"../Constants\";\r\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst INPUTSELECTOR = 'input[type=\"checkbox\"]';\r\n\r\n\r\nexport default class Checkbox extends Wrapper {\r\n\tstatic findInput(field) {\r\n\t\tconst input = field.find(INPUTSELECTOR);\r\n\t\tif (input.length == 0)\r\n\t\t\treturn null;\r\n\t\t\t\r\n\t\treturn input.length == 1 ? input.first() : input;\r\n\t}\r\n\r\n\tconstructor(field, input) {\r\n\t\tsuper(field, input);\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst { field, input } = this;\r\n\t\tthis.multiple = input instanceof NodeList;\r\n\t\tinput.on(\r\n\t\t\t\"input\",\r\n\t\t\ttoTimeoutHandle(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\r\n\t\t\t\t},\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue,\r\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\r\n\t}\r\n\r\n\tset readonly(readonly) {\r\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\r\n\t}\r\n\r\n\tget value() {\r\n\t\tconst value = this.input.val();\r\n\t\tif (!(value instanceof Map)) return value;\r\n\t\tif (value.size == 0) return null;\r\n\r\n\t\tconst values = [];\r\n\t\tvalue.forEach((value) => {\r\n\t\t\tvalues.push(value);\r\n\t\t});\r\n\r\n\t\treturn values;\r\n\t}\r\n\r\n\tnormalizeValue(value) {\r\n\t\tif (value) {\r\n\t\t\tif (this.multiple) {\r\n\t\t\t\tvalue = value.filter((item) => !!item);\r\n\t\t\t\treturn value.length != 0 ? value : null;\r\n\t\t\t} else {\r\n\t\t\t\treturn value;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tacceptValue(value) {\r\n\t\tif (value == null || typeof value === \"undefined\")\r\n\t\t\treturn true;\r\n\t\telse if (this.multiple)\r\n\t\t\treturn value instanceof Array;\r\n\t\telse{\r\n\t\t\tconst type = typeof value;\r\n\t\t\treturn type === \"string\" || type === \"boolean\";\r\n\t\t}\r\n\t}\r\n\r\n\tupdatedValue(value) {\r\n\t\tthis.input.val(value ? value : null);\r\n\t}\r\n}\r\n","import { \r\n\tEVENT_FIELD_INPUT,\r\n\tEVENTHANDLE_INPUT_TIMEOUT \r\n} from \"../Constants\";\r\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst INPUTSELECTOR = 'input[type=\"radio\"]';\r\n\r\nconst getRandomInt = () => {\r\n\treturn Math.floor(Math.random() * Date.now());\r\n};\r\n\r\nexport default class Radio extends Wrapper {\r\n\tstatic findInput(field) {\r\n\t\tconst input = field.find(INPUTSELECTOR);\r\n\t\tif (input.length == 0)\r\n\t\t\treturn null;\r\n\r\n\t\treturn input;\r\n\t}\r\n\r\n\tconstructor(field, input) {\r\n\t\tsuper(field, input);\r\n\t}\r\n\r\n\tinit() {\r\n\t\tconst { field, input } = this;\r\n\t\tconst name = field.name + getRandomInt();\r\n\t\tfor (let radio of input) radio.name = name;\r\n\t\tinput.on(\r\n\t\t\t\"input\",\r\n\t\t\ttoTimeoutHandle(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\r\n\t\t\t\t},\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue,\r\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\r\n\t}\r\n\r\n\r\n\tset readonly(readonly) {\r\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\r\n\t}\r\n\r\n\tget value() {\r\n\t\tconst value = this.input.val();\r\n\t\tif (!(value instanceof Map)) return value;\r\n\t\tif (value.size == 0) return null;\r\n\t\treturn value.values().next().value;\r\n\t}\r\n\r\n\tnormalizeValue(value) {\r\n\t\tif (value)\r\n\t\t\treturn value;\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tacceptValue(value) {\r\n\t\tif (value == null || typeof value === \"undefined\")\r\n\t\t\treturn true;\r\n\t\telse{\r\n\t\t\tconst type = typeof value;\r\n\t\t\treturn type === \"string\" || type === \"boolean\";\r\n\t\t}\r\n\t}\r\n\r\n\tupdatedValue(value) {\r\n\t\tthis.input.val(value ? value : null);\r\n\t}\r\n}\r\n","import { \r\n\tEVENT_FIELD_INPUT,\r\n\tEVENTHANDLE_INPUT_TIMEOUT \r\n} from \"../Constants\";\r\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\r\nimport Wrapper from \"./Wrapper\";\r\n\r\nconst INPUTSELECTOR = 'select';\r\n\r\nexport default class Text extends Wrapper {\r\n\tstatic findInput(field) {\r\n\t\treturn field.find(INPUTSELECTOR).first();\r\n\t}\r\n\r\n\tconstructor(field, input) {\r\n\t\tsuper(field, input);\t\t\r\n\t}\r\n\r\n\t\r\n\r\n\tinit() {\r\n\t\tconst { field, input } = this;\r\n\t\tinput.on(\r\n\t\t\t\"input, changed\",\r\n\t\t\ttoTimeoutHandle(\r\n\t\t\t\t() => {\r\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.value);\r\n\t\t\t\t},\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue,\r\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT\r\n\t\t\t)\r\n\t\t);\r\n\r\n\t\t//field.trigger(EVENT_FIELD_INPUT, this.value);\r\n\t}\r\n\r\n\tset readonly(readonly) {\r\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\r\n\t}\r\n\r\n\tget value() {\r\n\t\treturn this.normalizeValue(this.input.multiple ? this.input.val() : this.input.value);\r\n\t}\r\n\t\r\n\tnormalizeValue(value) {\r\n\t\tif (value) {\r\n\t\t\tif(this.input.multiple){\r\n\t\t\t\tvalue = value.filter((item) => item && item.trim().length > 0);\r\n\t\t\t\treturn value.length != 0 ? value : null;\r\n\t\t\t} else{\r\n\t\t\t\tvalue = value.trim();\r\n\t\t\t\treturn value.length != 0 ? value : null;\t\r\n\t\t\t}\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t}\r\n\r\n\tacceptValue(value) {\r\n\t\tif (value == null || typeof value === \"undefined\")\r\n\t\t\treturn true;\r\n\t\telse if (this.input.multiple)\r\n\t\t\treturn value instanceof Array;\r\n\t\telse\r\n\t\t\treturn typeof value === \"string\";\r\n\t}\r\n\r\n\tupdatedValue(value) {\r\n\t\tconst currentValue =  this.input.val();\r\n\t\tif (this.field.value != this.value)\r\n\t\t\tthis.input.val(value ? value : currentValue);\r\n\t}\r\n}\r\n","import { \r\n\tNODENAME_FIELD, \r\n\tEVENT_FIELD_INPUT \r\n} from \"./Constants\";\r\nimport BaseField, {_value} from \"./BaseField\";\r\nimport { findWrapper } from \"./wrapper\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\nimport { emtpyOrNoValueString, noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\n\r\nconst ATTRIBUTES = [\"file-format\"];\r\n\r\nclass Field extends BaseField {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(BaseField.observedAttributes);\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_FIELD;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#wrapper;\r\n\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.on(EVENT_FIELD_INPUT, (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.publishValue(event.detail || null);\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.#initialized = true;\r\n\t\t\tthis.#wrapper = findWrapper(this);\r\n\t\t\tif (this.#wrapper){\r\n\t\t\t\tthis.addValidation(async () => this.#wrapper.valid);\r\n\t\t\t\tthis.publishValue(this.#wrapper.value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treadonlyUpdated() {\r\n\t\tif (this.#wrapper) this.#wrapper.readonly = this.readonly;\r\n\t}\r\n\r\n\tasync acceptValue(value) {\r\n\t\treturn this.#wrapper ? this.#wrapper.acceptValue(value) : false;\r\n\t}\r\n\r\n\tasync normalizeValue(value) {\r\n\t\tif (this.#wrapper) return this.#wrapper.normalizeValue(value);\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\tasync updatedValue(value) {\r\n\t\tawait this.ready;\r\n\t\tvalue = await value;\r\n\t\tconst wrapper = this.#wrapper;\r\n\t\tif (wrapper){\r\n\t\t\tconst current = wrapper.value || null;\r\n\t\t\tif(current != value)\r\n\t\t\t\tawait wrapper.updatedValue(value);\r\n\t\t}\r\n\t\tawait super.updatedValue(value);\r\n\t}\r\n\r\n\tasync validationStateChanged(conditionChange, validationChanged){\t\t\r\n\t\tif(conditionChange && this.condition){\t\t\t\r\n\t\t\tconst wrapper = this.#wrapper;\r\n\t\t\tconst value = wrapper.value || null;\r\n\t\t\t//console.log(`validationStateChanged(${this.name} (${conditionChange}, ${validationChanged}) -> ${value}`)\r\n\t\t\t_value(this, value);\r\n\t\t}\r\n\t\t\r\n\t\treturn super.validationStateChanged(conditionChange, validationChanged);\r\n\t}\r\n}\r\n\r\ndefine(Field);\r\nexport default Field;\r\n","import { \r\n\tNODENAME_VALIDATION,\r\n\tEVENT_VALIDATION_INITIALIZED,\r\n\tEVENT_VALIDATION_REMOVED,\r\n\tATTRIBUTE_ACTIVE,\r\n\tATTRIBUTE_CONDITION\r\n} from \"./Constants\";\r\nimport {Component, define} from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_CONDITION];\r\n\r\n\r\nclass Validation extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_VALIDATION;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tthis.active = false;\r\n\t\tthis.ready.then(() => this.trigger(EVENT_VALIDATION_INITIALIZED));\r\n\t}\r\n\r\n\tasync destroy() {\r\n\t\tthis.trigger(EVENT_VALIDATION_REMOVED);\r\n\t\tawait super.destroy();\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\r\n\t}\r\n\tset active(active) {\r\n\t\tactive ? this.attr(ATTRIBUTE_ACTIVE, \"\") : this.attr(ATTRIBUTE_ACTIVE, undefined);\r\n\t}\r\n\r\n\tget condition() {\r\n\t\treturn this.attr(ATTRIBUTE_CONDITION);\r\n\t}\r\n}\r\ndefine(Validation);\r\nexport default Validation;\r\n","import BaseField from \"../BaseField\";\nimport Validation from \"../Validation\";\n\nexport const treeFilter = ({ root, filter }) => {\n\tlet elements = [];\n\troot.children.forEach((element) => {\n\t\tconst { accept, stop = false } = filter(element);\n\n\t\tif (accept) elements.push(element);\n\n\t\tif (!stop) {\n\t\t\tconst result = treeFilter({ root: element, filter });\n\t\t\tif (result instanceof Array) elements = elements.concat(result);\n\t\t\telse if (result) elements.push(result);\n\t\t}\n\t});\n\n\treturn elements;\n};\n\nexport const findFields = (root) => {\n\treturn treeFilter({\n\t\troot,\n\t\tfilter: (element) => {\n\t\t\tif (element instanceof BaseField) return { accept: true, stop: true };\n\t\t\treturn { accept: false };\n\t\t},\n\t});\n};\n\nexport const findValidations = (root) => {\n\treturn treeFilter({\n\t\troot,\n\t\tfilter: (element) => {\n\t\t\tif (root != element) {\n\t\t\t\tif (element instanceof BaseField) return { accept: false, stop: true };\n\t\t\t\telse if (element instanceof Validation) return { accept: true, stop: true };\n\t\t\t}\n\t\t\treturn { accept: false };\n\t\t},\n\t});\n};\n","export const validateFields = async (data, fields) => {\r\n    return (await Promise.all(fields.map(field => field.validate(data))))\r\n        .reduce((valid, fieldValid) => valid ? fieldValid: false, true);\r\n}","import { \r\n\tNODENAME_CONTAINER, \r\n\tEVENT_FIELD_INITIALIZED, \r\n\tEVENT_FIELD_REMOVED \r\n} from \"./Constants\";\r\nimport { emtpyOrNoValueString, noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\nimport { findFields } from \"./utils/NodeHelper\";\r\nimport BaseField, { _value } from \"./BaseField\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\nimport { valueHelper, fieldValueMapToObject } from \"./utils/DataHelper\";\r\nimport { validateFields } from \"./utils/ValidationHelper\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass Container extends BaseField {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(BaseField.observedAttributes);\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTAINER;\r\n\t}\r\n\r\n\t#fields = null;\r\n\t#value = new Map();\r\n\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tconst root = this.root;\r\n\t\troot.on(EVENT_FIELD_INITIALIZED, (event) => {\r\n\t\t\tconst field = event.target;\r\n\t\t\tif (field != this) {\r\n\t\t\t\tif (field instanceof BaseField && (!this.#fields || !this.#fields.has(field)))\r\n\t\t\t\t\tthis.#fields = null;\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\troot.on(EVENT_FIELD_REMOVED, (event) => {\r\n\t\t\tconst field = event.target;\r\n\t\t\tif (field != this) {\r\n\t\t\t\tif (field instanceof BaseField && this.#fields && this.#fields.has(field))\r\n\t\t\t\t\tthis.#fields.delete(field);\r\n\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.addValidation(async ({ data }) => await validateFields(data, this.fields));\r\n\t}\r\n\r\n\tget fields() {\r\n\t\tif(!this.#fields)\r\n\t\t\tthis.#fields = new Set(findFields(this));\r\n\r\n\t\treturn Array.from(this.#fields);\r\n\t}\r\n\r\n\treadonlyUpdated() {\r\n\t\tconst { readonly, fields } = this;\r\n\t\tif (fields)\r\n\t\t\tfor (let field of fields) {\r\n\t\t\t\tfield.readonly = readonly;\r\n\t\t\t}\r\n\t}\r\n\r\n\tasync updatedValue(value) {\r\n\t\tawait this.ready;\r\n\t\tconst map = this.#value;\r\n\t\tmap.clear();\r\n\t\tconst fields = this.fields;\r\n\t\tif (fields) {\r\n\t\t\tawait Promise.all(fields.map(async (field) => {\r\n\t\t\t\tconst name = field.name;\r\n\t\t\t\tconst fieldValue = name ? valueHelper(value, field.name) : value;\r\n\t\t\t\tif(!noValue(fieldValue))\r\n\t\t\t\t\tmap.set(field, fieldValue);\r\n\t\t\t\tawait field.value(fieldValue);\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\tlet data = await fieldValueMapToObject(this.#value, fields);\r\n\t\tif (Object.getOwnPropertyNames(data).length == 0) data = null;\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\tasync childValueChanged(field, value) {\r\n\t\t//console.log(`${this.nodeName}.childValueChanged(${field.name}):`, {field, value});\r\n\t\tvalue = await value;\t\t\r\n\t\tconst map = this.#value;\t\t\r\n\t\t\r\n\t\tif (field) {\r\n\t\t\tconst hasField = map.has(field);\r\n\t\t\tconst currentValue = map.get(field);\r\n\t\t\t//console.log({name: field.name, currentValue, value, hasField})\r\n\r\n\t\t\tif(hasField && currentValue == value)\r\n\t\t\t\treturn;\r\n\t\t\tif (noValue(value)) {\r\n\t\t\t\t//console.log(`delete ${field.name}`);\r\n\t\t\t\tmap.delete(field);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//console.log(`set ${field.name} = ${value}`);\r\n\t\t\t\tmap.set(field, value);\r\n\t\t\t}\t\t\t\t\r\n\t\t}\t\r\n\r\n\t\tlet data = await fieldValueMapToObject(map, this.fields);\r\n\t\t//console.log(\"data: \",data);\r\n\t\tif (Object.getOwnPropertyNames(data).length == 0) data = null;\r\n\r\n\t\tawait this.publishValue(data);\r\n\t}\r\n}\r\n\r\ndefine(Container);\r\nexport default Container;\r\n","import { NODENAME_FORM, ATTRIBUTE_ACTIVE, ATTRIBUTE_DISABLED } from \"./Constants\";\r\nimport { Component } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_DISABLED];\r\n\r\nclass FormButton extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#form;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.on(\"click\", (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tif (this.active && !this.disabled) this.execute();\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (this.#initialized) {\r\n\t\t\tthis.active = false;\r\n\t\t\tthis.disabled = false;\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget form() {\r\n\t\tif (!this.#form)\r\n\t\t\tthis.#form = this.parent(NODENAME_FORM);\r\n\r\n\t\treturn this.#form;\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\r\n\t}\r\n\r\n\tset active(active) {\r\n\t\tthis.attr(ATTRIBUTE_ACTIVE, active ? \"\" : null);\r\n\t}\r\n\r\n\tget disabled() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_DISABLED);\r\n\t}\r\n\r\n\tset disabled(disabled) {\r\n\t\tthis.attr(ATTRIBUTE_DISABLED, disabled ? \"\" : null);\r\n\t}\r\n\r\n\texecute() {\r\n\t\tconsole.log(\"execute\");\r\n\t}\r\n}\r\nexport default FormButton;\r\n","import { \r\n\tNODENAME_LIST_DELETE_ROW,\r\n\tEVENT_LIST_ROW_DELETE\r\n} from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\n\r\nclass DeleteRow extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(ATTRIBUTES);\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_LIST_DELETE_ROW;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init(){\r\n\t\tawait super.init();\r\n\t\tthis.active\t= true;\r\n\t}\r\n\r\n\texecute() {\r\n\t\tthis.trigger(EVENT_LIST_ROW_DELETE);\r\n\t}\r\n}\r\n\r\ndefine(DeleteRow);\r\nexport default DeleteRow;\r\n","import { \r\n\tNODENAME_LIST_ROW\r\n} from \"../Constants\";\r\nimport Container from \"../Container\";\r\nimport DeleteRow from \"./DeleteRow\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass ListRow extends Container {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(Container.observedAttributes);\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_LIST_ROW;\r\n\t}\t\r\n\t\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn true;\r\n\t}\r\n\tset active(active) {}\r\n\r\n\tget condition() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tget name() {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\ncustomElements.define(ListRow.NODENAME, ListRow);\r\nexport default ListRow;\r\n","import { \r\n\tNODENAME_LIST_ADD_ROW, \r\n\tEVENT_LIST_ROW_ADD\r\n} from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nexport const EVENT__INITIALIZED__BUTTON__ADDROW = `${NODENAME_LIST_ADD_ROW}:initialized`;\r\n\r\nconst ATTRIBUTES = [];\r\nclass AddRow extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(ATTRIBUTES);\r\n\t}\r\n\r\n\tstatic get NODENAME(){\r\n\t\treturn NODENAME_LIST_ADD_ROW;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.ready.then(() => this.trigger(EVENT__INITIALIZED__BUTTON__ADDROW))\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tthis.active = true;\r\n\t}\r\n\r\n\texecute() {\r\n\t\tthis.trigger(EVENT_LIST_ROW_ADD);\r\n\t}\r\n}\r\n\r\ndefine(AddRow);\r\nexport default AddRow;\r\n","import { NODENAME_LIST_ROWS } from \"../Constants\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass ListRows extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_LIST_ROWS;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n}\r\n\r\ndefine(ListRows);\r\nexport default ListRows;\r\n","import { NODENAME_LIST, NODENAME_LIST_ROWS, NODENAME_LIST_ROW, NODENAME_LIST_ADD_ROW, NODENAME_LIST_DELETE_ROW, EVENT_FIELD_INITIALIZED, EVENT_LIST_ROW_ADD, EVENT_LIST_ROW_DELETE, ATTRIBUTE_MIN, ATTRIBUTE_MAX } from \"./Constants\";\r\nimport { treeFilter } from \"./utils/NodeHelper\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\nimport BaseField, { _value } from \"./BaseField\";\r\nimport Row from \"./list/Row\";\r\nimport AddRow, {EVENT__INITIALIZED__BUTTON__ADDROW} from \"./list/AddRow\";\r\nimport \"./list/DeleteRow\";\r\nimport \"./list/Rows\";\r\nimport { validateFields } from \"./utils/ValidationHelper\";\r\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_MIN, ATTRIBUTE_MAX];\r\n\r\nconst buildData = async (rows, values) => {\r\n\tlet data = [];\r\n\tfor (let row of rows) data.push(values.get(row));\r\n\r\n\tif (data.length == 0) data = null;\r\n\r\n\treturn data;\r\n};\r\n\r\nclass List extends BaseField {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(BaseField.observedAttributes);\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_LIST;\r\n\t}\r\n\r\n\t#template;\r\n\t#container;\r\n\t#values = new Map();\r\n\t#addRowButton;\r\n\t#initialized = false;\r\n\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\r\n\t\tconst root = this.root;\r\n\t\troot.on(EVENT__INITIALIZED__BUTTON__ADDROW, (event) => {\r\n\t\t\tthis.#addRowButton = event.target;\r\n\t\t\tevent.stopPropagation();\r\n\t\t});\r\n\r\n\r\n\t\troot.on(EVENT_FIELD_INITIALIZED, (event) => {\r\n\t\t\tconst target = event.target;\r\n\t\t\tif(target != this){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\troot.on(EVENT_LIST_ROW_ADD, (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tconst { readonly } = this;\r\n\t\t\tif (!readonly) this.createRow();\r\n\t\t});\r\n\r\n\t\troot.on(EVENT_LIST_ROW_DELETE, (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tconst { rows, readonly } = this;\r\n\t\t\tif (!readonly) {\r\n\t\t\t\tconst row = event.target.parent(NODENAME_LIST_ROW);\r\n\t\t\t\tconst index = rows.indexOf(row);\r\n\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\trow.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.addValidation(async () => {\r\n\t\t\tconst { rows, min, max, readonly } = this;\r\n\t\t\tconst length = rows.length;\r\n\t\t\tif (this.#addRowButton && !readonly) {\r\n\t\t\t\tif (length == max) this.#addRowButton.disabled = true;\r\n\t\t\t\telse if (length < max) this.#addRowButton.disabled = false;\r\n\t\t\t}\r\n\t\t\treturn min <= length && length <= max;\r\n\t\t});\r\n\r\n\t\tthis.addValidation(async (data) => {\r\n\t\t\treturn await validateFields(data, this.rows);\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\t\t\t\r\n\t\t\tthis.#initialized = true;\r\n\t\t\tconst rowTemplate = this.find(\"template\").first();\r\n\t\t\tif(rowTemplate)\r\n\t\t\t\tthis.#template = rowTemplate.content;\r\n\r\n\t\t\tthis.#container = this.find(NODENAME_LIST_ROWS).first();\r\n\t\t}\r\n\t}\r\n\r\n\treadonlyUpdated() {\r\n\t\tconst { readonly } = this;\r\n\t\tfor (let row of this.rows) {\r\n\t\t\trow.readonly = readonly;\r\n\t\t}\r\n\t}\r\n\r\n\tget rows() {\r\n\t\tif(this.#container)\r\n\t\t\treturn Array.from(this.#container.children);\r\n\t\treturn [];\r\n\t}\r\n\r\n\tget min() {\r\n\t\tif (this.hasAttribute(ATTRIBUTE_MIN)) return Math.max(0, parseInt(this.attr(ATTRIBUTE_MIN)));\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tget max() {\r\n\t\tif (this.hasAttribute(ATTRIBUTE_MAX)) return parseInt(this.attr(ATTRIBUTE_MAX));\r\n\t\treturn Number.MAX_SAFE_INTEGER;\r\n\t}\r\n\r\n\tacceptValue(value) {\r\n\t\treturn !value || value instanceof Array;\r\n\t}\r\n\r\n\tnormalizeValue(value) {\r\n\t\treturn value ? value.filter((item) => !!item) : null;\r\n\t}\r\n\r\n\tasync createRow(value) {\r\n\t\tconst row = document.importNode(this.#template, true).children[0];\r\n\t\tawait this.#container.append(row);\r\n\r\n\t\tif (value) await row.value(value);\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\tasync updatedValue(values) {\r\n\t\tthis.#values.clear();\r\n\t\tthis.#container.empty();\r\n\t\tif (values) await Promise.all(values.map(value => this.createRow(value)));\r\n\r\n\t\treturn await buildData(this.rows, this.#values);\r\n\t}\r\n\r\n\tasync childValueChanged(row, value) {\r\n\t\tvalue = await value;\r\n\t\tconst values = this.#values;\r\n\r\n\t\tif (noValue(value)) this.#values.delete(row);\r\n\t\telse this.#values.set(row, value);\r\n\r\n\t\tawait super.childValueChanged(row, value);\r\n\t\tconst data = await buildData(this.rows, values);\r\n\t\tawait this.publishValue(data);\r\n\t}\r\n}\r\n\r\ndefine(List);\r\nexport default List;\r\n","import { \r\n\tNODENAME_PAGE,  \r\n\tATTRIBUTE_STEP, \r\n\tEVENT_PAGE_INITIALIZED,\r\n\tEVENT_PAGE_REMOVED\r\n} from \"./Constants\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\nimport Container from \"./Container\";\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_STEP];\r\n\r\nclass Page extends Container {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES.concat(Container.observedAttributes);\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_PAGE;\r\n\t}\r\n\t\r\n\tconstructor(options) {\r\n\t\tsuper(options);\r\n\t\tthis.ready.then(() => this.trigger(EVENT_PAGE_INITIALIZED));\r\n\t}\r\n\r\n\tasync destroy(){\r\n\t\tthis.trigger(EVENT_PAGE_REMOVED);\r\n\t\tawait super.destroy();\r\n\t}\r\n\r\n\tget step(){\r\n\t\treturn this.attr(ATTRIBUTE_STEP);\r\n\t}\r\n\t\r\n\tconditionUpdated(){}\r\n}\r\ndefine(Page);\r\nexport default Page;\r\n","import {ExpressionResolver} from \"@default-js/defaultjs-expression-language\";\r\nimport {Component, define} from \"@default-js/defaultjs-html-components\";\r\nimport { \r\n\tNODENAME_MESSAGE,\r\n\tEVENT_MESSAGE_INITIALIZED,\r\n\tEVENT_MESSAGE_REMOVED\r\n} from \"./Constants\";\r\n\r\nexport const ATTRIBUTE_ACTIVE = \"active\";\r\nexport const ATTRIBUTE_CONDITION = \"condition\";\r\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_CONDITION];\r\n\r\n\r\n\r\nclass Message extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_MESSAGE;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tthis.trigger(EVENT_MESSAGE_INITIALIZED);\r\n\t}\r\n\r\n\tasync destroy(){\r\n\t\tthis.trigger(EVENT_MESSAGE_REMOVED);\r\n\t\tawait super.destroy();\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\r\n\t}\r\n\tset active(active) {\r\n\t\tactive ? this.attr(ATTRIBUTE_ACTIVE, \"\") : this.attr(ATTRIBUTE_ACTIVE, undefined);\r\n\t}\r\n\r\n\tget condition() {\r\n\t\treturn this.attr(ATTRIBUTE_CONDITION);\r\n\t}\r\n\r\n\tasync update(data) {\r\n\t\tawait this.ready;\r\n\t\tthis.active = await ExpressionResolver.resolve(this.condition, data, false);\r\n\t}\r\n}\r\ndefine(Message);\r\nexport default Message;\r\n","import { NODENAME_CONTROL_BACK } from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass BackButton extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL_BACK;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\texecute() {\r\n\t\tthis.form.toPrevPage();\r\n\t}\r\n}\r\nexport default BackButton;\r\ndefine(BackButton);\r\n","import { NODENAME_CONTROL_NEXT } from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass NextButton extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\t\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL_NEXT;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\texecute() {\r\n\t\tthis.form.toNextPage();\r\n\t}\r\n}\r\nexport default NextButton;\r\ndefine(NextButton);\r\n","import { \r\n\tNODENAME_CONTROL_SUMMARY\r\n} from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass SummaryButton extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL_SUMMARY;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\texecute() {\r\n\t\tthis.form.toNextPage();\r\n\t}\r\n}\r\nexport default SummaryButton;\r\ndefine(SummaryButton);\r\n","import { NODENAME_CONTROL_SUBMIT } from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass SubmitButton extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL_SUBMIT;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\texecute() {\r\n\t\tthis.form.submit();\r\n\t}\r\n}\r\nexport default SubmitButton;\r\ndefine(SubmitButton);\r\n","import { \r\n\tFORMSTATE_INIT,\r\n\tFORMSTATE_INPUT,\r\n\tFORMSTATE_VALIDATING,\r\n\tFORMSTATE_SUMMARY,\r\n\tFORMSTATE_FINISHED, \r\n\tNODENAME_CONTROL,\r\n\tNODENAME_CONTROL_BACK,\r\n\tNODENAME_CONTROL_NEXT,\r\n\tNODENAME_CONTROL_CANCEL,\r\n\tNODENAME_CONTROL_SUBMIT, \r\n\tNODENAME_FORM,\r\n\tEVENT_INITIALIZED,\r\n\tEVENT_FORM_STATE_CHANGED,\r\n\tEVENT_SITE_CHANGED,\r\n\tNODENAME_CONTROL_SUMMARY\r\n} from \"./Constants\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport \"./controls\";\r\n\r\nconst BUTTONDUMMY = {\r\n\tactive: true,\r\n\tdisabled: true,\r\n};\r\n\r\nconst ATTRIBUTES = [];\r\nclass Control extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL;\r\n\t}\r\n\r\n\t#form;\r\n\t#back;\r\n\t#next;\r\n\t#summary;\r\n\t#submit;\r\n\t#initialized = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.#form = this.parent(NODENAME_FORM);\r\n\t\t\tthis.#back = this.find(NODENAME_CONTROL_BACK).first() || BUTTONDUMMY;\r\n\t\t\tthis.#next = this.find(NODENAME_CONTROL_NEXT).first() || BUTTONDUMMY;\r\n\t\t\tthis.#summary = this.find(NODENAME_CONTROL_SUMMARY).first() || BUTTONDUMMY;\r\n\t\t\tthis.#submit = this.find(NODENAME_CONTROL_SUBMIT).first() || BUTTONDUMMY;\r\n\r\n\t\t\tthis.#form.on([EVENT_INITIALIZED, EVENT_FORM_STATE_CHANGED, EVENT_SITE_CHANGED], () => {\r\n\t\t\t\tthis.update();\r\n\t\t\t});\r\n\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n\tasync update() {\r\n\t\tconst form = this.#form;\r\n\t\tconst state = form.state;\r\n\t\tconst back = this.#back;\r\n\t\tconst next = this.#next;\r\n\t\tconst summary = this.#summary;\r\n\t\tconst submit = this.#submit\r\n\r\n\t\t// basic control setup\r\n\t\tback.active = true;\r\n\t\tback.disabled = true;\r\n\t\tnext.active = false;\r\n\t\tnext.disabled = true;\r\n\t\tsummary.active = false;\r\n\t\tsummary.disabled = true;\r\n\t\tsubmit.active = false;\r\n\t\tsubmit.disabled = true;\r\n\r\n\t\tif(state == FORMSTATE_VALIDATING)\r\n\t\t\treturn;\r\n\r\n\t\tconst { activePageIndex, activePage, nextPage, pages, useSummaryPage } = form;\t\r\n\t\tconst hasNextPage = (await nextPage) != null;\r\n\r\n\t\tif (state == FORMSTATE_FINISHED) {\r\n\t\t\tback.disabled = true;\r\n\t\t\tsubmit.active = true;\r\n\t\t} else if (state == FORMSTATE_SUMMARY) {\r\n\t\t\tback.disabled = false;\r\n\t\t\tsubmit.active = true;\r\n\t\t\tsubmit.disabled = !form.valid;\r\n\t\t} else if (state == FORMSTATE_INPUT) {\r\n\t\t\tback.disabled = activePageIndex <= 0;\r\n\r\n\t\t\tif (hasNextPage || (!activePage.valid && activePageIndex + 1 < pages.length)) {\r\n\t\t\t\tnext.active = true;\r\n\t\t\t\tnext.disabled = !activePage.valid;\r\n\t\t\t} else if (useSummaryPage && state == FORMSTATE_INPUT) {\r\n\t\t\t\tsummary.active = true;\r\n\t\t\t\tsummary.disabled = !activePage.valid;\r\n\t\t\t} else {\r\n\t\t\t\tsubmit.active = true;\r\n\t\t\t\tsubmit.disabled = !form.valid;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\ndefine(Control);\r\nexport default Control;\r\n","import { \r\n\tNODENAME_STEP, \r\n\tATTRIBUTE_NAME, \r\n\tATTRIBUTE_ACTIVE, \r\n\tATTRIBUTE_READONLY \r\n} from \"./Constants\";\r\nimport { updateActiveState } from \"./utils/StateHelper\";\r\nimport {Component, define} from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_NAME, ATTRIBUTE_ACTIVE, ATTRIBUTE_READONLY];\r\n\r\nclass Step extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_STEP;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n    get name(){\r\n        return this.attr(ATTRIBUTE_NAME);\r\n    }\r\n    \r\n    get active() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\r\n\t}\r\n\r\n\tset active(active) {\r\n\t\tconst current = this.active;\r\n\t\tif (current != active) {\r\n\t\t\tupdateActiveState(this, active);\r\n\t\t}\r\n\t}\r\n\r\n\tget readonly() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_READONLY);\r\n\t}\r\n\r\n\tset readonly(readonly) {\r\n\t\treadonly ? this.attr(ATTRIBUTE_READONLY, \"\") : this.attr(ATTRIBUTE_READONLY, null);\r\n\t}\r\n}\r\n\r\ndefine(Step);\r\nexport default Step;\r\n","import { \r\n\tNODENAME_FORM, \r\n\tNODENAME_PROGESSBAR,\r\n\tNODENAME_STEP,\r\n\tEVENT_SITE_CHANGED,\r\n\tEVENT_FORM_STATE_CHANGED,\r\n\tEVENT_PROGRESSBAR_CHANGED,\r\n\tFORMSTATE_INIT,\r\n\tFORMSTATE_VALIDATING,\r\n\tFORMSTATE_INPUT,\r\n\tFORMSTATE_SUMMARY,\r\n\tFORMSTATE_FINISHED, \r\n\tATTRIBUTE_PROGRESS } from \"./Constants\";\r\nimport {Component ,define } from \"@default-js/defaultjs-html-components\";\r\nimport \"./Step\";\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_PROGRESS];\r\n\r\nconst firstStepPageIndex = (pages, step, activePage) => {\r\n\tfor (let page of pages) {\r\n\t\tif (page.step == step && page.condition) return page;\r\n\t\telse if (page == activePage) return;\r\n\t}\r\n\r\n\treturn null;\r\n};\r\n\r\nclass ProgressBar extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_PROGESSBAR;\r\n\t}\r\n\r\n\t#form;\r\n\t#steps;\r\n\t#initialized = false;\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.on(\"click\", ({ target }) => {\r\n\t\t\tif (!this.#form) return;\r\n\t\t\tif (target == this) return;\t\t\t\r\n\t\t\tconst step = target.is(NODENAME_STEP) ? target : target.parent(NODENAME_STEP);\r\n\t\t\tconst form = this.#form;\r\n\r\n\t\t\tif (!step) return;\r\n\r\n\t\t\tconst {state, pages, activePage} = form;\r\n\t\t\tconst stepName = step.name;\r\n\t\t\tif (state == FORMSTATE_INPUT || state == FORMSTATE_SUMMARY) {\r\n\t\t\t\tconst page = firstStepPageIndex(pages, stepName, activePage);\r\n\t\t\t\tif (page) form.activePage = page;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tthis.progress = 0;\r\n\t\tif (!this.#initialized) {\r\n\t\t\tconst form = this.#form = this.parent(NODENAME_FORM);\r\n\t\t\tthis.#steps = this.find(NODENAME_STEP);\r\n\t\t\tthis.#form.on([EVENT_SITE_CHANGED,EVENT_FORM_STATE_CHANGED], () => {\r\n\t\t\t\tconst state = form.state;\r\n\t\t\t\tif(FORMSTATE_VALIDATING == state)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\r\n\t\t\t\tconst {activePageIndex, activePage, pages} = form;\r\n\t\t\t\tif (!activePage) \r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tconst count = pages.length;\r\n\t\t\t\tconst pageStep = activePage ? activePage.step : FORMSTATE_INIT;\r\n\t\t\t\tconst progress = Math.floor((activePageIndex * 100) / count);\r\n\r\n\t\t\t\tfor (let step of this.steps) {\r\n\t\t\t\t\tconst name = step.name;\r\n\t\t\t\t\tif (state == FORMSTATE_INPUT) {\r\n\t\t\t\t\t\tstep.active = name == pageStep;\r\n\t\t\t\t\t\tstep.readonly = false;\r\n\t\t\t\t\t} else if (state == FORMSTATE_SUMMARY) {\r\n\t\t\t\t\t\tstep.active = name == FORMSTATE_SUMMARY;\r\n\t\t\t\t\t\tstep.readonly = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstep.active = name == FORMSTATE_FINISHED;\r\n\t\t\t\t\t\tstep.readonly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.progress = state == FORMSTATE_SUMMARY || state == FORMSTATE_FINISHED ? 100 : progress;\r\n\r\n\t\t\t\tthis.trigger(EVENT_PROGRESSBAR_CHANGED);\r\n\t\t\t});\r\n\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget steps(){\r\n\t\treturn Array.from(this.#steps);\r\n\t}\r\n\r\n\tget progress() {\r\n\t\treturn this.attr(ATTRIBUTE_PROGRESS);\r\n\t}\r\n\r\n\tset progress(progress) {\r\n\t\tif (this.style.setProperty) this.style.setProperty(\"--progress\", progress + \"%\");\r\n\t\tthis.attr(ATTRIBUTE_PROGRESS, Math.max(0, Math.min(progress, 100)));\r\n\t}\r\n}\r\n\r\ndefine(ProgressBar);\r\nexport default ProgressBar;\r\n","export const STATE_SUCCESS = \"success\";\nexport const STATE_FAIL = \"fail\";\n\nclass SubmitActionResult {\n\n    static get STATE_SUCCESS(){return STATE_SUCCESS;}\n    static get STATE_FAIL(){return STATE_FAIL;}\n\n    constructor(action, state, message, data){\n\t\tthis.action = action;\n        this.state = state;\n        this.message = message;\n        this.data = data;\n    };    \n};\n\nexport default SubmitActionResult;","import Component from \"@default-js/defaultjs-html-components/src/Component\";\r\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\nimport SubmitActionResult, { STATE_FAIL } from \"./SubmitActionResult\";\r\nimport { EVENT_INITIALIZE_SUBMIT_ACTION, NODENAME_FORM, ATTRIBUTE_CONDITION } from \"../Constants\";\r\n\r\n// private member\r\nconst _form = privatePropertyAccessor(\"form\");\r\n\r\n// logic\r\nclass BaseSubmitAction extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tconst form = this.parent(NODENAME_FORM);\r\n\t\t_form(this, form);\r\n\t\tif (form) this.trigger(EVENT_INITIALIZE_SUBMIT_ACTION);\r\n\t}\r\n\r\n\tget form() {\r\n\t\treturn _form(this);\r\n\t}\r\n\r\n\tasync accept(data = {}) {\r\n\t\tconst condition = this.attr(ATTRIBUTE_CONDITION);\r\n        if(condition)\r\n            return await ExpressionResolver.resolve(condition, data, false);\r\n            \r\n        return true;\r\n\t}\r\n\r\n\t/**\r\n\t * Override this function!\r\n\t */\r\n\tasync execute(data = {}) {\r\n\t\treturn new SubmitActionResult(STATE_FAIL, \"not implemented\");\r\n\t}\r\n}\r\nexport default BaseSubmitAction;\r\n","import {define} from \"@default-js/defaultjs-html-components\";\nimport BaseSubmitAction from \"./BaseSubmitAction\";\nimport SubmitActionResult, { STATE_SUCCESS, STATE_FAIL } from \"./SubmitActionResult\";\nimport {NODENAME_SUBMIT_ACTION} from \"../Constants\";\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\n\nconst NODENAME = `${NODENAME_SUBMIT_ACTION}-default`;\n\nclass DefaultFormSubmitAction extends BaseSubmitAction {\n\n    static get NODENAME() { return NODENAME;}\n\n\n\tconstructor(endpoint, method) {\n\t\tsuper();\n\t\tthis.endpoint = endpoint;\n\t\tthis.method = method;\n\t}\n\n\tasync execute(data) {\t\t\n\t\tlet endpoint = this.endpoint;\n\t\tendpoint = await ExpressionResolver.resolveText(endpoint, data, endpoint);\n\t\tconst url = new URL(endpoint, location);\n\n\t\tconst response = await fetch(url, {\n\t\t\tmethod: this.method,\n\t\t\tcredentials: \"include\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify(data),\n\t\t});\t\t\n\t\t\t\n\t\treturn new SubmitActionResult(this, response.ok ? STATE_SUCCESS : STATE_FAIL, response);\t\t\n\t}\n};\n\ndefine(DefaultFormSubmitAction);\nexport default DefaultFormSubmitAction;\n","import { NODENAME_FORM, NODENAME_PAGE, EVENT_INITIALIZED, EVENT_PAGE_INITIALIZED, EVENT_PAGE_REMOVED, EVENT_FORM_STATE_CHANGED, EVENT_SITE_CHANGED, EVENT_SUBMIT, EVENT_SUBMIT_RESULTS, ATTRIBUTE_NAME, ATTRIBUTE_USE_SUMMARY_PAGE, ATTRIBUTE_ENDPOINT, ATTRIBUTE_METHOD, ATTRIBUTE_STATE, ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT, FORMSTATE_INPUT, FORMSTATE_SUMMARY, FORMSTATE_VALIDATING, FORMSTATE_INIT, FORMSTATE_FINISHED } from \"./Constants\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport \"./Message\";\r\nimport \"./Message\";\r\nimport Page from \"./Page\";\r\nimport \"./Control\";\r\nimport \"./ProgressBar\";\r\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport BaseSubmitAction from \"./submitActions/BaseSubmitAction\";\r\nimport DefaultFormSubmitAction from \"./submitActions/DefaultFormSubmitAction\";\r\nimport SubmitActionResult, { STATE_FAIL as ACTION_SUBMIT_STATE_FAIL, STATE_SUCCESS as ACTION_SUBMIT_STATE_SUCCESS } from \"./submitActions/SubmitActionResult\";\r\nimport { valueHelper, fieldValueMapToObject } from \"./utils/DataHelper\";\r\nimport { validateFields } from \"./utils/ValidationHelper\";\r\n\r\nconst _submitActions = privatePropertyAccessor(\"submitAction\");\r\n\r\nconst ATTRIBUTES = [ATTRIBUTE_NAME, ATTRIBUTE_USE_SUMMARY_PAGE, ATTRIBUTE_ENDPOINT, ATTRIBUTE_METHOD, ATTRIBUTE_STATE, ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT];\r\n\r\nconst readonly = (form, readonly) => {\r\n\tfor (let page of form.pages) {\r\n\t\tpage.readonly = readonly;\r\n\t\tpage.active = readonly;\r\n\t}\r\n};\r\n\r\nconst executeActions = async (actions, data) => {\r\n\tconst results = [];\r\n\tfor (let action of actions) {\r\n\t\tconst accept = await action.accept(data);\r\n\t\tif (accept) {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = (await action.execute(data)) || new SubmitActionResult(action, ACTION_SUBMIT_STATE_SUCCESS);\r\n\t\t\t\tresults.push(result);\r\n\t\t\t\tif (result.state == ACTION_SUBMIT_STATE_FAIL) return results;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tresults.push(new SubmitActionResult(action, ACTION_SUBMIT_STATE_FAIL, e));\r\n\t\t\t\treturn results;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn results;\r\n};\r\n\r\nclass Form extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_FORM;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#state = FORMSTATE_INIT;\r\n\t#pages;\r\n\t#value = new Map();\r\n\t#data = {};\r\n\t#validation = null;\r\n\t#hasNextValidation = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\troot.on(EVENT_PAGE_INITIALIZED, (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t});\r\n\r\n\t\troot.on(EVENT_PAGE_REMOVED, (event) => {\r\n\t\t\tconst page = event.target;\r\n\t\t\tthis.#pages = null;\r\n\t\t\tthis.childValueChanged(page, null);\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\t\t});\r\n\r\n\t\tthis.ready.then(() => this.trigger(EVENT_INITIALIZED));\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.#initialized = true;\r\n\t\t\tthis.activePageIndex = -1;\r\n\r\n\t\t\tthis.state = FORMSTATE_INIT;\r\n\r\n\t\t\tthis.useSummaryPage = this.hasAttribute(ATTRIBUTE_USE_SUMMARY_PAGE);\r\n\r\n\t\t\tthis.activePageIndex = -1;\r\n\t\t\tif (this.pages.length > 0) this.toNextPage();\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tget pages() {\r\n\t\tif (!this.#pages) this.#pages = Array.from(this.root.find(NODENAME_PAGE));\r\n\r\n\t\treturn this.#pages;\r\n\t}\r\n\r\n\tget state() {\r\n\t\treturn this.#state;\r\n\t}\r\n\r\n\tset state(state) {\r\n\t\tconst actual = this.#state;\r\n\t\tif (state != FORMSTATE_VALIDATING) {\r\n\t\t\tif (actual == FORMSTATE_INPUT && state != FORMSTATE_INPUT) readonly(this, true);\r\n\t\t\telse if (actual != FORMSTATE_INPUT && state == FORMSTATE_INPUT) {\r\n\t\t\t\treadonly(this, false);\r\n\t\t\t\tif (this.activePage) this.activePage.active = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.#state = state;\r\n\r\n\t\tif (actual != state) this.trigger(EVENT_FORM_STATE_CHANGED);\r\n\t\tthis.attr(ATTRIBUTE_STATE, state);\r\n\t}\r\n\r\n\tget valid() {\r\n\t\tfor (let page of this.pages) if (page.condition && !page.valid) return false;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tasync value(data) {\r\n\t\tawait this.ready;\r\n\t\tif (this.#validation) await this.#validation;\r\n\t\tif (arguments.length == 0) return this.#data;\r\n\r\n\t\tif (this.state == FORMSTATE_INPUT) {\r\n\t\t\tawait Promise.all(this.pages.map(page => {\t\t\t\t\r\n\t\t\t\tconst name = page.name;\r\n\t\t\t\treturn name ? page.value(valueHelper(data, name)) : page.value(data);\r\n\t\t\t}));\r\n\r\n\t\t\tawait this.#validate();\r\n\t\t}else{\r\n\t\t\treturn new Promise((resolve) => {\r\n\t\t\t\tconst handle = (event) => {\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tthis.removeOn(handle, EVENT_FORM_STATE_CHANGED);\r\n\t\t\t\t\tresolve(this.value(data));\r\n\t\t\t\t}\r\n\t\t\t\tthis.on(EVENT_FORM_STATE_CHANGED, handle)\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tget activePage() {\r\n\t\tif (0 <= this.activePageIndex && this.activePageIndex < this.pages.length) return this.pages[this.activePageIndex];\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n\tset activePage(page) {\r\n\t\tconst current = this.activePage;\r\n\t\tif (page != current || this.state != FORMSTATE_INPUT) {\r\n\t\t\tif (current) current.active = false;\r\n\t\t\tthis.activePageIndex = this.pages.indexOf(page);\r\n\t\t\tpage.active = true;\r\n\t\t\tif (this.state != FORMSTATE_INPUT) this.state = FORMSTATE_INPUT;\r\n\r\n\t\t\tthis.scrollIntoView();\r\n\t\t\tthis.trigger(EVENT_SITE_CHANGED);\r\n\t\t}\r\n\t}\r\n\r\n\tget prevPage() {\r\n\t\treturn (async () => {\t\t\t\r\n\t\t\tconst pages = this.pages;\r\n\t\t\tconst start = this.activePageIndex - 1;\r\n\t\t\tconst data = await this.value();\r\n\t\t\tfor (let i = start; i >= 0; i--) {\r\n\t\t\t\tconst page = pages[i];\r\n\t\t\t\tawait page.validate(data);\r\n\t\t\t\tif (page.condition) return page;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t})();\r\n\t}\r\n\r\n\tget nextPage() {\r\n\t\treturn (async () => {\r\n\t\t\tconst pages = this.pages;\r\n\t\t\tconst start = this.activePageIndex + 1;\r\n\t\t\tconst data = await this.value();\r\n\t\t\tif (pages) {\r\n\t\t\t\tfor (let i = start; i < pages.length; i++) {\r\n\t\t\t\t\tconst page = pages[i];\r\n\t\t\t\t\tawait page.validate(data);\r\n\t\t\t\t\tif (page.condition) return page;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t})();\r\n\t}\r\n\r\n\tasync toPrevPage() {\r\n\t\tif (this.state != FORMSTATE_INPUT) {\r\n\t\t\tthis.state = FORMSTATE_INPUT;\r\n\t\t} else {\r\n\t\t\tconst prev = await this.prevPage;\r\n\t\t\tif (prev) this.activePage = prev;\r\n\t\t}\r\n\t}\r\n\r\n\tasync toNextPage() {\r\n\t\tconst next = await this.nextPage;\r\n\t\tif (next) {\r\n\t\t\tthis.activePage = next;\r\n\t\t\tthis.state = FORMSTATE_INPUT;\r\n\t\t} else if (this.useSummaryPage) {\r\n\t\t\tthis.summary();\r\n\t\t} else {\r\n\t\t\tthis.submit();\r\n\t\t}\r\n\t}\r\n\r\n\tasync summary() {\r\n\t\tthis.state = FORMSTATE_SUMMARY;\r\n\t}\r\n\r\n\tget submitActions() {\r\n\t\tlet actions = _submitActions(this);\r\n\t\tif (!actions) {\r\n\t\t\tactions = [];\r\n\t\t\tlet endpoint = this.attr(ATTRIBUTE_ENDPOINT);\r\n\t\t\tif (endpoint) {\r\n\t\t\t\tconst method = this.attr(ATTRIBUTE_METHOD) || \"post\";\r\n\t\t\t\tthis.append(new DefaultFormSubmitAction(endpoint, method));\r\n\t\t\t}\r\n\r\n\t\t\tconst childs = this.children;\r\n\t\t\tfor (let child of childs) {\r\n\t\t\t\tif (child instanceof BaseSubmitAction) actions.push(child);\r\n\t\t\t}\r\n\t\t\t_submitActions(this, actions);\r\n\t\t}\r\n\r\n\t\treturn actions;\r\n\t}\r\n\r\n\tasync submit() {\r\n\t\tconst data = await this.value();\r\n\t\tconst valid = await validateFields(data, this.pages);\r\n\t\tif (!valid) return;\r\n\r\n\t\tif (!this.hasAttribute(ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT)) this.state = FORMSTATE_FINISHED;\r\n\r\n\t\tconst actions = this.submitActions;\r\n\t\tif (actions) {\r\n\t\t\tconst results = await executeActions(actions, data);\r\n\t\t\tthis.trigger(EVENT_SUBMIT_RESULTS, results);\r\n\t\t}\r\n\r\n\t\tthis.trigger(EVENT_SUBMIT, data);\r\n\t}\r\n\r\n\t#validate(page) {\r\n\t\tif (this.state == FORMSTATE_INPUT) {\r\n\t\t\tthis.state = FORMSTATE_VALIDATING;\r\n\t\t\treturn (this.#validation = new Promise((resolved) => {\r\n\t\t\t\tsetTimeout(async () => {\r\n\t\t\t\t\tconst data = this.#data;//await fieldValueMapToObject(this.#value);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst valid = page ? page.validate(data) : await validateFields(data, this.pages);\r\n\r\n\t\t\t\t\tif (!this.#hasNextValidation) this.state = FORMSTATE_INPUT;\r\n\r\n\t\t\t\t\tthis.validation = null;\r\n\t\t\t\t\tresolved(valid);\r\n\t\t\t\t}, 10);\r\n\t\t\t}));\r\n\t\t} else if (this.state == FORMSTATE_VALIDATING) {\r\n\t\t\tthis.#validation.then(async () => {\r\n\t\t\t\tthis.#hasNextValidation = false;\r\n\t\t\t\tawait this.#validate(page);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tasync childValueChanged(field, value) {\r\n\t\tawait this.ready;\t\t\r\n\t\tvalue = await value;\r\n\t\tconst map = this.#value;\r\n\t\t//console.log(`form.childValueChanged(${field.name})`, { field, value });\r\n\t\tif (field) {\r\n\t\t\tif (noValue(value)) map.delete(field);\r\n\t\t\telse map.set(field, value);\r\n\t\t}\r\n\r\n\t\tthis.#data = await fieldValueMapToObject(this.#value, this.pages);\r\n\r\n\t\tconst activePage = this.activePage;\r\n\t\tif (activePage) await this.#validate(activePage);\r\n\t\telse await this.#validate();\r\n\t}\r\n}\r\ndefine(Form);\r\nexport default Form;\r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getCampaigns, deleteCampaign, storeCampaign } from \"../services/CampaignService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-campaigns-element`\r\nexport const NODENAME = \"x-campaigns\";\r\n\r\nconst TEMPLATE_URL__ROOT = new URL(`${TEMPLATES_PATH}/root.tpl.html`, location);\r\nconst TEMPLATE_URL__CREATEDIALOG = new URL(`${TEMPLATES_PATH}/campaign-dialog.tpl.html`, location);\r\n\r\nclass HTMLCampaignsElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n    #createDialog;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n        const root = this.root;\r\n        root.on(EVENT__GLOBAL_ACTION_RELOADPARENT, (event) => {\r\n            event.stopPropagation();\r\n            this.render();            \r\n        });\r\n        root.on(\"action:create-campaign\", (event) => {\r\n            event.stopPropagation();\r\n            this.openCreateDialog();\r\n        });\r\n        root.on(\"action:close-campaign-dialog\", (event) => {\r\n            event.stopPropagation();\r\n            if(this.#createDialog)\r\n            this.#createDialog.close();\r\n        });\r\n\t}\r\n\r\n\tasync init() {\r\n        await super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n            this.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n    async render() {\r\n        const template = await Template.load(TEMPLATE_URL__ROOT);\r\n\t\tawait Renderer.render({ container: this.root, template, data: {accessRights: accessRights(), campaigns: await getCampaigns()} });\r\n    }\r\n\r\n    async openCreateDialog() {\r\n        const root = this.root;\r\n        if(!this.#createDialog){\r\n            const template = await Template.load(TEMPLATE_URL__CREATEDIALOG);\r\n            const result = await Renderer.render({template, container: root, data: {accessRights: accessRights()}, mode:\"append\"});           \r\n            this.#createDialog = result.content[0];\r\n            this.#createDialog.on(\"d-form-submit\", (event) => {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                const form = event.target;\r\n                (async () => {\r\n                    const campaign = await form.value();\r\n                    await storeCampaign(campaign);\r\n                    \r\n                    this.#createDialog.close();\r\n\r\n                    await this.render();\r\n                })();\r\n            })\r\n        }\r\n\r\n        this.#createDialog.showModal();\r\n    }\r\n\t\r\n}\r\n\r\ndefine(HTMLCampaignsElement);\r\nexport default HTMLCampaignsElement;\r\n","const EXPIREED_OFFSET = 60 * 1000;\r\n\r\n\r\nclass Entry {\r\n\t\r\n\t#key;\r\n\t#data = null;\r\n\t#expireAfter;\r\n\t#expireAt;\r\n\t\r\n\tconstructor(key, data, expireAfter = Number.MAX_SAFE_INTEGER){\r\n\t\tthis.#key = key;\t\t\r\n\t\tthis.#data = data;\r\n\t\tthis.#expireAfter = expireAfter;\r\n\t\tthis.#expireAt = Date.now() + expireAfter;\r\n\t}\r\n\t\r\n\tget key(){\r\n\t\treturn this.#key;\r\n\t}\r\n\t\r\n\tget data(){\r\n\t\treturn this.#data\r\n\t}\r\n\t\r\n\tset data(data){\t\t\r\n\t\tthis.#data = data;\r\n\t\tthis.#expireAt = Date.now() + this.#expireAfter;\r\n\t}\t\r\n\t\r\n\tget expireAt(){\r\n\t\treturn this.#expireAt;\r\n\t}\t\r\n\t\r\n\t\r\n}\r\n\r\nclass Cache{\t\r\n\t#expireAfter = Number.MAX_SAFE_INTEGER;\r\n\t#entries = new Map();\r\n\t\r\n\tconstructor(expireAfter){\r\n\t\tthis.#expireAfter = expireAfter;\r\n\t}\r\n\t\r\n\t#isExpired(entry){\r\n\t\treturn entry.expireAt < (Date.now() + EXPIREED_OFFSET);\r\n\t}\r\n\t\r\n\t#getEntry(key){\r\n\t\tconst entry = this.#entries.get(key);\r\n\t\tif(!entry || this.#isExpired(entry)){\r\n\t\t\tthis.delete(key);\r\n\t\t\treturn null;\r\n\t\t}\t\t\r\n\t\treturn entry;\r\n\t}\r\n\t\r\n\t#getEntries(){\r\n\t\tconst entries = Array.from(this.#entries.values);\r\n\t\tconst result = new Array();\r\n\t\tfor(const entry in entries)\r\n\t\t\tif(!this.#isExpired(entry))\r\n\t\t\t\tresult.push(entry);\r\n\t\t\r\n\t\treturn result;\t\r\n\t}\r\n\t\r\n\tkeys(){\r\n\t\treturn this.#getEntries().map(entry => entry.key);\r\n\t}\r\n\t\r\n\tvalues(){\r\n\t\treturn this.#getEntries().map(entry => entry.data);\r\n\t}\r\n\t\r\n\tget size(){\r\n\t\treturn this.#entries.size\r\n\t}\t\r\n\t\r\n\tget value(){\r\n\t\treturn this.#entries.values\r\n\t}\r\n\t\r\n\thas(key){\r\n\t\treturn this.#getEntry(key) != null;\r\n\t}\t\r\n\t\r\n\tget(key){\t\t\r\n\t\tconst entry = this.#getEntry(key);\t\t\r\n\t\treturn entry ? entry.data : null;\r\n\t}\r\n\t\r\n\tset(key, value){\r\n\t\tconst entry = this.#getEntry(key);\r\n\t\tif(entry != null)\r\n\t\t\tentry.data = value;\r\n\t\telse\t\t\t\r\n\t\t\tthis.#entries.set(key, new Entry(key, value, this.#expireAfter));\r\n\t}\r\n\t\r\n\tdelete(key){\r\n\t\tthis.#entries.delete(key);\r\n\t}\r\n\t\r\n\tclear(){\r\n\t\tthis.#entries.clear();\r\n\t}\r\n}\r\n\r\n\r\nexport default Cache;","import { getJSON, postJSON, deleteJSON } from \"./ServiceUtils.js\";\r\nimport { member } from \"./LoginService.js\";\r\nimport { getMember } from \"./MemberService.js\";\r\nimport Cache from \"./Cache.js\";\r\n\r\nconst ENDPOINT = (campaignid) => `/api/campaigns/${campaignid}/registrations`;\r\nconst ENDPOINT_MEMBER_REGISTRATIOIN = (campaignid, memberid) => `/api/campaigns/${campaignid}/registrations/${memberid}`;\r\n\r\n\r\nconst CACHE = new Cache(10 * 60 * 1000);\r\n\r\n\r\nconst loadRegistrions = async (campaignid) => {\r\n\tconst registrations = new Map();\r\n\tconst response = (await getJSON(ENDPOINT(campaignid))).data || [];\r\n\tawait Promise.all(response.map(async (registration) => {\r\n\t\treturn appendRegistraion(registrations, registration);\r\n\t}));\r\n\r\n\treturn registrations;\r\n};\r\n\r\nconst appendRegistraion = async (registrations, registration) => {\r\n\tconst { memberid } = registration;\r\n\tconst member = await getMember(memberid);\r\n\tif (member) {\r\n\t\tregistration.member = member;\r\n\t\tregistrations.set(`${memberid}`, registration);\r\n\t}\r\n}\r\n\r\nconst getCachedRegistrations = (campaignid) => {\r\n\tconst key = `${campaignid}`;\r\n\tlet registrations = CACHE.get(key) || null;\r\n\tif (!registrations) {\r\n\t\tregistrations = loadRegistrions(campaignid);\r\n\t\tCACHE.set(key, registrations);\r\n\t}\r\n\r\n\treturn registrations;\r\n}\r\n\r\nconst cacheRegistration = async (registration) => {\r\n\tif (!registration) return;\r\n\tconst { campaignid } = registration;\r\n\tconst registrations = await getCachedRegistrations(campaignid, true);\r\n\tappendRegistraion(registrations, registration);\r\n}\r\n\r\nexport const getRegistrations = async (campaign) => {\r\n\tconst registrations = await getCachedRegistrations(campaign, true);\r\n\tconst result = Array.from(registrations.values());\r\n\r\n\treturn result.sort((a, b) => {\r\n\t\tif (a.member.name.toLowerCase() < b.member.name.toLowerCase())\r\n\t\t\treturn -1;\r\n\t\tif (a.member.name.toLowerCase() > b.member.name.toLowerCase())\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t});\r\n}\r\n\r\nexport const storeRegistration = async (campaign, registration) => {\r\n\tregistration = await postJSON(ENDPOINT(campaign), registration);\r\n\tawait cacheRegistration(registration);\r\n\treturn registration;\r\n}\r\n\r\nexport const getMyRegistration = async (campaign) => {\r\n\treturn getRegistrationByMember(campaign, member().id);\r\n}\r\n\r\nexport const getRegistrationByMember = async (campaign, member) => {\r\n\tlet registrations = await getCachedRegistrations(campaign);\r\n\treturn registrations.get(`${member}`);\r\n} \r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getCampaign, deleteCampaign, storeCampaign } from \"../services/CampaignService.js\";\r\nimport { getRegistrations, getMyRegistration, getRegistrationByMember, storeRegistration } from \"../services/CampaignRegistrationService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-campaign-element`;\r\nexport const NODENAME = \"x-campaign\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\";\r\n\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\nconst TEMPLATE_REGISTRATION = Template.load(new URL(`${TEMPLATES_PATH}/registration.tpl.html`, location));\r\nconst TEMPLATE_REGISTRATIONS = Template.load(new URL(`${TEMPLATES_PATH}/registrations.tpl.html`, location));\r\n\r\nconst getDatesBetweenTwoDates = (a, b) => {\r\n\ta = a instanceof Date ? a : new Date(a);\r\n\tb = b instanceof Date ? b : new Date(b);\r\n\r\n\tconst days = Math.ceil(Math.abs(a - b) / (1000 * 60 * 60 * 24));\r\n\tconst dates = [];\r\n\tfor (let i = 0; i < days; i++) dates.push(a.addDays(i));\r\n\r\n\treturn dates;\r\n};\r\n\r\nclass HTMLCampaignElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#open = false;\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\troot.on(EVENT__GLOBAL_ACTION_RELOADPARENT, (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.render();\r\n\t\t});\r\n\t\troot.on(\"action:toogle-details\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tconst {target} = event;\r\n\t\t\tif (target instanceof HTMLDetailsElement) \r\n\t\t\t\tthis.#open = target.open;\r\n\t\t});\r\n\t\troot.on(\"action:show-registrations\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.showRegistrations();\r\n\t\t});\r\n\t\troot.on(\"action:delete-campaign\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tif(confirm(\"Soll die Kampagne wirklich gelöscht werden?\")){\t\t\t\t\r\n\t\t\t\t\tawait deleteCampaign(this.campaignId);\r\n\t\t\t\t\tthis.remove();\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t});\t\t\r\n\t\troot.on(\"action:member-registrate\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.openRegistrationDialog();\r\n\t\t});\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget campaignId() {\r\n\t\treturn parseInt(this.attr(ATTR__CAMPAIGNID));\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE_ROOT;\r\n\t\tconst registration = await getMyRegistration(this.campaignId);\r\n        const isRegistrated = registration != null && typeof registration !== \"undefined\";\r\n\t\tawait Renderer.render({ container: this.root, template, data: {accessRights: accessRights(), open:this.#open, campaign: await getCampaign(this.campaignId), isRegistrated } });\r\n\t}\r\n\r\n\tasync openRegistrationDialog() {\r\n\t\tconst template = await TEMPLATE_REGISTRATION;\r\n\t\tconst campaign = await getCampaign(this.campaignId);\r\n\r\n\t\tconst data = {\r\n\t\t\tcampaign,\r\n\t\t\tdays: getDatesBetweenTwoDates(campaign.startdate, campaign.enddate),\r\n\t\t};\r\n\r\n\t\tconst result = await Renderer.render({\r\n\t\t\ttemplate,\r\n\t\t\tcontainer: this.root,\r\n\t\t\tdata,\r\n\t\t\tmode: \"append\",\r\n\t\t});\r\n\r\n\t\tconst dialog = result.content[0];\r\n\t\tconst form = dialog.find(\"d-form\").first();\r\n\r\n\t\tform.on(\"d-form-submit\", (event) => {\r\n\t\t\tconsole.log(event);\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tconst registration = await form.value();\r\n\t\t\t\tconst availability = [];\r\n\t\t\t\tlet fullyavailable = true;\r\n\t\t\t\tfor (const day in registration) {\r\n\t\t\t\t\tif (fullyavailable && registration[day].available != \"full\") fullyavailable = false;\r\n\t\t\t\t\tavailability.push(registration[day]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait storeRegistration(this.campaignId, { fullyavailable, availability });\r\n\t\t\t\tdialog.hide();\r\n\t\t\t\tdialog.remove();\r\n\t\t\t\t\r\n\t\t\t\tawait this.render();\r\n\t\t\t})();\r\n\t\t});\r\n\t\tform.on(\"action:close-registration-dialog\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tdialog.hide();\r\n\t\t\tdialog.remove();\r\n\t\t\tthis.render();\r\n\t\t});\r\n\r\n\t\tconst registration = await getMyRegistration(this.campaignId);\r\n\t\tif(registration){\r\n\t\t\tconst days = registration.availability || [];\r\n\t\t\tconst data = {};\r\n\t\t\tfor (let i = 0; i < days.length; i++)\r\n\t\t\t\tdata[`day${i+1}`] = days[i];\r\n\r\n\t\t\tawait form.value(data);\r\n\t\t}\r\n\r\n\r\n\t\tdialog.showModal();\r\n\t}\r\n\r\n\tasync showRegistrations() {\r\n\t\tconst template = await TEMPLATE_REGISTRATIONS;\r\n\t\tconst registrations = await getRegistrations(this.campaignId, true);\r\n\t\tconst result = await Renderer.render({ container: this, template, data: { registrations }, mode: \"append\" });\r\n\t\tconst dialog = result.content[0];\t\t\r\n\t\tdialog.on(\"close\", () => {\r\n\t\t\tdialog.remove();\r\n\t\t});\r\n\r\n\t\tdialog.showModal();\r\n\t}\r\n}\r\n\r\ndefine(HTMLCampaignElement);\r\nexport default HTMLCampaignElement;\r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getRegistrations, getMyRegistration, getRegistrationByMember, storeRegistration } from \"../services/CampaignRegistrationService.js\";\r\nimport { getMember } from \"../services/MemberService.js\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-campaign-member-element`;\r\nexport const NODENAME = \"x-campaign-member\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\";\r\nconst ATTR__MEMBERID = \"member-id\";\r\n\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\n\r\nclass HTMLCampaignMemberElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.#initialized = true;\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE_ROOT;\r\n\t\tconst registration = await this.getRegistration();\r\n\t\tawait Renderer.render({ container: this.root, template, data: { registration } });\r\n\t}\r\n\r\n\tget campaignid() {\r\n\t\treturn this.attr(ATTR__CAMPAIGNID);\r\n\t}\r\n\r\n\tget memberid() {\r\n\t\treturn this.attr(ATTR__MEMBERID);\r\n\t}\r\n\r\n\tasync getRegistration() {\r\n\t\tconst { campaignid, memberid } = this;\r\n\t\treturn await getRegistrationByMember(campaignid, memberid);\r\n\t}\r\n}\r\n\r\ndefine(HTMLCampaignMemberElement);\r\nexport default HTMLCampaignMemberElement;\r\n","import {getJSON, postJSON, deleteJSON} from \"./ServiceUtils.js\";\r\n\r\nconst ENDPOINT = `/api/teams`;\r\n\r\nconst CACHE = new Map();\r\nconst CACHE_CAMPAIGNTEAMS = new Map();\r\n\r\nconst getCampignCache = (campaignid = null, create=false) => {\t\r\n\tconst cacheKey = `${campaignid ? campaignid : -1}`;\r\n\tif(CACHE_CAMPAIGNTEAMS.has(cacheKey))\r\n\t\treturn CACHE_CAMPAIGNTEAMS.get(cacheKey);\r\n\t\r\n\tif(!create)\r\n\t\treturn null;\r\n\t\r\n\tconst campaignCache = new Map();\r\n\tCACHE_CAMPAIGNTEAMS.set(cacheKey, campaignCache);\r\n\t\r\n\treturn campaignCache;\r\n}\r\n\r\nexport const getTeams = async (campaignid = null) => {\t\t\r\n\tlet campaignCache = getCampignCache(campaignid);\r\n\tif(campaignCache)\r\n\t\treturn Array.from(campaignCache.values());\r\n\t\t\r\n\tcampaignCache = getCampignCache(campaignid, true);    \r\n    const teams = (await (async () => {\r\n\t\tif(campaignid)\r\n\t\t\treturn getJSON(`${ENDPOINT}/campaign/${campaignid}`);\r\n\t\treturn getJSON(ENDPOINT);\r\n\t})()).data;    \r\n    \r\n    for(let team of teams){\r\n\t\tcampaignCache.set(team.id, team);\r\n        CACHE.set(team.id, team);\r\n    }\r\n\r\n    return teams;\r\n};\r\n\r\nexport const getTeam = async (id) => {\r\n    if(CACHE.has(id))\r\n        return CACHE.get(id);\r\n\r\n    const team = await getJSON(`${ENDPOINT}/${id}`);\r\n    CACHE.set(team.id, team);    \r\n    const campaignCache = getCampignCache(team.campaignid, true);\r\n\tcampaignCache.set(team.id, team);\r\n\t\r\n    return team;\r\n};\r\n\r\nexport const storeTeam = async (team) => {\r\n    team = await postJSON(`${ENDPOINT}`, team );\r\n    CACHE.set(team.id, team);\r\n    const campaignCache = getCampignCache(team.campaignid, true);\r\n\tcampaignCache.set(team.id, team);\r\n\r\n    return team;\r\n};\r\n\r\nexport const deleteTeam = async (id) => {\r\n    await deleteJSON(`${ENDPOINT}/${id}`);    \r\n    const team = CACHE.get(id);\r\n    const campaignCache = getCampignCache(team.campaignid, false);\r\n    if(campaignCache)\r\n\t\tcampaignCache.delete(id);\r\n\t\t\r\n\tCACHE.delete(id);\r\n};","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getTeam, deleteTeam, storeTeam } from \"../services/TeamService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-team-element`;\r\n\r\nconst NODENAME = \"x-team\";\r\nconst ATTR__TEAMID = \"team-id\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\";\r\n\r\nconst TEMPLATE__ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\nconst TEMPLATE__EDITOR = Template.load(new URL(`${TEMPLATES_PATH}/editor.tpl.html`, location));\r\n\r\nclass HTMLTeamElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#open = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\troot.on(\"action:toogle-details\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tconst { target } = event;\r\n\t\t\tif (target instanceof HTMLDetailsElement)\r\n\t\t\t\tthis.#open = target.open;\r\n\t\t});\r\n\t\troot.on(\"action:delete-team\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tif (confirm(\"Soll das Team wirklich gelöscht werden?\")) {\r\n\t\t\t\t\tconst teamId = this.teamId;\r\n\t\t\t\t\tawait deleteTeam(teamId);\r\n\t\t\t\t\tthis.trigger(\"info:team-deleted\", teamId);\r\n\t\t\t\t\tthis.remove();\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t});\r\n\r\n\t\troot.on(\"action:edit-team\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.editorDialog();\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.render();\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget teamId() {\r\n\t\treturn parseInt(this.attr(ATTR__TEAMID));\r\n\t}\r\n\r\n\tget campaignId() {\r\n\t\treturn parseInt(this.attr(ATTR__CAMPAIGNID));\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE__ROOT;\r\n\t\tconst team = await getTeam(this.teamId)\r\n\t\tawait Renderer.render({ template, container: this.root, data: { accessRights: accessRights(), open: this.#open, team } });\r\n\t}\r\n\r\n\tasync editorDialog() {\r\n\t\tconst { root, teamId } = this;\r\n\t\tconst team = await getTeam(teamId);\r\n\t\tconst template = await TEMPLATE__EDITOR;\r\n\t\tconst container = document.createElement(\"div\");\r\n\t\tawait Renderer.render({ container, template, data: { team } });\r\n\t\troot.append(container.innerHTML);\r\n\t\tconst dialog = root.find(\":scope > dialog\").last();\r\n\t\tdialog.on(\"d-form-submit\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tconst form = event.target;\r\n\t\t\t(async () => {\r\n\t\t\t\tconst team = await form.value();\r\n\t\t\t\tawait storeTeam(team);\r\n\t\t\t\tdialog.close();\r\n\t\t\t\tdialog.remove();\r\n\t\t\t\tthis.render();\r\n\t\t\t})();\r\n\t\t});\r\n\t\tdialog.on(\"close\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tdialog.remove();\r\n\t\t});\r\n\r\n\t\tconst form = dialog.find(\"d-form\").first();\r\n\t\tawait form.ready;\r\n\t\tawait form.value(team);\r\n\t\tdialog.showModal();\r\n\t}\r\n}\r\n\r\ndefine(HTMLTeamElement);\r\nexport default HTMLTeamElement;\r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getTeams, storeTeam } from \"../services/TeamService.js\";\r\nimport { getCampaign, storeCampaign } from \"../services/CampaignService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-teams-element`;\r\nconst TEMPLATE__ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\n\r\nconst NODENAME = \"x-teams\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\"\r\n\r\nclass HTMLTeamsElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\troot.on(\"action:create-team\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tconst campaignid = this.campaignId ? parseInt(this.campaignId) : null;\r\n\t\t\t\tawait storeTeam({ name: \"neues Team\", campaignid });\r\n\r\n\t\t\t\tthis.render();\r\n\t\t\t})();\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget campaignId() {\r\n\t\treturn this.attr(ATTR__CAMPAIGNID);\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE__ROOT;\r\n\t\tconst teams = await getTeams(this.campaignId);\t\t\r\n\t\tawait Renderer.render({ template, container: this.root, data: {accessRights: accessRights(), teams }});\r\n\t}\r\n}\r\n\r\ndefine(HTMLTeamsElement);\r\nexport default HTMLTeamsElement;\r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\nimport { BaseField } from \"@default-js/defaultjs-html-form\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getMembers } from \"../services/MemberService.js\";\r\nimport { getRegistrations } from \"../services/CampaignRegistrationService.js\";\r\n\r\nconst ATTR_CAMPAIGNID = \"campaign-id\";\r\nconst NODENAME = \"x-team-member-search-field\";\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-team-member-search-field-element`;\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\nconst TEMPLATE_DIALOG = Template.load(new URL(`${TEMPLATES_PATH}/dialog.tpl.html`, location));\r\n\r\nclass HTMLTeamMemberSearchFieldElement extends BaseField {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#selectionDialog = null;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tconst root = this.root;\r\n\t\troot.on(\"action:show-selection-dialog\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif(!this.readonly)\t\t\r\n\t\t\t\tthis.showSelectionDialog();\r\n\t\t});\r\n\t\troot.on(\"action:save-selection\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif(!this.readonly){\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tconst selections = this.#selectionDialog.find(\".is-selected[member-id]\");\r\n\t\t\t\t\tconst memberids = await Promise.all(selections.map((selected) => selected.attr(\"member-id\")));\r\n\t\t\t\t\tawait this.publishValue(memberids || null);\t\t\t\t\t\r\n\t\t\t\t\tawait this.render();\r\n\t\t\t\t\tthis.#selectionDialog.close();\r\n\t\t\t\t\tthis.#selectionDialog.remove();\r\n\t\t\t\t\tthis.#selectionDialog = null;\r\n\t\t\t\t})();\r\n\t\t\t}\r\n\t\t});\r\n\t\troot.on(\"action:filter\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tconst target = event.target;\r\n\t\t\tconst value = target.value;\r\n\t\t\tconst filterContainer = target.find(target.attr(\"filter-container\")).first();\r\n\t\t\tfilterContainer.find(\"[filterable]\").removeClass(\"hidden\");\r\n\t\t\tif(value.length > 0)\r\n\t\t\t\tfilterContainer.find(\"[filterable]\").forEach((element) => {\r\n\t\t\t\t\tconst content = element.find(\"x-member[filterable-content]\").first().attr(\"filterable-content\");\r\n\t\t\t\t\tif(content.search(value) < 0)\r\n\t\t\t\t\t\telement.addClass(\"hidden\");\t\t\t\t\r\n\t\t\t\t});\t\t\t\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n\r\n\tasync showSelectionDialog() {\r\n\t\tif(!this.#selectionDialog){\r\n\t\t\tconst {root} = this;\r\n\t\t\tconst template = await TEMPLATE_DIALOG;\r\n\t\t\tconst memberids = await (async () => {\r\n\t\t\t\tconst result = new Set();\r\n\t\t\t\tconst memberids = await this.value();\r\n\t\t\t\tif (memberids) {\r\n\t\t\t\t\tfor (const memberid of memberids)\r\n\t\t\t\t\t\tresult.add(memberid);\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t})();\r\n\t\t\t\r\n\t\t\tconst campaignid = this.campaignid;\r\n\t\t\tconst members = await (async () => {\r\n\t\t\t\tif(campaignid)\r\n\t\t\t\t\treturn (await getRegistrations(campaignid)).map(registration => {return { id: registration.memberid};});\r\n\t\t\t\t\r\n\t\t\t\treturn getMembers();\r\n\t\t\t})();\r\n\t\t\t\r\n\t\t\tawait Renderer.render({ template, container: root, data: { members, memberids, campaignid }, mode:\"append\"});\t\r\n\t\t\tthis.#selectionDialog = root.find(\":scope > dialog\").first();\r\n\t\t\t\r\n\t\t}\r\n\t\tthis.#selectionDialog.showModal(); \r\n\t}\r\n\r\n\tasync render(value) {\r\n\t\tvalue = value || await this.value();\r\n\t\tconst template = await TEMPLATE_ROOT;\r\n\t\tRenderer.render({ template, container: this.root, data: { memberids: value || [], campaignid: this.campaignid } });\r\n\t}\r\n\r\n\tget campaignid() {\r\n\t\treturn this.attr(ATTR_CAMPAIGNID);\r\n\t}\r\n\r\n\tasync acceptValue(value) {\r\n\t\treturn value instanceof Array || value == null;\r\n\t}\r\n\r\n\tasync readonlyUpdated() {}\r\n\r\n\tasync updatedValue(value) {\r\n\t\tif(this.#selectionDialog)\r\n\t\t\tthis.#selectionDialog.remove()\r\n\t\t\r\n\t\tawait this.render(value);\r\n\t}\r\n}\r\n\r\ndefine(HTMLTeamMemberSearchFieldElement);\r\nexport default HTMLTeamMemberSearchFieldElement;\r\n","((global) => {\r\n\tconst toDate = (date = new Date()) => {\t\t\r\n\t\tconst year = date.getFullYear();\t\t\r\n\t\tconst month = date.getMonth();\r\n\t\tdate = date.getDate();\r\n\t\treturn {\r\n\t\t\tdate, month, year,\r\n\t\t\ttest: year * 10000 + month * 100 + date\r\n\t\t};\r\n\t};\r\n\r\n\tconst dateGreaterEqual = (a, b) => {\r\n\t\ta = toDate(a instanceof Date ? a : Date.parse(a));\r\n\t\tb = toDate(b instanceof Date ? b : Date.parse(b));\r\n\r\n\t\treturn a.test >= b.test;\r\n\t};\r\n\r\n\tconst dateGreater = (a, b) => {\r\n\t\ta = toDate(a instanceof Date ? a : Date.parse(a));\r\n\t\tb = toDate(b instanceof Date ? b : Date.parse(b));\r\n\r\n\t\treturn a.test > b.test;\r\n\t};\r\n\r\n\tglobal.formUtils = global.formUtils || {\r\n\t\tdate: {\r\n\t\t\tgreaterEqual: dateGreaterEqual,\r\n\t\t\tgreaterEqualNow: (date) => dateGreaterEqual(date, new Date()),\r\n            greater: dateGreater\r\n\t\t},\r\n\t};\r\n})(window);\r\n","((global) => {\r\n    const DATEFORMAT = new Intl.DateTimeFormat('default', {weekday: 'long',month: 'long', day:'numeric'});\r\n\tconst toDate = (date = new Date()) => {\r\n\t\treturn DATEFORMAT.format(date)\r\n\t};\r\n\r\n    global.DateFormats = global.DateFormats || {\r\n\t\ttoDate\r\n\t};\r\n})(window);","const BODY = document.body;\r\n\r\n\r\nBODY.on(\"action:management:sync-all-data\", async (event) => {\r\n    console.log({event});\r\n    await fetch(\"/api/management/sync-data\", location);\r\n});"],"names":["String","prototype","hashcode","this","length","hash","i","charCodeAt","BODY","document","body","DENIED_CHARACHER_FILTER","ATTR__FILTERABLE_BY","CLASS__FILTER_MISMATCHED","MISMACHTEDFILTERFORITEM","WeakMap","filter","target","filterActive","attr","container","find","first","itemSelector","trim","filterBy","toLowerCase","replace","filterByValue","filterValueAttribute","filterValueSelector","filterKey","forEach","item","mismachtedFilter","data","get","Map","set","mismachtedFilterForItem","delete","value","is","result","filterValue","size","addClass","removeClass","toggleAttribute","on","event","stopPropagation","ATTR__SEARCHABLE_ITEM","ATTR__SEARCHABLE_CONTENT","SELECTOR_SEARCHABLE_ITEM","SELECTOR_SEARCHABLE_CONTENT","CLASS__SEARCH_MISMATCHED","search","values","split","content","items","Array","from","push","map","join","searchableContent","some","SEARCHTIMOUTID","clearTimeout","setTimeout","ATTR__SORTABLE_BY","getValue","attribute","attributeSelector","getItemByAttribute","sortContainer","valueAttribute","valueSelector","direction","sorted","children","sort","a","b","valueA","valueB","reverse","empty","append","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","g","globalThis","Function","e","window","GLOBAL","self","ORGFETCH","fetch","CURRENTORIGIN","location","origin","INSTANCE","constructor","ignoreDocumentOrigin","addOriginToIgnore","origins","toString","addUrlToIgnore","urls","url","setup","Promise","addInterceptor","aInterceptor","interceptor","Error","doAccept","doHandle","reset","ready","interceptors","shift","doIntercept","aData","metadata","chain","uncheckedFetch","request","XMLHttpRequest","ORGXHR","executeRequest","open","call","method","async","username","password","headers","Object","getOwnPropertyNames","aHeader","setRequestHeader","send","XHR","xhr","arguments","aName","aValue","aMethod","aUrl","isAsync","aUsername","aPassword","URL","protocol","hostname","port","path","pathname","query","aBody","then","bind","console","error","aRequest","Interceptor","unceckedFetch","defaultTokenAppender","token","TokenInterceptor","condition","fetchToken","appendToken","refreshInterval","refreshToken","super","type","includes","appender","timeout","OAuthInterceptor","aSetup","response","login","json","defaultjs","httpinterceptor","VERSION","Manager","TEMPLATE_BASEPATH","EVENT__GLOBAL_ACTION_RELOADPARENT","URL_LOGIN","APPGLOBAL","ROLEMAPPING","APPGLOBALS","STORAGE","localStorage","STORAGE_ITEM__LOGIN","MEMBER","ACCESSTOKEN","EXPIREAT","isloggedIn","ACCESSRIGHTS","isExpired","expireAt","Date","now","access","status","key","setItem","JSON","stringify","member","accessToken","accessRights","scheduleNexAccessTokenRefresh","cachedLogin","parse","getItem","loadValue","removeItem","params","searchParams","id","timeOffset","href","args","extender","global","globalVar","aInitValue","EXTENSIONS_MAP","aExtention","aType","extensions","name","warn","support","Prototype","EVENTSPLITER","getWrapperHandleMap","element","__wrapperhandlemap__","removeWrapper","eventTypes","wrapper","option","events","handle","capture","index","indexOf","removeEventListener","splice","once","passive","apply","addEventListener","removeOn","trigger","timeouts","___EVENTTRIGGERTIMEOUTS___","timeoutid","delegate","Event","CustomEvent","bubbles","cancelable","composed","detail","delegatedEvent","dispatchEvent","EventTarget","dataset","nodes","childNodes","remove","html","innerHTML","outerHTML","Node","NodeList","HTMLCollection","appendChild","arg","create","prepend","aFirstElement","aElement","insertBefore","insert","parent","parentNode","oldNode","newNode","aItem","replaceChild","after","next","nextSibling","before","inserter","node","DataSupport","ManipulationSupport","parentSelector","queryExecuter","aSelector","match","exec","querySelectorAll","substr","nextSelector","Document","DocumentFragment","matches","selector","ignoreShadowRoot","ShadowRoot","host","parents","tagName","sameTagSiblings","closest","aQuery","closests","parentElement","nested","hasAttributes","getAttributeNames","getAttribute","removeAttribute","setAttribute","Element","QuerySupport","aFunction","readyState","clazz","classList","add","toggleClass","toggle","HIDEVALUE","isHidden","style","display","init","show","hide","toggleShow","HTMLElement","HtmlClassSupport","InputTypes","selected","isArray","concat","checked","DefaultInputType","val","getInputType","HTMLInputElement","ValueSupport","HTMLTextAreaElement","HTMLSelectElement","callback","source","prop","getOwnPropertyDescriptor","last","ListSupport","applyTo","calling","isFunction","results","counter","enumerable","aFunctionName","theArguments","extdom","utils","Utils","aContent","asTemplate","template","createElement","importNode","script","aFile","aTarget","all","file","r","onload","onerror","src","reject","ObjectProperty","context","keyDefined","hasValue","load","keys","isNullOrUndefined","object","isPrimitive","isObject","equalPojo","nullA","nullB","typeA","propertiesA","propertiesB","equalObject","clazzA","getPrototypeOf","clazzB","equalClasses","isPojo","merge","sources","propFilter","deep","recursive","accept","Set","RegExp","defValue","o","defineProperty","writable","configurable","defGet","aKey","aObject","buildPropertyFilter","names","allowed","defGetSet","lazyPromise","promiseResolve","promiseError","promise","resolved","componentEventname","eventType","nodename","nodeName","NODENAME","attributeChangeEventname","TIMEOUTS","buildClass","htmlBaseType","shadowRoot","createUID","uidPrefix","uidSuffix","attachShadow","mode","root","destroy","connectedCallback","ownerDocument","isConnected","component","resolve","adoptedCallback","attributeChangedCallback","oldValue","newValue","disconnectedCallback","CLAZZMAP","componentBaseOf","toNodeName","prefix","options","customElements","define","findClosest","depth","check","child","findClosestInDepth","PRIVATE_PROPERTIES","privateStore","obj","has","privateProperty","privatePropertyAccessor","varname","EVENT_INIT","EVENT_CLICK","EVENT_ACTIVATE","EVENT_DEACTIVATE","EVENT_TO_ROUTE","DefaultValue","Handle","resolver","cache","updateData","resetCache","getPropertyDef","property","seek","def","defined","proxy","seekAtChain","hasProperty","getProperty","setProperty","deleteProperty","Context","Proxy","EXPRESSION","DEFAULT_NOT_DEFINED","toDefaultValue","aResolver","aExpression","aFilter","aDefault","aStatement","aContext","expression","execute","resolveMatch","defaultValue","normalize","ExpressionResolver","effectiveChain","contextChain","getData","mergeContext","ObjectUtils","resolveText","aText","text","temp","aTimeout","buildSecure","NODE_ATTRIBUTE_TEMPLATE","CACHE","fromSource","fromElement","HTMLTemplateElement","Template","cloneNode","importContent","doc","alias","loaction","getKey","fromURL","loadNodeTemplate","defaultTemplate","getTemplate","ATTR_NAME","ATTR_ACTIVE","ATTR_STATEFUL","ATTR_COMPONENT_TAG","ATTR_COMPONENT_TAG_ATTRIBUTES","ATTR_VIEW","ATTRIBUTES","EVENTS","_template","buildComponent","route","hasAttribute","tag","attributes","getTagAttributes","Route","observedAttributes","setting","active","view","stateful","refresh","ATTR_REFRESH","ATTR_TARGET","RouteLink","preventDefault","DEFINED_DIRECTIVES","PHASE","finish","Directive","MIN_RANK","MAX_RANK","rank","phase","directive","defineDirective","directives","toTemplate","renderer","wait","callbacks","ignoreDirective","stop","ignore","subcontexts","closed","ignoreDirectives","acceptDirective","finished","subContext","clone","toRenderOption","DirectiveElement","hidden","ReplaceElement","renderOption","render","parseInt","MODES","scope","updateContext","whens","include","ATTRIBUTE","iterate","itemContext","count","start","step","array","Math","min","iteration","number","doForeach","doCount","DIRECTIVENAME","IGNOREDIRECTIVE","DATA","VAR","STATUS","COUNT","START","STEP","CONDITION","tagname","doRepeat","DEFAULT_OPTION","unsecure","preventFormat","maxLength","textContent","substring","trimTextLength","Text","readOption","ATTRIBUTE_NAME","DEFAULT_EVENT_FUNCTION","OPTION_PREVENT_DEFAULT","IGNORED_ATTRIBUTES","EVENTFUNCTIONS","eventhandle","delegater","toggleclass","toggleattribute","eventHandle","bindAttribute","isValue","bindEvent","bubble","binding","binder","currentTarget","processed","jstl","ATTRIBUTE__ATTACHELEMENT","MODE_REPLACE","PRECHECK","test","getElement","log","NAME","ATTRIBUTE_ON_FINISHED","ATTRIBUTE_ON_FINISHED_ASYNC","asyncCall","$element","$root","$template","SCOPES","APPLICATION_SCOPE_RESOLVER","MODEWORKER","renderNode","executeDirectives","subTemplate","containerResolver","Renderer","calledWithContext","loadTemplateContent","nodeTemplate","nodeResolver","nodeContext","renderContainer","modeworker","addContent","build","_app","_route","ROUTEDATA","reference","weakmap","View","app","$view","$app","$store","store","$route","$context","_view","_store","ATTR_ROUTE","findRoute","findView","closestView","buildRouteContext","Application","routes","calcCampaignAvailability","registration","availability","fullyavailable","score","day","available","slice","addDays","days","date","setDate","getDate","navigator","serviceWorker","register","reg","installing","waiting","postMessage","catch","HTMLDialogExtentionElement","HTMLDialogElement","close","extends","WotLoginComponent","user","attrTemplate","TEMPLATE_URL__ROOT","HTMLClanElement","clanData","members","internalFetch","toURL","ok","getJSON","postJSON","deleteJSON","EXPIRESAT","getCache","loadMembers","getMember","memberid","ENDPOINT_BY_ID","TEMPLATES_PATH","TEMPLATE_ROOT","HTMLMemberElement","memberId","getCampaigns","campaigns","campaign","getCampaign","HTML_TAG_PREFIX","EVENTHANDLE_INPUT_TIMEOUT","NODENAME_FORM","NODENAME_SUBMIT_ACTION","NODENAME_PAGE","NODENAME_FIELD","NODENAME_CONTAINER","NODENAME_LIST","NODENAME_LIST_ROWS","NODENAME_LIST_ROW","NODENAME_LIST_ADD_ROW","NODENAME_LIST_DELETE_ROW","NODENAME_PROGESSBAR","NODENAME_STEP","NODENAME_VALIDATION","NODENAME_MESSAGE","NODENAME_CONTROL","NODENAME_CONTROL_BACK","NODENAME_CONTROL_NEXT","NODENAME_CONTROL_SUMMARY","NODENAME_CONTROL_SUBMIT","FORMSTATE_INIT","FORMSTATE_VALIDATING","FORMSTATE_INPUT","FORMSTATE_SUMMARY","FORMSTATE_FINISHED","EVENT_PREFIX","EVENT_INITIALIZED","EVENT_INITIALIZE_SUBMIT_ACTION","EVENT_SUBMIT","EVENT_SUBMIT_RESULTS","EVENT_CONDITION_STATE_CHANGED","EVENT_SITE_CHANGED","EVENT_FORM_STATE_CHANGED","EVENT_FIELD_INPUT","EVENT_LIST_ROW_ADD","EVENT_LIST_ROW_DELETE","EVENT_PROGRESSBAR_CHANGED","EVENT_FIELD_INITIALIZED","EVENT_FIELD_REMOVED","EVENT_PAGE_INITIALIZED","EVENT_PAGE_REMOVED","EVENT_VALIDATION_INITIALIZED","EVENT_VALIDATION_REMOVED","EVENT_MESSAGE_INITIALIZED","EVENT_MESSAGE_REMOVED","EVENT_ACTIVE_STATE_CHANGED","EVENT_VALID_STATE_CHANGED","EVENT_EDITABLE_STATE_CHANGED","SPECIALVARS","ATTRIBUTE_ENDPOINT","ATTRIBUTE_METHOD","ATTRIBUTE_STATE","ATTRIBUTE_STEP","ATTRIBUTE_USE_SUMMARY_PAGE","ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT","ATTRIBUTE_REQUIRED","ATTRIBUTE_CONDITION","ATTRIBUTE_ACTIVE","ATTRIBUTE_DISABLED","ATTRIBUTE_EDITABLE","ATTRIBUTE_EDITABLE_CONDITION","ATTRIBUTE_READONLY","ATTRIBUTE_NOVALUE","ATTRIBUTE_VALID","ATTRIBUTE_INVALID","ATTRIBUTE_EVALUATE","ATTRIBUTE_CONDITION_VALID","ATTRIBUTE_CONDITION_INVALID","ATTRIBUTE_MIN","ATTRIBUTE_MAX","ATTRIBUTE_PROGRESS","base","validate","current","editable","addCustomValidation","validation","customs","validations","required","valid","validateCustomValidations","message","update","valueHelper","assign","fieldValueMapToObject","fieldOrder","field","NAME_SPLITTER","del","setValue","updateActiveState","initial","oldState","updateReadonlyState","readonly","_form","addValidation","_value","row","evaluationData","form","activeUpdated","readonlyUpdated","updateEditableState","editableUpdated","conditionUpdated","updateValidState","validUpdated","_parent","publishValue","parentField","findParentField","currentValue","acceptValue","normalizeValue","updatedValue","currentCondition","currentValid","validationStateChanged","conditionChange","validationChanged","noValue","dataIsNoValue","childValueChanged","toTimeoutHandle","prevent","eventCopy","explicitOriginalTarget","originalTarget","srcElement","timeStamp","makeEventCopy","Wrapper","findInput","input","disabled","DEFAULTTYPE","valueAsNumber","Number","isNaN","datetime","TIMEFORMAT","Intl","DateTimeFormat","hour","minute","TYPES","valueAsDate","format","readFile","readFnName","reader","FileReader","FORMAT","readFiles","files","multiple","wrappers","checkValidity","floor","random","radio","filenameTarget","filename","Field","findWrapper","treeFilter","elements","validateFields","fields","reduce","fieldValid","Container","clear","fieldValue","hasField","DeleteRow","ListRow","EVENT__INITIALIZED__BUTTON__ADDROW","AddRow","ListRows","buildData","rows","List","createRow","max","rowTemplate","MAX_SAFE_INTEGER","Page","Message","BackButton","toPrevPage","NextButton","toNextPage","SummaryButton","SubmitButton","submit","BUTTONDUMMY","Control","state","back","summary","activePageIndex","activePage","nextPage","pages","useSummaryPage","hasNextPage","Step","ProgressBar","stepName","page","firstStepPageIndex","progress","pageStep","steps","STATE_SUCCESS","STATE_FAIL","action","DefaultFormSubmitAction","endpoint","credentials","_submitActions","Form","actual","scrollIntoView","prevPage","prev","submitActions","actions","childs","executeActions","TEMPLATE_URL__CREATEDIALOG","HTMLCampaignsElement","openCreateDialog","storeCampaign","showModal","Entry","expireAfter","campaignid","entry","entries","appendRegistraion","registrations","getCachedRegistrations","loadRegistrions","getRegistrations","storeRegistration","cacheRegistration","getMyRegistration","getRegistrationByMember","TEMPLATE_REGISTRATION","TEMPLATE_REGISTRATIONS","getDatesBetweenTwoDates","ceil","abs","dates","HTMLCampaignElement","HTMLDetailsElement","showRegistrations","confirm","deleteCampaign","campaignId","openRegistrationDialog","isRegistrated","startdate","enddate","dialog","HTMLCampaignMemberElement","getRegistration","CACHE_CAMPAIGNTEAMS","getCampignCache","cacheKey","campaignCache","getTeam","team","storeTeam","TEMPLATE__ROOT","TEMPLATE__EDITOR","HTMLTeamElement","teamId","deleteTeam","editorDialog","HTMLTeamsElement","teams","getTeams","TEMPLATE_DIALOG","HTMLTeamMemberSearchFieldElement","showSelectionDialog","selections","memberids","filterContainer","getMembers","toDate","year","getFullYear","month","getMonth","dateGreaterEqual","formUtils","greaterEqual","greaterEqualNow","greater","DATEFORMAT","weekday","DateFormats"],"sourceRoot":""}